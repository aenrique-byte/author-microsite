var Xf=Object.defineProperty;var Jf=(e,t,r)=>t in e?Xf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var re=(e,t,r)=>Jf(e,typeof t!="symbol"?t+"":t,r);function em(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(n,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();function cl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Hd={exports:{}},ul={},Wd={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=Symbol.for("react.element"),tm=Symbol.for("react.portal"),rm=Symbol.for("react.fragment"),nm=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),am=Symbol.for("react.provider"),lm=Symbol.for("react.context"),im=Symbol.for("react.forward_ref"),om=Symbol.for("react.suspense"),cm=Symbol.for("react.memo"),um=Symbol.for("react.lazy"),su=Symbol.iterator;function dm(e){return e===null||typeof e!="object"?null:(e=su&&e[su]||e["@@iterator"],typeof e=="function"?e:null)}var Vd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gd=Object.assign,Qd={};function Pn(e,t,r){this.props=e,this.context=t,this.refs=Qd,this.updater=r||Vd}Pn.prototype.isReactComponent={};Pn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Yd(){}Yd.prototype=Pn.prototype;function Po(e,t,r){this.props=e,this.context=t,this.refs=Qd,this.updater=r||Vd}var Ao=Po.prototype=new Yd;Ao.constructor=Po;Gd(Ao,Pn.prototype);Ao.isPureReactComponent=!0;var au=Array.isArray,Kd=Object.prototype.hasOwnProperty,$o={current:null},qd={key:!0,ref:!0,__self:!0,__source:!0};function Zd(e,t,r){var n,s={},l=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)Kd.call(t,n)&&!qd.hasOwnProperty(n)&&(s[n]=t[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:Ms,type:e,key:l,ref:i,props:s,_owner:$o.current}}function pm(e,t){return{$$typeof:Ms,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ms}function hm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var lu=/\/+/g;function Dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hm(""+e.key):t.toString(36)}function ga(e,t,r,n,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ms:case tm:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+Dl(i,0):n,au(s)?(r="",e!=null&&(r=e.replace(lu,"$&/")+"/"),ga(s,t,r,"",function(u){return u})):s!=null&&(Lo(s)&&(s=pm(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(lu,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",au(e))for(var o=0;o<e.length;o++){l=e[o];var c=n+Dl(l,o);i+=ga(l,t,r,c,s)}else if(c=dm(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=n+Dl(l,o++),i+=ga(l,t,r,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Ks(e,t,r){if(e==null)return e;var n=[],s=0;return ga(e,n,"","",function(l){return t.call(r,l,s++)}),n}function fm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qe={current:null},xa={transition:null},mm={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:xa,ReactCurrentOwner:$o};function Xd(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Ks,forEach:function(e,t,r){Ks(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ks(e,function(){t++}),t},toArray:function(e){return Ks(e,function(t){return t})||[]},only:function(e){if(!Lo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Component=Pn;se.Fragment=rm;se.Profiler=sm;se.PureComponent=Po;se.StrictMode=nm;se.Suspense=om;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mm;se.act=Xd;se.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Gd({},e.props),s=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=$o.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Kd.call(t,c)&&!qd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Ms,type:e.type,key:s,ref:l,props:n,_owner:i}};se.createContext=function(e){return e={$$typeof:lm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:am,_context:e},e.Consumer=e};se.createElement=Zd;se.createFactory=function(e){var t=Zd.bind(null,e);return t.type=e,t};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:im,render:e}};se.isValidElement=Lo;se.lazy=function(e){return{$$typeof:um,_payload:{_status:-1,_result:e},_init:fm}};se.memo=function(e,t){return{$$typeof:cm,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=xa.transition;xa.transition={};try{e()}finally{xa.transition=t}};se.unstable_act=Xd;se.useCallback=function(e,t){return qe.current.useCallback(e,t)};se.useContext=function(e){return qe.current.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e){return qe.current.useDeferredValue(e)};se.useEffect=function(e,t){return qe.current.useEffect(e,t)};se.useId=function(){return qe.current.useId()};se.useImperativeHandle=function(e,t,r){return qe.current.useImperativeHandle(e,t,r)};se.useInsertionEffect=function(e,t){return qe.current.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return qe.current.useLayoutEffect(e,t)};se.useMemo=function(e,t){return qe.current.useMemo(e,t)};se.useReducer=function(e,t,r){return qe.current.useReducer(e,t,r)};se.useRef=function(e){return qe.current.useRef(e)};se.useState=function(e){return qe.current.useState(e)};se.useSyncExternalStore=function(e,t,r){return qe.current.useSyncExternalStore(e,t,r)};se.useTransition=function(){return qe.current.useTransition()};se.version="18.3.1";Wd.exports=se;var g=Wd.exports;const Vt=cl(g),gm=em({__proto__:null,default:Vt},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=g,ym=Symbol.for("react.element"),vm=Symbol.for("react.fragment"),km=Object.prototype.hasOwnProperty,wm=xm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bm={key:!0,ref:!0,__self:!0,__source:!0};function Jd(e,t,r){var n,s={},l=null,i=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)km.call(t,n)&&!bm.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:ym,type:e,key:l,ref:i,props:s,_owner:wm.current}}ul.Fragment=vm;ul.jsx=Jd;ul.jsxs=Jd;Hd.exports=ul;var a=Hd.exports,ep={exports:{}},ut={},tp={exports:{}},rp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,B){var Q=R.length;R.push(B);e:for(;0<Q;){var P=Q-1>>>1,V=R[P];if(0<s(V,B))R[P]=B,R[Q]=V,Q=P;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var B=R[0],Q=R.pop();if(Q!==B){R[0]=Q;e:for(var P=0,V=R.length,W=V>>>1;P<W;){var ae=2*(P+1)-1,ee=R[ae],q=ae+1,ve=R[q];if(0>s(ee,Q))q<V&&0>s(ve,ee)?(R[P]=ve,R[q]=Q,P=q):(R[P]=ee,R[ae]=Q,P=ae);else if(q<V&&0>s(ve,Q))R[P]=ve,R[q]=Q,P=q;else break e}}return B}function s(R,B){var Q=R.sortIndex-B.sortIndex;return Q!==0?Q:R.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,h=3,y=!1,v=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=R)n(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(u)}}function j(R){if(k=!1,x(R),!v)if(r(c)!==null)v=!0,U(T);else{var B=r(u);B!==null&&K(j,B.startTime-R)}}function T(R,B){v=!1,k&&(k=!1,p(L),L=-1),y=!0;var Q=h;try{for(x(B),f=r(c);f!==null&&(!(f.expirationTime>B)||R&&!F());){var P=f.callback;if(typeof P=="function"){f.callback=null,h=f.priorityLevel;var V=P(f.expirationTime<=B);B=e.unstable_now(),typeof V=="function"?f.callback=V:f===r(c)&&n(c),x(B)}else n(c);f=r(c)}if(f!==null)var W=!0;else{var ae=r(u);ae!==null&&K(j,ae.startTime-B),W=!1}return W}finally{f=null,h=Q,y=!1}}var E=!1,A=null,L=-1,I=5,S=-1;function F(){return!(e.unstable_now()-S<I)}function X(){if(A!==null){var R=e.unstable_now();S=R;var B=!0;try{B=A(!0,R)}finally{B?J():(E=!1,A=null)}}else E=!1}var J;if(typeof m=="function")J=function(){m(X)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,C=M.port2;M.port1.onmessage=X,J=function(){C.postMessage(null)}}else J=function(){b(X,0)};function U(R){A=R,E||(E=!0,J())}function K(R,B){L=b(function(){R(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,U(T))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var Q=h;h=B;try{return R()}finally{h=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Q=h;h=R;try{return B()}finally{h=Q}},e.unstable_scheduleCallback=function(R,B,Q){var P=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?P+Q:P):Q=P,R){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Q+V,R={id:d++,callback:B,priorityLevel:R,startTime:Q,expirationTime:V,sortIndex:-1},Q>P?(R.sortIndex=Q,t(u,R),r(c)===null&&R===r(u)&&(k?(p(L),L=-1):k=!0,K(j,Q-P))):(R.sortIndex=V,t(c,R),v||y||(v=!0,U(T))),R},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(R){var B=h;return function(){var Q=h;h=B;try{return R.apply(this,arguments)}finally{h=Q}}}})(rp);tp.exports=rp;var jm=tp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm=g,ct=jm;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var np=new Set,ys={};function Vr(e,t){jn(e,t),jn(e+"Capture",t)}function jn(e,t){for(ys[e]=t,e=0;e<t.length;e++)np.add(t[e])}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ni=Object.prototype.hasOwnProperty,Sm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iu={},ou={};function _m(e){return Ni.call(ou,e)?!0:Ni.call(iu,e)?!1:Sm.test(e)?ou[e]=!0:(iu[e]=!0,!1)}function Cm(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Em(e,t,r,n){if(t===null||typeof t>"u"||Cm(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ze(e,t,r,n,s,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ie[e]=new Ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ie[t]=new Ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ie[e]=new Ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ie[e]=new Ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ie[e]=new Ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ie[e]=new Ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ie[e]=new Ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ie[e]=new Ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ie[e]=new Ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ro=/[\-:]([a-z])/g;function Io(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ro,Io);Ie[t]=new Ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ro,Io);Ie[t]=new Ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ro,Io);Ie[t]=new Ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ie[e]=new Ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ie[e]=new Ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Oo(e,t,r,n){var s=Ie.hasOwnProperty(t)?Ie[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Em(t,r,s,n)&&(r=null),n||s===null?_m(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var tr=Nm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qs=Symbol.for("react.element"),rn=Symbol.for("react.portal"),nn=Symbol.for("react.fragment"),Mo=Symbol.for("react.strict_mode"),Si=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),ap=Symbol.for("react.context"),Do=Symbol.for("react.forward_ref"),_i=Symbol.for("react.suspense"),Ci=Symbol.for("react.suspense_list"),zo=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),lp=Symbol.for("react.offscreen"),cu=Symbol.iterator;function Un(e){return e===null||typeof e!="object"?null:(e=cu&&e[cu]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,zl;function ss(e){if(zl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);zl=t&&t[1]||""}return`
`+zl+e}var Fl=!1;function Ul(e,t){if(!e||Fl)return"";Fl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),l=n.stack.split(`
`),i=s.length-1,o=l.length-1;1<=i&&0<=o&&s[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||s[i]!==l[o]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{Fl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ss(e):""}function Tm(e){switch(e.tag){case 5:return ss(e.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return e=Ul(e.type,!1),e;case 11:return e=Ul(e.type.render,!1),e;case 1:return e=Ul(e.type,!0),e;default:return""}}function Ei(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nn:return"Fragment";case rn:return"Portal";case Si:return"Profiler";case Mo:return"StrictMode";case _i:return"Suspense";case Ci:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ap:return(e.displayName||"Context")+".Consumer";case sp:return(e._context.displayName||"Context")+".Provider";case Do:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zo:return t=e.displayName||null,t!==null?t:Ei(e.type)||"Memo";case or:t=e._payload,e=e._init;try{return Ei(e(t))}catch{}}return null}function Pm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ei(t);case 8:return t===Mo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ip(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Am(e){var t=ip(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zs(e){e._valueTracker||(e._valueTracker=Am(e))}function op(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ip(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ra(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ti(e,t){var r=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function uu(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Nr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cp(e,t){t=t.checked,t!=null&&Oo(e,"checked",t,!1)}function Pi(e,t){cp(e,t);var r=Nr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ai(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ai(e,t.type,Nr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function du(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ai(e,t,r){(t!=="number"||Ra(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var as=Array.isArray;function mn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Nr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function $i(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(O(92));if(as(r)){if(1<r.length)throw Error(O(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Nr(r)}}function up(e,t){var r=Nr(t.value),n=Nr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function hu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Li(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xs,pp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xs=Xs||document.createElement("div"),Xs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$m=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(e){$m.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),os[t]=os[e]})});function hp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||os.hasOwnProperty(e)&&os[e]?(""+t).trim():t+"px"}function fp(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=hp(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Lm=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ri(e,t){if(t){if(Lm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function Ii(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oi=null;function Fo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mi=null,gn=null,xn=null;function fu(e){if(e=Fs(e)){if(typeof Mi!="function")throw Error(O(280));var t=e.stateNode;t&&(t=ml(t),Mi(e.stateNode,e.type,t))}}function mp(e){gn?xn?xn.push(e):xn=[e]:gn=e}function gp(){if(gn){var e=gn,t=xn;if(xn=gn=null,fu(e),t)for(e=0;e<t.length;e++)fu(t[e])}}function xp(e,t){return e(t)}function yp(){}var Bl=!1;function vp(e,t,r){if(Bl)return e(t,r);Bl=!0;try{return xp(e,t,r)}finally{Bl=!1,(gn!==null||xn!==null)&&(yp(),gp())}}function ks(e,t){var r=e.stateNode;if(r===null)return null;var n=ml(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(O(231,t,typeof r));return r}var Di=!1;if(Zt)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){Di=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{Di=!1}function Rm(e,t,r,n,s,l,i,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var cs=!1,Ia=null,Oa=!1,zi=null,Im={onError:function(e){cs=!0,Ia=e}};function Om(e,t,r,n,s,l,i,o,c){cs=!1,Ia=null,Rm.apply(Im,arguments)}function Mm(e,t,r,n,s,l,i,o,c){if(Om.apply(this,arguments),cs){if(cs){var u=Ia;cs=!1,Ia=null}else throw Error(O(198));Oa||(Oa=!0,zi=u)}}function Gr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function kp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mu(e){if(Gr(e)!==e)throw Error(O(188))}function Dm(e){var t=e.alternate;if(!t){if(t=Gr(e),t===null)throw Error(O(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var l=s.alternate;if(l===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===r)return mu(s),e;if(l===n)return mu(s),t;l=l.sibling}throw Error(O(188))}if(r.return!==n.return)r=s,n=l;else{for(var i=!1,o=s.child;o;){if(o===r){i=!0,r=s,n=l;break}if(o===n){i=!0,n=s,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=s;break}if(o===n){i=!0,n=l,r=s;break}o=o.sibling}if(!i)throw Error(O(189))}}if(r.alternate!==n)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?e:t}function wp(e){return e=Dm(e),e!==null?bp(e):null}function bp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bp(e);if(t!==null)return t;e=e.sibling}return null}var jp=ct.unstable_scheduleCallback,gu=ct.unstable_cancelCallback,zm=ct.unstable_shouldYield,Fm=ct.unstable_requestPaint,be=ct.unstable_now,Um=ct.unstable_getCurrentPriorityLevel,Uo=ct.unstable_ImmediatePriority,Np=ct.unstable_UserBlockingPriority,Ma=ct.unstable_NormalPriority,Bm=ct.unstable_LowPriority,Sp=ct.unstable_IdlePriority,dl=null,Ot=null;function Hm(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(dl,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:Gm,Wm=Math.log,Vm=Math.LN2;function Gm(e){return e>>>=0,e===0?32:31-(Wm(e)/Vm|0)|0}var Js=64,ea=4194304;function ls(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Da(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~s;o!==0?n=ls(o):(l&=i,l!==0&&(n=ls(l)))}else i=r&~s,i!==0?n=ls(i):l!==0&&(n=ls(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ct(t),s=1<<r,n|=e[r],t&=~s;return n}function Qm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ym(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Ct(l),o=1<<i,c=s[i];c===-1?(!(o&r)||o&n)&&(s[i]=Qm(o,t)):c<=t&&(e.expiredLanes|=o),l&=~o}}function Fi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _p(){var e=Js;return Js<<=1,!(Js&4194240)&&(Js=64),e}function Hl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ds(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ct(t),e[t]=r}function Km(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ct(r),l=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~l}}function Bo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ct(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var ue=0;function Cp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ep,Ho,Tp,Pp,Ap,Ui=!1,ta=[],mr=null,gr=null,xr=null,ws=new Map,bs=new Map,ur=[],qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xu(e,t){switch(e){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":ws.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(t.pointerId)}}function Hn(e,t,r,n,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Fs(t),t!==null&&Ho(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Zm(e,t,r,n,s){switch(t){case"focusin":return mr=Hn(mr,e,t,r,n,s),!0;case"dragenter":return gr=Hn(gr,e,t,r,n,s),!0;case"mouseover":return xr=Hn(xr,e,t,r,n,s),!0;case"pointerover":var l=s.pointerId;return ws.set(l,Hn(ws.get(l)||null,e,t,r,n,s)),!0;case"gotpointercapture":return l=s.pointerId,bs.set(l,Hn(bs.get(l)||null,e,t,r,n,s)),!0}return!1}function $p(e){var t=Lr(e.target);if(t!==null){var r=Gr(t);if(r!==null){if(t=r.tag,t===13){if(t=kp(r),t!==null){e.blockedOn=t,Ap(e.priority,function(){Tp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ya(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Bi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Oi=n,r.target.dispatchEvent(n),Oi=null}else return t=Fs(r),t!==null&&Ho(t),e.blockedOn=r,!1;t.shift()}return!0}function yu(e,t,r){ya(e)&&r.delete(t)}function Xm(){Ui=!1,mr!==null&&ya(mr)&&(mr=null),gr!==null&&ya(gr)&&(gr=null),xr!==null&&ya(xr)&&(xr=null),ws.forEach(yu),bs.forEach(yu)}function Wn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ui||(Ui=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,Xm)))}function js(e){function t(s){return Wn(s,e)}if(0<ta.length){Wn(ta[0],e);for(var r=1;r<ta.length;r++){var n=ta[r];n.blockedOn===e&&(n.blockedOn=null)}}for(mr!==null&&Wn(mr,e),gr!==null&&Wn(gr,e),xr!==null&&Wn(xr,e),ws.forEach(t),bs.forEach(t),r=0;r<ur.length;r++)n=ur[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ur.length&&(r=ur[0],r.blockedOn===null);)$p(r),r.blockedOn===null&&ur.shift()}var yn=tr.ReactCurrentBatchConfig,za=!0;function Jm(e,t,r,n){var s=ue,l=yn.transition;yn.transition=null;try{ue=1,Wo(e,t,r,n)}finally{ue=s,yn.transition=l}}function eg(e,t,r,n){var s=ue,l=yn.transition;yn.transition=null;try{ue=4,Wo(e,t,r,n)}finally{ue=s,yn.transition=l}}function Wo(e,t,r,n){if(za){var s=Bi(e,t,r,n);if(s===null)Jl(e,t,n,Fa,r),xu(e,n);else if(Zm(s,e,t,r,n))n.stopPropagation();else if(xu(e,n),t&4&&-1<qm.indexOf(e)){for(;s!==null;){var l=Fs(s);if(l!==null&&Ep(l),l=Bi(e,t,r,n),l===null&&Jl(e,t,n,Fa,r),l===s)break;s=l}s!==null&&n.stopPropagation()}else Jl(e,t,n,null,r)}}var Fa=null;function Bi(e,t,r,n){if(Fa=null,e=Fo(n),e=Lr(e),e!==null)if(t=Gr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=kp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fa=e,null}function Lp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Um()){case Uo:return 1;case Np:return 4;case Ma:case Bm:return 16;case Sp:return 536870912;default:return 16}default:return 16}}var pr=null,Vo=null,va=null;function Rp(){if(va)return va;var e,t=Vo,r=t.length,n,s="value"in pr?pr.value:pr.textContent,l=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[l-n];n++);return va=s.slice(e,1<n?1-n:void 0)}function ka(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ra(){return!0}function vu(){return!1}function dt(e){function t(r,n,s,l,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ra:vu,this.isPropagationStopped=vu,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),t}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Go=dt(An),zs=ye({},An,{view:0,detail:0}),tg=dt(zs),Wl,Vl,Vn,pl=ye({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vn&&(Vn&&e.type==="mousemove"?(Wl=e.screenX-Vn.screenX,Vl=e.screenY-Vn.screenY):Vl=Wl=0,Vn=e),Wl)},movementY:function(e){return"movementY"in e?e.movementY:Vl}}),ku=dt(pl),rg=ye({},pl,{dataTransfer:0}),ng=dt(rg),sg=ye({},zs,{relatedTarget:0}),Gl=dt(sg),ag=ye({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),lg=dt(ag),ig=ye({},An,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),og=dt(ig),cg=ye({},An,{data:0}),wu=dt(cg),ug={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pg[e])?!!t[e]:!1}function Qo(){return hg}var fg=ye({},zs,{key:function(e){if(e.key){var t=ug[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ka(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qo,charCode:function(e){return e.type==="keypress"?ka(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ka(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mg=dt(fg),gg=ye({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bu=dt(gg),xg=ye({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qo}),yg=dt(xg),vg=ye({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),kg=dt(vg),wg=ye({},pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bg=dt(wg),jg=[9,13,27,32],Yo=Zt&&"CompositionEvent"in window,us=null;Zt&&"documentMode"in document&&(us=document.documentMode);var Ng=Zt&&"TextEvent"in window&&!us,Ip=Zt&&(!Yo||us&&8<us&&11>=us),ju=" ",Nu=!1;function Op(e,t){switch(e){case"keyup":return jg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sn=!1;function Sg(e,t){switch(e){case"compositionend":return Mp(t);case"keypress":return t.which!==32?null:(Nu=!0,ju);case"textInput":return e=t.data,e===ju&&Nu?null:e;default:return null}}function _g(e,t){if(sn)return e==="compositionend"||!Yo&&Op(e,t)?(e=Rp(),va=Vo=pr=null,sn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ip&&t.locale!=="ko"?null:t.data;default:return null}}var Cg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Su(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cg[e.type]:t==="textarea"}function Dp(e,t,r,n){mp(n),t=Ua(t,"onChange"),0<t.length&&(r=new Go("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ds=null,Ns=null;function Eg(e){Kp(e,0)}function hl(e){var t=on(e);if(op(t))return e}function Tg(e,t){if(e==="change")return t}var zp=!1;if(Zt){var Ql;if(Zt){var Yl="oninput"in document;if(!Yl){var _u=document.createElement("div");_u.setAttribute("oninput","return;"),Yl=typeof _u.oninput=="function"}Ql=Yl}else Ql=!1;zp=Ql&&(!document.documentMode||9<document.documentMode)}function Cu(){ds&&(ds.detachEvent("onpropertychange",Fp),Ns=ds=null)}function Fp(e){if(e.propertyName==="value"&&hl(Ns)){var t=[];Dp(t,Ns,e,Fo(e)),vp(Eg,t)}}function Pg(e,t,r){e==="focusin"?(Cu(),ds=t,Ns=r,ds.attachEvent("onpropertychange",Fp)):e==="focusout"&&Cu()}function Ag(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hl(Ns)}function $g(e,t){if(e==="click")return hl(t)}function Lg(e,t){if(e==="input"||e==="change")return hl(t)}function Rg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:Rg;function Ss(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ni.call(t,s)||!Tt(e[s],t[s]))return!1}return!0}function Eu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tu(e,t){var r=Eu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Eu(r)}}function Up(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Up(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bp(){for(var e=window,t=Ra();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ra(e.document)}return t}function Ko(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ig(e){var t=Bp(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Up(r.ownerDocument.documentElement,r)){if(n!==null&&Ko(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,l=Math.min(n.start,s);n=n.end===void 0?l:Math.min(n.end,s),!e.extend&&l>n&&(s=n,n=l,l=s),s=Tu(r,l);var i=Tu(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Og=Zt&&"documentMode"in document&&11>=document.documentMode,an=null,Hi=null,ps=null,Wi=!1;function Pu(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wi||an==null||an!==Ra(n)||(n=an,"selectionStart"in n&&Ko(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ps&&Ss(ps,n)||(ps=n,n=Ua(Hi,"onSelect"),0<n.length&&(t=new Go("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=an)))}function na(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ln={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionend:na("Transition","TransitionEnd")},Kl={},Hp={};Zt&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete ln.animationend.animation,delete ln.animationiteration.animation,delete ln.animationstart.animation),"TransitionEvent"in window||delete ln.transitionend.transition);function fl(e){if(Kl[e])return Kl[e];if(!ln[e])return e;var t=ln[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Hp)return Kl[e]=t[r];return e}var Wp=fl("animationend"),Vp=fl("animationiteration"),Gp=fl("animationstart"),Qp=fl("transitionend"),Yp=new Map,Au="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Yp.set(e,t),Vr(t,[e])}for(var ql=0;ql<Au.length;ql++){var Zl=Au[ql],Mg=Zl.toLowerCase(),Dg=Zl[0].toUpperCase()+Zl.slice(1);_r(Mg,"on"+Dg)}_r(Wp,"onAnimationEnd");_r(Vp,"onAnimationIteration");_r(Gp,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(Qp,"onTransitionEnd");jn("onMouseEnter",["mouseout","mouseover"]);jn("onMouseLeave",["mouseout","mouseover"]);jn("onPointerEnter",["pointerout","pointerover"]);jn("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zg=new Set("cancel close invalid load scroll toggle".split(" ").concat(is));function $u(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Mm(n,t,void 0,e),e.currentTarget=null}function Kp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==l&&s.isPropagationStopped())break e;$u(s,o,u),l=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,u=o.currentTarget,o=o.listener,c!==l&&s.isPropagationStopped())break e;$u(s,o,u),l=c}}}if(Oa)throw e=zi,Oa=!1,zi=null,e}function pe(e,t){var r=t[Ki];r===void 0&&(r=t[Ki]=new Set);var n=e+"__bubble";r.has(n)||(qp(t,e,2,!1),r.add(n))}function Xl(e,t,r){var n=0;t&&(n|=4),qp(r,e,n,t)}var sa="_reactListening"+Math.random().toString(36).slice(2);function _s(e){if(!e[sa]){e[sa]=!0,np.forEach(function(r){r!=="selectionchange"&&(zg.has(r)||Xl(r,!1,e),Xl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[sa]||(t[sa]=!0,Xl("selectionchange",!1,t))}}function qp(e,t,r,n){switch(Lp(t)){case 1:var s=Jm;break;case 4:s=eg;break;default:s=Wo}r=s.bind(null,t,r,e),s=void 0,!Di||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Jl(e,t,r,n,s){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;o!==null;){if(i=Lr(o),i===null)return;if(c=i.tag,c===5||c===6){n=l=i;continue e}o=o.parentNode}}n=n.return}vp(function(){var u=l,d=Fo(r),f=[];e:{var h=Yp.get(e);if(h!==void 0){var y=Go,v=e;switch(e){case"keypress":if(ka(r)===0)break e;case"keydown":case"keyup":y=mg;break;case"focusin":v="focus",y=Gl;break;case"focusout":v="blur",y=Gl;break;case"beforeblur":case"afterblur":y=Gl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ku;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=ng;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=yg;break;case Wp:case Vp:case Gp:y=lg;break;case Qp:y=kg;break;case"scroll":y=tg;break;case"wheel":y=bg;break;case"copy":case"cut":case"paste":y=og;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=bu}var k=(t&4)!==0,b=!k&&e==="scroll",p=k?h!==null?h+"Capture":null:h;k=[];for(var m=u,x;m!==null;){x=m;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,p!==null&&(j=ks(m,p),j!=null&&k.push(Cs(m,j,x)))),b)break;m=m.return}0<k.length&&(h=new y(h,v,null,r,d),f.push({event:h,listeners:k}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&r!==Oi&&(v=r.relatedTarget||r.fromElement)&&(Lr(v)||v[Xt]))break e;if((y||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=u,v=v?Lr(v):null,v!==null&&(b=Gr(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(k=ku,j="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(k=bu,j="onPointerLeave",p="onPointerEnter",m="pointer"),b=y==null?h:on(y),x=v==null?h:on(v),h=new k(j,m+"leave",y,r,d),h.target=b,h.relatedTarget=x,j=null,Lr(d)===u&&(k=new k(p,m+"enter",v,r,d),k.target=x,k.relatedTarget=b,j=k),b=j,y&&v)t:{for(k=y,p=v,m=0,x=k;x;x=Jr(x))m++;for(x=0,j=p;j;j=Jr(j))x++;for(;0<m-x;)k=Jr(k),m--;for(;0<x-m;)p=Jr(p),x--;for(;m--;){if(k===p||p!==null&&k===p.alternate)break t;k=Jr(k),p=Jr(p)}k=null}else k=null;y!==null&&Lu(f,h,y,k,!1),v!==null&&b!==null&&Lu(f,b,v,k,!0)}}e:{if(h=u?on(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var T=Tg;else if(Su(h))if(zp)T=Lg;else{T=Ag;var E=Pg}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=$g);if(T&&(T=T(e,u))){Dp(f,T,r,d);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Ai(h,"number",h.value)}switch(E=u?on(u):window,e){case"focusin":(Su(E)||E.contentEditable==="true")&&(an=E,Hi=u,ps=null);break;case"focusout":ps=Hi=an=null;break;case"mousedown":Wi=!0;break;case"contextmenu":case"mouseup":case"dragend":Wi=!1,Pu(f,r,d);break;case"selectionchange":if(Og)break;case"keydown":case"keyup":Pu(f,r,d)}var A;if(Yo)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else sn?Op(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(Ip&&r.locale!=="ko"&&(sn||L!=="onCompositionStart"?L==="onCompositionEnd"&&sn&&(A=Rp()):(pr=d,Vo="value"in pr?pr.value:pr.textContent,sn=!0)),E=Ua(u,L),0<E.length&&(L=new wu(L,e,null,r,d),f.push({event:L,listeners:E}),A?L.data=A:(A=Mp(r),A!==null&&(L.data=A)))),(A=Ng?Sg(e,r):_g(e,r))&&(u=Ua(u,"onBeforeInput"),0<u.length&&(d=new wu("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=A))}Kp(f,t)})}function Cs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ua(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=ks(e,r),l!=null&&n.unshift(Cs(e,l,s)),l=ks(e,t),l!=null&&n.push(Cs(e,l,s))),e=e.return}return n}function Jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lu(e,t,r,n,s){for(var l=t._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,s?(c=ks(r,l),c!=null&&i.unshift(Cs(r,c,o))):s||(c=ks(r,l),c!=null&&i.push(Cs(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Fg=/\r\n?/g,Ug=/\u0000|\uFFFD/g;function Ru(e){return(typeof e=="string"?e:""+e).replace(Fg,`
`).replace(Ug,"")}function aa(e,t,r){if(t=Ru(t),Ru(e)!==t&&r)throw Error(O(425))}function Ba(){}var Vi=null,Gi=null;function Qi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yi=typeof setTimeout=="function"?setTimeout:void 0,Bg=typeof clearTimeout=="function"?clearTimeout:void 0,Iu=typeof Promise=="function"?Promise:void 0,Hg=typeof queueMicrotask=="function"?queueMicrotask:typeof Iu<"u"?function(e){return Iu.resolve(null).then(e).catch(Wg)}:Yi;function Wg(e){setTimeout(function(){throw e})}function ei(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),js(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);js(t)}function yr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ou(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var $n=Math.random().toString(36).slice(2),It="__reactFiber$"+$n,Es="__reactProps$"+$n,Xt="__reactContainer$"+$n,Ki="__reactEvents$"+$n,Vg="__reactListeners$"+$n,Gg="__reactHandles$"+$n;function Lr(e){var t=e[It];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Xt]||r[It]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ou(e);e!==null;){if(r=e[It])return r;e=Ou(e)}return t}e=r,r=e.parentNode}return null}function Fs(e){return e=e[It]||e[Xt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function on(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function ml(e){return e[Es]||null}var qi=[],cn=-1;function Cr(e){return{current:e}}function he(e){0>cn||(e.current=qi[cn],qi[cn]=null,cn--)}function de(e,t){cn++,qi[cn]=e.current,e.current=t}var Sr={},Be=Cr(Sr),rt=Cr(!1),zr=Sr;function Nn(e,t){var r=e.type.contextTypes;if(!r)return Sr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in r)s[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function nt(e){return e=e.childContextTypes,e!=null}function Ha(){he(rt),he(Be)}function Mu(e,t,r){if(Be.current!==Sr)throw Error(O(168));de(Be,t),de(rt,r)}function Zp(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(O(108,Pm(e)||"Unknown",s));return ye({},r,n)}function Wa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,zr=Be.current,de(Be,e),de(rt,rt.current),!0}function Du(e,t,r){var n=e.stateNode;if(!n)throw Error(O(169));r?(e=Zp(e,t,zr),n.__reactInternalMemoizedMergedChildContext=e,he(rt),he(Be),de(Be,e)):he(rt),de(rt,r)}var Wt=null,gl=!1,ti=!1;function Xp(e){Wt===null?Wt=[e]:Wt.push(e)}function Qg(e){gl=!0,Xp(e)}function Er(){if(!ti&&Wt!==null){ti=!0;var e=0,t=ue;try{var r=Wt;for(ue=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Wt=null,gl=!1}catch(s){throw Wt!==null&&(Wt=Wt.slice(e+1)),jp(Uo,Er),s}finally{ue=t,ti=!1}}return null}var un=[],dn=0,Va=null,Ga=0,ft=[],mt=0,Fr=null,Gt=1,Qt="";function Ar(e,t){un[dn++]=Ga,un[dn++]=Va,Va=e,Ga=t}function Jp(e,t,r){ft[mt++]=Gt,ft[mt++]=Qt,ft[mt++]=Fr,Fr=e;var n=Gt;e=Qt;var s=32-Ct(n)-1;n&=~(1<<s),r+=1;var l=32-Ct(t)+s;if(30<l){var i=s-s%5;l=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Gt=1<<32-Ct(t)+s|r<<s|n,Qt=l+e}else Gt=1<<l|r<<s|n,Qt=e}function qo(e){e.return!==null&&(Ar(e,1),Jp(e,1,0))}function Zo(e){for(;e===Va;)Va=un[--dn],un[dn]=null,Ga=un[--dn],un[dn]=null;for(;e===Fr;)Fr=ft[--mt],ft[mt]=null,Qt=ft[--mt],ft[mt]=null,Gt=ft[--mt],ft[mt]=null}var ot=null,it=null,me=!1,St=null;function eh(e,t){var r=gt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function zu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ot=e,it=yr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ot=e,it=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Fr!==null?{id:Gt,overflow:Qt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=gt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ot=e,it=null,!0):!1;default:return!1}}function Zi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xi(e){if(me){var t=it;if(t){var r=t;if(!zu(e,t)){if(Zi(e))throw Error(O(418));t=yr(r.nextSibling);var n=ot;t&&zu(e,t)?eh(n,r):(e.flags=e.flags&-4097|2,me=!1,ot=e)}}else{if(Zi(e))throw Error(O(418));e.flags=e.flags&-4097|2,me=!1,ot=e}}}function Fu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ot=e}function la(e){if(e!==ot)return!1;if(!me)return Fu(e),me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qi(e.type,e.memoizedProps)),t&&(t=it)){if(Zi(e))throw th(),Error(O(418));for(;t;)eh(e,t),t=yr(t.nextSibling)}if(Fu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){it=yr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}it=null}}else it=ot?yr(e.stateNode.nextSibling):null;return!0}function th(){for(var e=it;e;)e=yr(e.nextSibling)}function Sn(){it=ot=null,me=!1}function Xo(e){St===null?St=[e]:St.push(e)}var Yg=tr.ReactCurrentBatchConfig;function Gn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var n=r.stateNode}if(!n)throw Error(O(147,e));var s=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var o=s.refs;i===null?delete o[l]:o[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,e))}return e}function ia(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uu(e){var t=e._init;return t(e._payload)}function rh(e){function t(p,m){if(e){var x=p.deletions;x===null?(p.deletions=[m],p.flags|=16):x.push(m)}}function r(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=br(p,m),p.index=0,p.sibling=null,p}function l(p,m,x){return p.index=x,e?(x=p.alternate,x!==null?(x=x.index,x<m?(p.flags|=2,m):x):(p.flags|=2,m)):(p.flags|=1048576,m)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,m,x,j){return m===null||m.tag!==6?(m=oi(x,p.mode,j),m.return=p,m):(m=s(m,x),m.return=p,m)}function c(p,m,x,j){var T=x.type;return T===nn?d(p,m,x.props.children,j,x.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===or&&Uu(T)===m.type)?(j=s(m,x.props),j.ref=Gn(p,m,x),j.return=p,j):(j=Ca(x.type,x.key,x.props,null,p.mode,j),j.ref=Gn(p,m,x),j.return=p,j)}function u(p,m,x,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=ci(x,p.mode,j),m.return=p,m):(m=s(m,x.children||[]),m.return=p,m)}function d(p,m,x,j,T){return m===null||m.tag!==7?(m=Dr(x,p.mode,j,T),m.return=p,m):(m=s(m,x),m.return=p,m)}function f(p,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=oi(""+m,p.mode,x),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case qs:return x=Ca(m.type,m.key,m.props,null,p.mode,x),x.ref=Gn(p,null,m),x.return=p,x;case rn:return m=ci(m,p.mode,x),m.return=p,m;case or:var j=m._init;return f(p,j(m._payload),x)}if(as(m)||Un(m))return m=Dr(m,p.mode,x,null),m.return=p,m;ia(p,m)}return null}function h(p,m,x,j){var T=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:o(p,m,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case qs:return x.key===T?c(p,m,x,j):null;case rn:return x.key===T?u(p,m,x,j):null;case or:return T=x._init,h(p,m,T(x._payload),j)}if(as(x)||Un(x))return T!==null?null:d(p,m,x,j,null);ia(p,x)}return null}function y(p,m,x,j,T){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(x)||null,o(m,p,""+j,T);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case qs:return p=p.get(j.key===null?x:j.key)||null,c(m,p,j,T);case rn:return p=p.get(j.key===null?x:j.key)||null,u(m,p,j,T);case or:var E=j._init;return y(p,m,x,E(j._payload),T)}if(as(j)||Un(j))return p=p.get(x)||null,d(m,p,j,T,null);ia(m,j)}return null}function v(p,m,x,j){for(var T=null,E=null,A=m,L=m=0,I=null;A!==null&&L<x.length;L++){A.index>L?(I=A,A=null):I=A.sibling;var S=h(p,A,x[L],j);if(S===null){A===null&&(A=I);break}e&&A&&S.alternate===null&&t(p,A),m=l(S,m,L),E===null?T=S:E.sibling=S,E=S,A=I}if(L===x.length)return r(p,A),me&&Ar(p,L),T;if(A===null){for(;L<x.length;L++)A=f(p,x[L],j),A!==null&&(m=l(A,m,L),E===null?T=A:E.sibling=A,E=A);return me&&Ar(p,L),T}for(A=n(p,A);L<x.length;L++)I=y(A,p,L,x[L],j),I!==null&&(e&&I.alternate!==null&&A.delete(I.key===null?L:I.key),m=l(I,m,L),E===null?T=I:E.sibling=I,E=I);return e&&A.forEach(function(F){return t(p,F)}),me&&Ar(p,L),T}function k(p,m,x,j){var T=Un(x);if(typeof T!="function")throw Error(O(150));if(x=T.call(x),x==null)throw Error(O(151));for(var E=T=null,A=m,L=m=0,I=null,S=x.next();A!==null&&!S.done;L++,S=x.next()){A.index>L?(I=A,A=null):I=A.sibling;var F=h(p,A,S.value,j);if(F===null){A===null&&(A=I);break}e&&A&&F.alternate===null&&t(p,A),m=l(F,m,L),E===null?T=F:E.sibling=F,E=F,A=I}if(S.done)return r(p,A),me&&Ar(p,L),T;if(A===null){for(;!S.done;L++,S=x.next())S=f(p,S.value,j),S!==null&&(m=l(S,m,L),E===null?T=S:E.sibling=S,E=S);return me&&Ar(p,L),T}for(A=n(p,A);!S.done;L++,S=x.next())S=y(A,p,L,S.value,j),S!==null&&(e&&S.alternate!==null&&A.delete(S.key===null?L:S.key),m=l(S,m,L),E===null?T=S:E.sibling=S,E=S);return e&&A.forEach(function(X){return t(p,X)}),me&&Ar(p,L),T}function b(p,m,x,j){if(typeof x=="object"&&x!==null&&x.type===nn&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case qs:e:{for(var T=x.key,E=m;E!==null;){if(E.key===T){if(T=x.type,T===nn){if(E.tag===7){r(p,E.sibling),m=s(E,x.props.children),m.return=p,p=m;break e}}else if(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===or&&Uu(T)===E.type){r(p,E.sibling),m=s(E,x.props),m.ref=Gn(p,E,x),m.return=p,p=m;break e}r(p,E);break}else t(p,E);E=E.sibling}x.type===nn?(m=Dr(x.props.children,p.mode,j,x.key),m.return=p,p=m):(j=Ca(x.type,x.key,x.props,null,p.mode,j),j.ref=Gn(p,m,x),j.return=p,p=j)}return i(p);case rn:e:{for(E=x.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){r(p,m.sibling),m=s(m,x.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else t(p,m);m=m.sibling}m=ci(x,p.mode,j),m.return=p,p=m}return i(p);case or:return E=x._init,b(p,m,E(x._payload),j)}if(as(x))return v(p,m,x,j);if(Un(x))return k(p,m,x,j);ia(p,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(r(p,m.sibling),m=s(m,x),m.return=p,p=m):(r(p,m),m=oi(x,p.mode,j),m.return=p,p=m),i(p)):r(p,m)}return b}var _n=rh(!0),nh=rh(!1),Qa=Cr(null),Ya=null,pn=null,Jo=null;function ec(){Jo=pn=Ya=null}function tc(e){var t=Qa.current;he(Qa),e._currentValue=t}function Ji(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function vn(e,t){Ya=e,Jo=pn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(tt=!0),e.firstContext=null)}function yt(e){var t=e._currentValue;if(Jo!==e)if(e={context:e,memoizedValue:t,next:null},pn===null){if(Ya===null)throw Error(O(308));pn=e,Ya.dependencies={lanes:0,firstContext:e}}else pn=pn.next=e;return t}var Rr=null;function rc(e){Rr===null?Rr=[e]:Rr.push(e)}function sh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,rc(t)):(r.next=s.next,s.next=r),t.interleaved=r,Jt(e,n)}function Jt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var cr=!1;function nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ah(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ie&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Jt(e,r)}return s=n.interleaved,s===null?(t.next=t,rc(n)):(t.next=s.next,s.next=t),n.interleaved=t,Jt(e,r)}function wa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Bo(e,r)}}function Bu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?s=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?s=l=t:l=l.next=t}else s=l=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ka(e,t,r,n){var s=e.updateQueue;cr=!1;var l=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,i===null?l=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(l!==null){var f=s.baseState;i=0,d=u=c=null,o=l;do{var h=o.lane,y=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,k=o;switch(h=t,y=r,k.tag){case 1:if(v=k.payload,typeof v=="function"){f=v.call(y,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=k.payload,h=typeof v=="function"?v.call(y,f,h):v,h==null)break e;f=ye({},f,h);break e;case 2:cr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[o]:h.push(o))}else y={eventTime:y,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=y,c=f):d=d.next=y,i|=h;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;h=o,o=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Br|=i,e.lanes=i,e.memoizedState=f}}function Hu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(O(191,s));s.call(n)}}}var Us={},Mt=Cr(Us),Ts=Cr(Us),Ps=Cr(Us);function Ir(e){if(e===Us)throw Error(O(174));return e}function sc(e,t){switch(de(Ps,t),de(Ts,e),de(Mt,Us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Li(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Li(t,e)}he(Mt),de(Mt,t)}function Cn(){he(Mt),he(Ts),he(Ps)}function lh(e){Ir(Ps.current);var t=Ir(Mt.current),r=Li(t,e.type);t!==r&&(de(Ts,e),de(Mt,r))}function ac(e){Ts.current===e&&(he(Mt),he(Ts))}var ge=Cr(0);function qa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ri=[];function lc(){for(var e=0;e<ri.length;e++)ri[e]._workInProgressVersionPrimary=null;ri.length=0}var ba=tr.ReactCurrentDispatcher,ni=tr.ReactCurrentBatchConfig,Ur=0,xe=null,Ee=null,Ae=null,Za=!1,hs=!1,As=0,Kg=0;function De(){throw Error(O(321))}function ic(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Tt(e[r],t[r]))return!1;return!0}function oc(e,t,r,n,s,l){if(Ur=l,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ba.current=e===null||e.memoizedState===null?Jg:e0,e=r(n,s),hs){l=0;do{if(hs=!1,As=0,25<=l)throw Error(O(301));l+=1,Ae=Ee=null,t.updateQueue=null,ba.current=t0,e=r(n,s)}while(hs)}if(ba.current=Xa,t=Ee!==null&&Ee.next!==null,Ur=0,Ae=Ee=xe=null,Za=!1,t)throw Error(O(300));return e}function cc(){var e=As!==0;return As=0,e}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?xe.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function vt(){if(Ee===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Ae===null?xe.memoizedState:Ae.next;if(t!==null)Ae=t,Ee=e;else{if(e===null)throw Error(O(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Ae===null?xe.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function $s(e,t){return typeof t=="function"?t(e):t}function si(e){var t=vt(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var n=Ee,s=n.baseQueue,l=r.pending;if(l!==null){if(s!==null){var i=s.next;s.next=l.next,l.next=i}n.baseQueue=s=l,r.pending=null}if(s!==null){l=s.next,n=n.baseState;var o=i=null,c=null,u=l;do{var d=u.lane;if((Ur&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,i=n):c=c.next=f,xe.lanes|=d,Br|=d}u=u.next}while(u!==null&&u!==l);c===null?i=n:c.next=o,Tt(n,t.memoizedState)||(tt=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do l=s.lane,xe.lanes|=l,Br|=l,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ai(e){var t=vt(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,l=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do l=e(l,i.action),i=i.next;while(i!==s);Tt(l,t.memoizedState)||(tt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function ih(){}function oh(e,t){var r=xe,n=vt(),s=t(),l=!Tt(n.memoizedState,s);if(l&&(n.memoizedState=s,tt=!0),n=n.queue,uc(dh.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||Ae!==null&&Ae.memoizedState.tag&1){if(r.flags|=2048,Ls(9,uh.bind(null,r,n,s,t),void 0,null),$e===null)throw Error(O(349));Ur&30||ch(r,t,s)}return s}function ch(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function uh(e,t,r,n){t.value=r,t.getSnapshot=n,ph(t)&&hh(e)}function dh(e,t,r){return r(function(){ph(t)&&hh(e)})}function ph(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Tt(e,r)}catch{return!0}}function hh(e){var t=Jt(e,1);t!==null&&Et(t,e,1,-1)}function Wu(e){var t=Rt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:e},t.queue=e,e=e.dispatch=Xg.bind(null,xe,e),[t.memoizedState,e]}function Ls(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function fh(){return vt().memoizedState}function ja(e,t,r,n){var s=Rt();xe.flags|=e,s.memoizedState=Ls(1|t,r,void 0,n===void 0?null:n)}function xl(e,t,r,n){var s=vt();n=n===void 0?null:n;var l=void 0;if(Ee!==null){var i=Ee.memoizedState;if(l=i.destroy,n!==null&&ic(n,i.deps)){s.memoizedState=Ls(t,r,l,n);return}}xe.flags|=e,s.memoizedState=Ls(1|t,r,l,n)}function Vu(e,t){return ja(8390656,8,e,t)}function uc(e,t){return xl(2048,8,e,t)}function mh(e,t){return xl(4,2,e,t)}function gh(e,t){return xl(4,4,e,t)}function xh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yh(e,t,r){return r=r!=null?r.concat([e]):null,xl(4,4,xh.bind(null,t,e),r)}function dc(){}function vh(e,t){var r=vt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ic(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function kh(e,t){var r=vt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ic(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function wh(e,t,r){return Ur&21?(Tt(r,t)||(r=_p(),xe.lanes|=r,Br|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,tt=!0),e.memoizedState=r)}function qg(e,t){var r=ue;ue=r!==0&&4>r?r:4,e(!0);var n=ni.transition;ni.transition={};try{e(!1),t()}finally{ue=r,ni.transition=n}}function bh(){return vt().memoizedState}function Zg(e,t,r){var n=wr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},jh(e))Nh(t,r);else if(r=sh(e,t,r,n),r!==null){var s=Qe();Et(r,e,n,s),Sh(r,t,n)}}function Xg(e,t,r){var n=wr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(jh(e))Nh(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,o=l(i,r);if(s.hasEagerState=!0,s.eagerState=o,Tt(o,i)){var c=t.interleaved;c===null?(s.next=s,rc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=sh(e,t,s,n),r!==null&&(s=Qe(),Et(r,e,n,s),Sh(r,t,n))}}function jh(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Nh(e,t){hs=Za=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Sh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Bo(e,r)}}var Xa={readContext:yt,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},Jg={readContext:yt,useCallback:function(e,t){return Rt().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:Vu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ja(4194308,4,xh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var r=Rt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Rt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Zg.bind(null,xe,e),[n.memoizedState,e]},useRef:function(e){var t=Rt();return e={current:e},t.memoizedState=e},useState:Wu,useDebugValue:dc,useDeferredValue:function(e){return Rt().memoizedState=e},useTransition:function(){var e=Wu(!1),t=e[0];return e=qg.bind(null,e[1]),Rt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=xe,s=Rt();if(me){if(r===void 0)throw Error(O(407));r=r()}else{if(r=t(),$e===null)throw Error(O(349));Ur&30||ch(n,t,r)}s.memoizedState=r;var l={value:r,getSnapshot:t};return s.queue=l,Vu(dh.bind(null,n,l,e),[e]),n.flags|=2048,Ls(9,uh.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=Rt(),t=$e.identifierPrefix;if(me){var r=Qt,n=Gt;r=(n&~(1<<32-Ct(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=As++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Kg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},e0={readContext:yt,useCallback:vh,useContext:yt,useEffect:uc,useImperativeHandle:yh,useInsertionEffect:mh,useLayoutEffect:gh,useMemo:kh,useReducer:si,useRef:fh,useState:function(){return si($s)},useDebugValue:dc,useDeferredValue:function(e){var t=vt();return wh(t,Ee.memoizedState,e)},useTransition:function(){var e=si($s)[0],t=vt().memoizedState;return[e,t]},useMutableSource:ih,useSyncExternalStore:oh,useId:bh,unstable_isNewReconciler:!1},t0={readContext:yt,useCallback:vh,useContext:yt,useEffect:uc,useImperativeHandle:yh,useInsertionEffect:mh,useLayoutEffect:gh,useMemo:kh,useReducer:ai,useRef:fh,useState:function(){return ai($s)},useDebugValue:dc,useDeferredValue:function(e){var t=vt();return Ee===null?t.memoizedState=e:wh(t,Ee.memoizedState,e)},useTransition:function(){var e=ai($s)[0],t=vt().memoizedState;return[e,t]},useMutableSource:ih,useSyncExternalStore:oh,useId:bh,unstable_isNewReconciler:!1};function jt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function eo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ye({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var yl={isMounted:function(e){return(e=e._reactInternals)?Gr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Qe(),s=wr(e),l=qt(n,s);l.payload=t,r!=null&&(l.callback=r),t=vr(e,l,s),t!==null&&(Et(t,e,s,n),wa(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Qe(),s=wr(e),l=qt(n,s);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=vr(e,l,s),t!==null&&(Et(t,e,s,n),wa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Qe(),n=wr(e),s=qt(r,n);s.tag=2,t!=null&&(s.callback=t),t=vr(e,s,n),t!==null&&(Et(t,e,n,r),wa(t,e,n))}};function Gu(e,t,r,n,s,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):t.prototype&&t.prototype.isPureReactComponent?!Ss(r,n)||!Ss(s,l):!0}function _h(e,t,r){var n=!1,s=Sr,l=t.contextType;return typeof l=="object"&&l!==null?l=yt(l):(s=nt(t)?zr:Be.current,n=t.contextTypes,l=(n=n!=null)?Nn(e,s):Sr),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Qu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&yl.enqueueReplaceState(t,t.state,null)}function to(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},nc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=yt(l):(l=nt(t)?zr:Be.current,s.context=Nn(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(eo(e,t,l,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yl.enqueueReplaceState(s,s.state,null),Ka(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function En(e,t){try{var r="",n=t;do r+=Tm(n),n=n.return;while(n);var s=r}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function li(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ro(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var r0=typeof WeakMap=="function"?WeakMap:Map;function Ch(e,t,r){r=qt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){el||(el=!0,ho=n),ro(e,t)},r}function Eh(e,t,r){r=qt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ro(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){ro(e,t),typeof n!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Yu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new r0;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=g0.bind(null,e,t,r),t.then(e,e))}function Ku(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=qt(-1,1),t.tag=2,vr(r,t,1))),r.lanes|=1),e)}var n0=tr.ReactCurrentOwner,tt=!1;function Ve(e,t,r,n){t.child=e===null?nh(t,null,r,n):_n(t,e.child,r,n)}function Zu(e,t,r,n,s){r=r.render;var l=t.ref;return vn(t,s),n=oc(e,t,r,n,l,s),r=cc(),e!==null&&!tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,er(e,t,s)):(me&&r&&qo(t),t.flags|=1,Ve(e,t,n,s),t.child)}function Xu(e,t,r,n,s){if(e===null){var l=r.type;return typeof l=="function"&&!vc(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,Th(e,t,l,n,s)):(e=Ca(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:Ss,r(i,n)&&e.ref===t.ref)return er(e,t,s)}return t.flags|=1,e=br(l,n),e.ref=t.ref,e.return=t,t.child=e}function Th(e,t,r,n,s){if(e!==null){var l=e.memoizedProps;if(Ss(l,n)&&e.ref===t.ref)if(tt=!1,t.pendingProps=n=l,(e.lanes&s)!==0)e.flags&131072&&(tt=!0);else return t.lanes=e.lanes,er(e,t,s)}return no(e,t,r,n,s)}function Ph(e,t,r){var n=t.pendingProps,s=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(fn,lt),lt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(fn,lt),lt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,de(fn,lt),lt|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,de(fn,lt),lt|=n;return Ve(e,t,s,r),t.child}function Ah(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function no(e,t,r,n,s){var l=nt(r)?zr:Be.current;return l=Nn(t,l),vn(t,s),r=oc(e,t,r,n,l,s),n=cc(),e!==null&&!tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,er(e,t,s)):(me&&n&&qo(t),t.flags|=1,Ve(e,t,r,s),t.child)}function Ju(e,t,r,n,s){if(nt(r)){var l=!0;Wa(t)}else l=!1;if(vn(t,s),t.stateNode===null)Na(e,t),_h(t,r,n),to(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=yt(u):(u=nt(r)?zr:Be.current,u=Nn(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Qu(t,i,n,u),cr=!1;var h=t.memoizedState;i.state=h,Ka(t,n,i,s),c=t.memoizedState,o!==n||h!==c||rt.current||cr?(typeof d=="function"&&(eo(t,r,d,n),c=t.memoizedState),(o=cr||Gu(t,r,o,n,h,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=u,n=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,ah(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:jt(t.type,o),i.props=u,f=t.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=yt(c):(c=nt(r)?zr:Be.current,c=Nn(t,c));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==f||h!==c)&&Qu(t,i,n,c),cr=!1,h=t.memoizedState,i.state=h,Ka(t,n,i,s);var v=t.memoizedState;o!==f||h!==v||rt.current||cr?(typeof y=="function"&&(eo(t,r,y,n),v=t.memoizedState),(u=cr||Gu(t,r,u,n,h,v,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),i.props=n,i.state=v,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return so(e,t,r,n,l,s)}function so(e,t,r,n,s,l){Ah(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&Du(t,r,!1),er(e,t,l);n=t.stateNode,n0.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=_n(t,e.child,null,l),t.child=_n(t,null,o,l)):Ve(e,t,o,l),t.memoizedState=n.state,s&&Du(t,r,!0),t.child}function $h(e){var t=e.stateNode;t.pendingContext?Mu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mu(e,t.context,!1),sc(e,t.containerInfo)}function ed(e,t,r,n,s){return Sn(),Xo(s),t.flags|=256,Ve(e,t,r,n),t.child}var ao={dehydrated:null,treeContext:null,retryLane:0};function lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lh(e,t,r){var n=t.pendingProps,s=ge.current,l=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),de(ge,s&1),e===null)return Xi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,l?(n=t.mode,l=t.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=wl(i,n,0,null),e=Dr(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=lo(r),t.memoizedState=ao,e):pc(t,i));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return s0(e,t,i,n,o,s,r);if(l){l=n.fallback,i=t.mode,s=e.child,o=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=br(s,c),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?l=br(o,l):(l=Dr(l,i,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,i=e.child.memoizedState,i=i===null?lo(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,t.memoizedState=ao,n}return l=e.child,e=l.sibling,n=br(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function pc(e,t){return t=wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function oa(e,t,r,n){return n!==null&&Xo(n),_n(t,e.child,null,r),e=pc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function s0(e,t,r,n,s,l,i){if(r)return t.flags&256?(t.flags&=-257,n=li(Error(O(422))),oa(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,s=t.mode,n=wl({mode:"visible",children:n.children},s,0,null),l=Dr(l,s,i,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&_n(t,e.child,null,i),t.child.memoizedState=lo(i),t.memoizedState=ao,l);if(!(t.mode&1))return oa(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(O(419)),n=li(l,n,void 0),oa(e,t,i,n)}if(o=(i&e.childLanes)!==0,tt||o){if(n=$e,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Jt(e,s),Et(n,e,s,-1))}return yc(),n=li(Error(O(421))),oa(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=x0.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,it=yr(s.nextSibling),ot=t,me=!0,St=null,e!==null&&(ft[mt++]=Gt,ft[mt++]=Qt,ft[mt++]=Fr,Gt=e.id,Qt=e.overflow,Fr=t),t=pc(t,n.children),t.flags|=4096,t)}function td(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ji(e.return,t,r)}function ii(e,t,r,n,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=s)}function Rh(e,t,r){var n=t.pendingProps,s=n.revealOrder,l=n.tail;if(Ve(e,t,n.children,r),n=ge.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&td(e,r,t);else if(e.tag===19)td(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(de(ge,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&qa(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ii(t,!1,s,r,l);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&qa(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ii(t,!0,r,null,l);break;case"together":ii(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Na(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function er(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,r=br(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=br(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function a0(e,t,r){switch(t.tag){case 3:$h(t),Sn();break;case 5:lh(t);break;case 1:nt(t.type)&&Wa(t);break;case 4:sc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;de(Qa,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(de(ge,ge.current&1),t.flags|=128,null):r&t.child.childLanes?Lh(e,t,r):(de(ge,ge.current&1),e=er(e,t,r),e!==null?e.sibling:null);de(ge,ge.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Rh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(ge,ge.current),n)break;return null;case 22:case 23:return t.lanes=0,Ph(e,t,r)}return er(e,t,r)}var Ih,io,Oh,Mh;Ih=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};io=function(){};Oh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ir(Mt.current);var l=null;switch(r){case"input":s=Ti(e,s),n=Ti(e,n),l=[];break;case"select":s=ye({},s,{value:void 0}),n=ye({},n,{value:void 0}),l=[];break;case"textarea":s=$i(e,s),n=$i(e,n),l=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ba)}Ri(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ys.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in n){var c=n[u];if(o=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ys.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&pe("scroll",e),l||o===c||(l=[])):(l=l||[]).push(u,c))}r&&(l=l||[]).push("style",r);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};Mh=function(e,t,r,n){r!==n&&(t.flags|=4)};function Qn(e,t){if(!me)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function l0(e,t,r){var n=t.pendingProps;switch(Zo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return nt(t.type)&&Ha(),ze(t),null;case 3:return n=t.stateNode,Cn(),he(rt),he(Be),lc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(la(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,St!==null&&(go(St),St=null))),io(e,t),ze(t),null;case 5:ac(t);var s=Ir(Ps.current);if(r=t.type,e!==null&&t.stateNode!=null)Oh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(O(166));return ze(t),null}if(e=Ir(Mt.current),la(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[It]=t,n[Es]=l,e=(t.mode&1)!==0,r){case"dialog":pe("cancel",n),pe("close",n);break;case"iframe":case"object":case"embed":pe("load",n);break;case"video":case"audio":for(s=0;s<is.length;s++)pe(is[s],n);break;case"source":pe("error",n);break;case"img":case"image":case"link":pe("error",n),pe("load",n);break;case"details":pe("toggle",n);break;case"input":uu(n,l),pe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},pe("invalid",n);break;case"textarea":pu(n,l),pe("invalid",n)}Ri(r,l),s=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&aa(n.textContent,o,e),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&aa(n.textContent,o,e),s=["children",""+o]):ys.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&pe("scroll",n)}switch(r){case"input":Zs(n),du(n,l,!0);break;case"textarea":Zs(n),hu(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=Ba)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[It]=t,e[Es]=n,Ih(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ii(r,n),r){case"dialog":pe("cancel",e),pe("close",e),s=n;break;case"iframe":case"object":case"embed":pe("load",e),s=n;break;case"video":case"audio":for(s=0;s<is.length;s++)pe(is[s],e);s=n;break;case"source":pe("error",e),s=n;break;case"img":case"image":case"link":pe("error",e),pe("load",e),s=n;break;case"details":pe("toggle",e),s=n;break;case"input":uu(e,n),s=Ti(e,n),pe("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ye({},n,{value:void 0}),pe("invalid",e);break;case"textarea":pu(e,n),s=$i(e,n),pe("invalid",e);break;default:s=n}Ri(r,s),o=s;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?fp(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&pp(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&vs(e,c):typeof c=="number"&&vs(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ys.hasOwnProperty(l)?c!=null&&l==="onScroll"&&pe("scroll",e):c!=null&&Oo(e,l,c,i))}switch(r){case"input":Zs(e),du(e,n,!1);break;case"textarea":Zs(e),hu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Nr(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?mn(e,!!n.multiple,l,!1):n.defaultValue!=null&&mn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ba)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ze(t),null;case 6:if(e&&t.stateNode!=null)Mh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(O(166));if(r=Ir(Ps.current),Ir(Mt.current),la(t)){if(n=t.stateNode,r=t.memoizedProps,n[It]=t,(l=n.nodeValue!==r)&&(e=ot,e!==null))switch(e.tag){case 3:aa(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&aa(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[It]=t,t.stateNode=n}return ze(t),null;case 13:if(he(ge),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(me&&it!==null&&t.mode&1&&!(t.flags&128))th(),Sn(),t.flags|=98560,l=!1;else if(l=la(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(O(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(O(317));l[It]=t}else Sn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ze(t),l=!1}else St!==null&&(go(St),St=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ge.current&1?Te===0&&(Te=3):yc())),t.updateQueue!==null&&(t.flags|=4),ze(t),null);case 4:return Cn(),io(e,t),e===null&&_s(t.stateNode.containerInfo),ze(t),null;case 10:return tc(t.type._context),ze(t),null;case 17:return nt(t.type)&&Ha(),ze(t),null;case 19:if(he(ge),l=t.memoizedState,l===null)return ze(t),null;if(n=(t.flags&128)!==0,i=l.rendering,i===null)if(n)Qn(l,!1);else{if(Te!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=qa(e),i!==null){for(t.flags|=128,Qn(l,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return de(ge,ge.current&1|2),t.child}e=e.sibling}l.tail!==null&&be()>Tn&&(t.flags|=128,n=!0,Qn(l,!1),t.lanes=4194304)}else{if(!n)if(e=qa(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Qn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!me)return ze(t),null}else 2*be()-l.renderingStartTime>Tn&&r!==1073741824&&(t.flags|=128,n=!0,Qn(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(r=l.last,r!==null?r.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=be(),t.sibling=null,r=ge.current,de(ge,n?r&1|2:r&1),t):(ze(t),null);case 22:case 23:return xc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?lt&1073741824&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function i0(e,t){switch(Zo(t),t.tag){case 1:return nt(t.type)&&Ha(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(),he(rt),he(Be),lc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ac(t),null;case 13:if(he(ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));Sn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(ge),null;case 4:return Cn(),null;case 10:return tc(t.type._context),null;case 22:case 23:return xc(),null;case 24:return null;default:return null}}var ca=!1,Fe=!1,o0=typeof WeakSet=="function"?WeakSet:Set,G=null;function hn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ke(e,t,n)}else r.current=null}function oo(e,t,r){try{r()}catch(n){ke(e,t,n)}}var rd=!1;function c0(e,t){if(Vi=za,e=Bp(),Ko(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var y;f!==r||s!==0&&f.nodeType!==3||(o=i+s),f!==l||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(y=f.firstChild)!==null;)h=f,f=y;for(;;){if(f===e)break t;if(h===r&&++u===s&&(o=i),h===l&&++d===n&&(c=i),(y=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=y}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Gi={focusedElem:e,selectionRange:r},za=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var k=v.memoizedProps,b=v.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?k:jt(t.type,k),b);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(j){ke(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return v=rd,rd=!1,v}function fs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&oo(t,r,l)}s=s.next}while(s!==n)}}function vl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function co(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Dh(e){var t=e.alternate;t!==null&&(e.alternate=null,Dh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[It],delete t[Es],delete t[Ki],delete t[Vg],delete t[Gg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zh(e){return e.tag===5||e.tag===3||e.tag===4}function nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ba));else if(n!==4&&(e=e.child,e!==null))for(uo(e,t,r),e=e.sibling;e!==null;)uo(e,t,r),e=e.sibling}function po(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(po(e,t,r),e=e.sibling;e!==null;)po(e,t,r),e=e.sibling}var Le=null,Nt=!1;function lr(e,t,r){for(r=r.child;r!==null;)Fh(e,t,r),r=r.sibling}function Fh(e,t,r){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(dl,r)}catch{}switch(r.tag){case 5:Fe||hn(r,t);case 6:var n=Le,s=Nt;Le=null,lr(e,t,r),Le=n,Nt=s,Le!==null&&(Nt?(e=Le,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Le.removeChild(r.stateNode));break;case 18:Le!==null&&(Nt?(e=Le,r=r.stateNode,e.nodeType===8?ei(e.parentNode,r):e.nodeType===1&&ei(e,r),js(e)):ei(Le,r.stateNode));break;case 4:n=Le,s=Nt,Le=r.stateNode.containerInfo,Nt=!0,lr(e,t,r),Le=n,Nt=s;break;case 0:case 11:case 14:case 15:if(!Fe&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var l=s,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&oo(r,t,i),s=s.next}while(s!==n)}lr(e,t,r);break;case 1:if(!Fe&&(hn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ke(r,t,o)}lr(e,t,r);break;case 21:lr(e,t,r);break;case 22:r.mode&1?(Fe=(n=Fe)||r.memoizedState!==null,lr(e,t,r),Fe=n):lr(e,t,r);break;default:lr(e,t,r)}}function sd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new o0),t.forEach(function(n){var s=y0.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function wt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var l=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:Le=o.stateNode,Nt=!1;break e;case 3:Le=o.stateNode.containerInfo,Nt=!0;break e;case 4:Le=o.stateNode.containerInfo,Nt=!0;break e}o=o.return}if(Le===null)throw Error(O(160));Fh(l,i,s),Le=null,Nt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ke(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Uh(t,e),t=t.sibling}function Uh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wt(t,e),$t(e),n&4){try{fs(3,e,e.return),vl(3,e)}catch(k){ke(e,e.return,k)}try{fs(5,e,e.return)}catch(k){ke(e,e.return,k)}}break;case 1:wt(t,e),$t(e),n&512&&r!==null&&hn(r,r.return);break;case 5:if(wt(t,e),$t(e),n&512&&r!==null&&hn(r,r.return),e.flags&32){var s=e.stateNode;try{vs(s,"")}catch(k){ke(e,e.return,k)}}if(n&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&cp(s,l),Ii(o,i);var u=Ii(o,l);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?fp(s,f):d==="dangerouslySetInnerHTML"?pp(s,f):d==="children"?vs(s,f):Oo(s,d,f,u)}switch(o){case"input":Pi(s,l);break;case"textarea":up(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?mn(s,!!l.multiple,y,!1):h!==!!l.multiple&&(l.defaultValue!=null?mn(s,!!l.multiple,l.defaultValue,!0):mn(s,!!l.multiple,l.multiple?[]:"",!1))}s[Es]=l}catch(k){ke(e,e.return,k)}}break;case 6:if(wt(t,e),$t(e),n&4){if(e.stateNode===null)throw Error(O(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(k){ke(e,e.return,k)}}break;case 3:if(wt(t,e),$t(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{js(t.containerInfo)}catch(k){ke(e,e.return,k)}break;case 4:wt(t,e),$t(e);break;case 13:wt(t,e),$t(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(mc=be())),n&4&&sd(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Fe=(u=Fe)||d,wt(t,e),Fe=u):wt(t,e),$t(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(G=e,d=e.child;d!==null;){for(f=G=d;G!==null;){switch(h=G,y=h.child,h.tag){case 0:case 11:case 14:case 15:fs(4,h,h.return);break;case 1:hn(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(k){ke(n,r,k)}}break;case 5:hn(h,h.return);break;case 22:if(h.memoizedState!==null){ld(f);continue}}y!==null?(y.return=h,G=y):ld(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=hp("display",i))}catch(k){ke(e,e.return,k)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(k){ke(e,e.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:wt(t,e),$t(e),n&4&&sd(e);break;case 21:break;default:wt(t,e),$t(e)}}function $t(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(zh(r)){var n=r;break e}r=r.return}throw Error(O(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(vs(s,""),n.flags&=-33);var l=nd(e);po(e,l,s);break;case 3:case 4:var i=n.stateNode.containerInfo,o=nd(e);uo(e,o,i);break;default:throw Error(O(161))}}catch(c){ke(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function u0(e,t,r){G=e,Bh(e)}function Bh(e,t,r){for(var n=(e.mode&1)!==0;G!==null;){var s=G,l=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||ca;if(!i){var o=s.alternate,c=o!==null&&o.memoizedState!==null||Fe;o=ca;var u=Fe;if(ca=i,(Fe=c)&&!u)for(G=s;G!==null;)i=G,c=i.child,i.tag===22&&i.memoizedState!==null?id(s):c!==null?(c.return=i,G=c):id(s);for(;l!==null;)G=l,Bh(l),l=l.sibling;G=s,ca=o,Fe=u}ad(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,G=l):ad(e)}}function ad(e){for(;G!==null;){var t=G;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fe||vl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Fe)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:jt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Hu(t,l,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Hu(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&js(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Fe||t.flags&512&&co(t)}catch(h){ke(t,t.return,h)}}if(t===e){G=null;break}if(r=t.sibling,r!==null){r.return=t.return,G=r;break}G=t.return}}function ld(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var r=t.sibling;if(r!==null){r.return=t.return,G=r;break}G=t.return}}function id(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vl(4,t)}catch(c){ke(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ke(t,s,c)}}var l=t.return;try{co(t)}catch(c){ke(t,l,c)}break;case 5:var i=t.return;try{co(t)}catch(c){ke(t,i,c)}}}catch(c){ke(t,t.return,c)}if(t===e){G=null;break}var o=t.sibling;if(o!==null){o.return=t.return,G=o;break}G=t.return}}var d0=Math.ceil,Ja=tr.ReactCurrentDispatcher,hc=tr.ReactCurrentOwner,xt=tr.ReactCurrentBatchConfig,ie=0,$e=null,Se=null,Re=0,lt=0,fn=Cr(0),Te=0,Rs=null,Br=0,kl=0,fc=0,ms=null,et=null,mc=0,Tn=1/0,Ht=null,el=!1,ho=null,kr=null,ua=!1,hr=null,tl=0,gs=0,fo=null,Sa=-1,_a=0;function Qe(){return ie&6?be():Sa!==-1?Sa:Sa=be()}function wr(e){return e.mode&1?ie&2&&Re!==0?Re&-Re:Yg.transition!==null?(_a===0&&(_a=_p()),_a):(e=ue,e!==0||(e=window.event,e=e===void 0?16:Lp(e.type)),e):1}function Et(e,t,r,n){if(50<gs)throw gs=0,fo=null,Error(O(185));Ds(e,r,n),(!(ie&2)||e!==$e)&&(e===$e&&(!(ie&2)&&(kl|=r),Te===4&&dr(e,Re)),st(e,n),r===1&&ie===0&&!(t.mode&1)&&(Tn=be()+500,gl&&Er()))}function st(e,t){var r=e.callbackNode;Ym(e,t);var n=Da(e,e===$e?Re:0);if(n===0)r!==null&&gu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&gu(r),t===1)e.tag===0?Qg(od.bind(null,e)):Xp(od.bind(null,e)),Hg(function(){!(ie&6)&&Er()}),r=null;else{switch(Cp(n)){case 1:r=Uo;break;case 4:r=Np;break;case 16:r=Ma;break;case 536870912:r=Sp;break;default:r=Ma}r=qh(r,Hh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Hh(e,t){if(Sa=-1,_a=0,ie&6)throw Error(O(327));var r=e.callbackNode;if(kn()&&e.callbackNode!==r)return null;var n=Da(e,e===$e?Re:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=rl(e,n);else{t=n;var s=ie;ie|=2;var l=Vh();($e!==e||Re!==t)&&(Ht=null,Tn=be()+500,Mr(e,t));do try{f0();break}catch(o){Wh(e,o)}while(!0);ec(),Ja.current=l,ie=s,Se!==null?t=0:($e=null,Re=0,t=Te)}if(t!==0){if(t===2&&(s=Fi(e),s!==0&&(n=s,t=mo(e,s))),t===1)throw r=Rs,Mr(e,0),dr(e,n),st(e,be()),r;if(t===6)dr(e,n);else{if(s=e.current.alternate,!(n&30)&&!p0(s)&&(t=rl(e,n),t===2&&(l=Fi(e),l!==0&&(n=l,t=mo(e,l))),t===1))throw r=Rs,Mr(e,0),dr(e,n),st(e,be()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(O(345));case 2:$r(e,et,Ht);break;case 3:if(dr(e,n),(n&130023424)===n&&(t=mc+500-be(),10<t)){if(Da(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Qe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Yi($r.bind(null,e,et,Ht),t);break}$r(e,et,Ht);break;case 4:if(dr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-Ct(n);l=1<<i,i=t[i],i>s&&(s=i),n&=~l}if(n=s,n=be()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*d0(n/1960))-n,10<n){e.timeoutHandle=Yi($r.bind(null,e,et,Ht),n);break}$r(e,et,Ht);break;case 5:$r(e,et,Ht);break;default:throw Error(O(329))}}}return st(e,be()),e.callbackNode===r?Hh.bind(null,e):null}function mo(e,t){var r=ms;return e.current.memoizedState.isDehydrated&&(Mr(e,t).flags|=256),e=rl(e,t),e!==2&&(t=et,et=r,t!==null&&go(t)),e}function go(e){et===null?et=e:et.push.apply(et,e)}function p0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],l=s.getSnapshot;s=s.value;try{if(!Tt(l(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dr(e,t){for(t&=~fc,t&=~kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ct(t),n=1<<r;e[r]=-1,t&=~n}}function od(e){if(ie&6)throw Error(O(327));kn();var t=Da(e,0);if(!(t&1))return st(e,be()),null;var r=rl(e,t);if(e.tag!==0&&r===2){var n=Fi(e);n!==0&&(t=n,r=mo(e,n))}if(r===1)throw r=Rs,Mr(e,0),dr(e,t),st(e,be()),r;if(r===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,et,Ht),st(e,be()),null}function gc(e,t){var r=ie;ie|=1;try{return e(t)}finally{ie=r,ie===0&&(Tn=be()+500,gl&&Er())}}function Hr(e){hr!==null&&hr.tag===0&&!(ie&6)&&kn();var t=ie;ie|=1;var r=xt.transition,n=ue;try{if(xt.transition=null,ue=1,e)return e()}finally{ue=n,xt.transition=r,ie=t,!(ie&6)&&Er()}}function xc(){lt=fn.current,he(fn)}function Mr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Bg(r)),Se!==null)for(r=Se.return;r!==null;){var n=r;switch(Zo(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ha();break;case 3:Cn(),he(rt),he(Be),lc();break;case 5:ac(n);break;case 4:Cn();break;case 13:he(ge);break;case 19:he(ge);break;case 10:tc(n.type._context);break;case 22:case 23:xc()}r=r.return}if($e=e,Se=e=br(e.current,null),Re=lt=t,Te=0,Rs=null,fc=kl=Br=0,et=ms=null,Rr!==null){for(t=0;t<Rr.length;t++)if(r=Rr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=s,n.next=i}r.pending=n}Rr=null}return e}function Wh(e,t){do{var r=Se;try{if(ec(),ba.current=Xa,Za){for(var n=xe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Za=!1}if(Ur=0,Ae=Ee=xe=null,hs=!1,As=0,hc.current=null,r===null||r.return===null){Te=1,Rs=t,Se=null;break}e:{var l=e,i=r.return,o=r,c=t;if(t=Re,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Ku(i);if(y!==null){y.flags&=-257,qu(y,i,o,l,t),y.mode&1&&Yu(l,u,t),t=y,c=u;var v=t.updateQueue;if(v===null){var k=new Set;k.add(c),t.updateQueue=k}else v.add(c);break e}else{if(!(t&1)){Yu(l,u,t),yc();break e}c=Error(O(426))}}else if(me&&o.mode&1){var b=Ku(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),qu(b,i,o,l,t),Xo(En(c,o));break e}}l=c=En(c,o),Te!==4&&(Te=2),ms===null?ms=[l]:ms.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var p=Ch(l,c,t);Bu(l,p);break e;case 1:o=c;var m=l.type,x=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(kr===null||!kr.has(x)))){l.flags|=65536,t&=-t,l.lanes|=t;var j=Eh(l,o,t);Bu(l,j);break e}}l=l.return}while(l!==null)}Qh(r)}catch(T){t=T,Se===r&&r!==null&&(Se=r=r.return);continue}break}while(!0)}function Vh(){var e=Ja.current;return Ja.current=Xa,e===null?Xa:e}function yc(){(Te===0||Te===3||Te===2)&&(Te=4),$e===null||!(Br&268435455)&&!(kl&268435455)||dr($e,Re)}function rl(e,t){var r=ie;ie|=2;var n=Vh();($e!==e||Re!==t)&&(Ht=null,Mr(e,t));do try{h0();break}catch(s){Wh(e,s)}while(!0);if(ec(),ie=r,Ja.current=n,Se!==null)throw Error(O(261));return $e=null,Re=0,Te}function h0(){for(;Se!==null;)Gh(Se)}function f0(){for(;Se!==null&&!zm();)Gh(Se)}function Gh(e){var t=Kh(e.alternate,e,lt);e.memoizedProps=e.pendingProps,t===null?Qh(e):Se=t,hc.current=null}function Qh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=i0(r,t),r!==null){r.flags&=32767,Se=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Te=6,Se=null;return}}else if(r=l0(r,t,lt),r!==null){Se=r;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Te===0&&(Te=5)}function $r(e,t,r){var n=ue,s=xt.transition;try{xt.transition=null,ue=1,m0(e,t,r,n)}finally{xt.transition=s,ue=n}return null}function m0(e,t,r,n){do kn();while(hr!==null);if(ie&6)throw Error(O(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(Km(e,l),e===$e&&(Se=$e=null,Re=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ua||(ua=!0,qh(Ma,function(){return kn(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=xt.transition,xt.transition=null;var i=ue;ue=1;var o=ie;ie|=4,hc.current=null,c0(e,r),Uh(r,e),Ig(Gi),za=!!Vi,Gi=Vi=null,e.current=r,u0(r),Fm(),ie=o,ue=i,xt.transition=l}else e.current=r;if(ua&&(ua=!1,hr=e,tl=s),l=e.pendingLanes,l===0&&(kr=null),Hm(r.stateNode),st(e,be()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(el)throw el=!1,e=ho,ho=null,e;return tl&1&&e.tag!==0&&kn(),l=e.pendingLanes,l&1?e===fo?gs++:(gs=0,fo=e):gs=0,Er(),null}function kn(){if(hr!==null){var e=Cp(tl),t=xt.transition,r=ue;try{if(xt.transition=null,ue=16>e?16:e,hr===null)var n=!1;else{if(e=hr,hr=null,tl=0,ie&6)throw Error(O(331));var s=ie;for(ie|=4,G=e.current;G!==null;){var l=G,i=l.child;if(G.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:fs(8,d,l)}var f=d.child;if(f!==null)f.return=d,G=f;else for(;G!==null;){d=G;var h=d.sibling,y=d.return;if(Dh(d),d===u){G=null;break}if(h!==null){h.return=y,G=h;break}G=y}}}var v=l.alternate;if(v!==null){var k=v.child;if(k!==null){v.child=null;do{var b=k.sibling;k.sibling=null,k=b}while(k!==null)}}G=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,G=i;else e:for(;G!==null;){if(l=G,l.flags&2048)switch(l.tag){case 0:case 11:case 15:fs(9,l,l.return)}var p=l.sibling;if(p!==null){p.return=l.return,G=p;break e}G=l.return}}var m=e.current;for(G=m;G!==null;){i=G;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,G=x;else e:for(i=m;G!==null;){if(o=G,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:vl(9,o)}}catch(T){ke(o,o.return,T)}if(o===i){G=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,G=j;break e}G=o.return}}if(ie=s,Er(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(dl,e)}catch{}n=!0}return n}finally{ue=r,xt.transition=t}}return!1}function cd(e,t,r){t=En(r,t),t=Ch(e,t,1),e=vr(e,t,1),t=Qe(),e!==null&&(Ds(e,1,t),st(e,t))}function ke(e,t,r){if(e.tag===3)cd(e,e,r);else for(;t!==null;){if(t.tag===3){cd(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(kr===null||!kr.has(n))){e=En(r,e),e=Eh(t,e,1),t=vr(t,e,1),e=Qe(),t!==null&&(Ds(t,1,e),st(t,e));break}}t=t.return}}function g0(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Qe(),e.pingedLanes|=e.suspendedLanes&r,$e===e&&(Re&r)===r&&(Te===4||Te===3&&(Re&130023424)===Re&&500>be()-mc?Mr(e,0):fc|=r),st(e,t)}function Yh(e,t){t===0&&(e.mode&1?(t=ea,ea<<=1,!(ea&130023424)&&(ea=4194304)):t=1);var r=Qe();e=Jt(e,t),e!==null&&(Ds(e,t,r),st(e,r))}function x0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Yh(e,r)}function y0(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(O(314))}n!==null&&n.delete(t),Yh(e,r)}var Kh;Kh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||rt.current)tt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return tt=!1,a0(e,t,r);tt=!!(e.flags&131072)}else tt=!1,me&&t.flags&1048576&&Jp(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Na(e,t),e=t.pendingProps;var s=Nn(t,Be.current);vn(t,r),s=oc(null,t,n,e,s,r);var l=cc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(n)?(l=!0,Wa(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,nc(t),s.updater=yl,t.stateNode=s,s._reactInternals=t,to(t,n,e,r),t=so(null,t,n,!0,l,r)):(t.tag=0,me&&l&&qo(t),Ve(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Na(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=k0(n),e=jt(n,e),s){case 0:t=no(null,t,n,e,r);break e;case 1:t=Ju(null,t,n,e,r);break e;case 11:t=Zu(null,t,n,e,r);break e;case 14:t=Xu(null,t,n,jt(n.type,e),r);break e}throw Error(O(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:jt(n,s),no(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:jt(n,s),Ju(e,t,n,s,r);case 3:e:{if($h(t),e===null)throw Error(O(387));n=t.pendingProps,l=t.memoizedState,s=l.element,ah(e,t),Ka(t,n,null,r);var i=t.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=En(Error(O(423)),t),t=ed(e,t,n,r,s);break e}else if(n!==s){s=En(Error(O(424)),t),t=ed(e,t,n,r,s);break e}else for(it=yr(t.stateNode.containerInfo.firstChild),ot=t,me=!0,St=null,r=nh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Sn(),n===s){t=er(e,t,r);break e}Ve(e,t,n,r)}t=t.child}return t;case 5:return lh(t),e===null&&Xi(t),n=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,i=s.children,Qi(n,s)?i=null:l!==null&&Qi(n,l)&&(t.flags|=32),Ah(e,t),Ve(e,t,i,r),t.child;case 6:return e===null&&Xi(t),null;case 13:return Lh(e,t,r);case 4:return sc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=_n(t,null,n,r):Ve(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:jt(n,s),Zu(e,t,n,s,r);case 7:return Ve(e,t,t.pendingProps,r),t.child;case 8:return Ve(e,t,t.pendingProps.children,r),t.child;case 12:return Ve(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,l=t.memoizedProps,i=s.value,de(Qa,n._currentValue),n._currentValue=i,l!==null)if(Tt(l.value,i)){if(l.children===s.children&&!rt.current){t=er(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=qt(-1,r&-r),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),Ji(l.return,r,t),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(O(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Ji(i,r,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Ve(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,vn(t,r),s=yt(s),n=n(s),t.flags|=1,Ve(e,t,n,r),t.child;case 14:return n=t.type,s=jt(n,t.pendingProps),s=jt(n.type,s),Xu(e,t,n,s,r);case 15:return Th(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:jt(n,s),Na(e,t),t.tag=1,nt(n)?(e=!0,Wa(t)):e=!1,vn(t,r),_h(t,n,s),to(t,n,s,r),so(null,t,n,!0,e,r);case 19:return Rh(e,t,r);case 22:return Ph(e,t,r)}throw Error(O(156,t.tag))};function qh(e,t){return jp(e,t)}function v0(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,r,n){return new v0(e,t,r,n)}function vc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function k0(e){if(typeof e=="function")return vc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Do)return 11;if(e===zo)return 14}return 2}function br(e,t){var r=e.alternate;return r===null?(r=gt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ca(e,t,r,n,s,l){var i=2;if(n=e,typeof e=="function")vc(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case nn:return Dr(r.children,s,l,t);case Mo:i=8,s|=8;break;case Si:return e=gt(12,r,t,s|2),e.elementType=Si,e.lanes=l,e;case _i:return e=gt(13,r,t,s),e.elementType=_i,e.lanes=l,e;case Ci:return e=gt(19,r,t,s),e.elementType=Ci,e.lanes=l,e;case lp:return wl(r,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sp:i=10;break e;case ap:i=9;break e;case Do:i=11;break e;case zo:i=14;break e;case or:i=16,n=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=gt(i,r,t,s),t.elementType=e,t.type=n,t.lanes=l,t}function Dr(e,t,r,n){return e=gt(7,e,n,t),e.lanes=r,e}function wl(e,t,r,n){return e=gt(22,e,n,t),e.elementType=lp,e.lanes=r,e.stateNode={isHidden:!1},e}function oi(e,t,r){return e=gt(6,e,null,t),e.lanes=r,e}function ci(e,t,r){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function w0(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kc(e,t,r,n,s,l,i,o,c){return e=new w0(e,t,r,o,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=gt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nc(l),e}function b0(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Zh(e){if(!e)return Sr;e=e._reactInternals;e:{if(Gr(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var r=e.type;if(nt(r))return Zp(e,r,t)}return t}function Xh(e,t,r,n,s,l,i,o,c){return e=kc(r,n,!0,e,s,l,i,o,c),e.context=Zh(null),r=e.current,n=Qe(),s=wr(r),l=qt(n,s),l.callback=t??null,vr(r,l,s),e.current.lanes=s,Ds(e,s,n),st(e,n),e}function bl(e,t,r,n){var s=t.current,l=Qe(),i=wr(s);return r=Zh(r),t.context===null?t.context=r:t.pendingContext=r,t=qt(l,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=vr(s,t,i),e!==null&&(Et(e,s,i,l),wa(e,s,i)),i}function nl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ud(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function wc(e,t){ud(e,t),(e=e.alternate)&&ud(e,t)}function j0(){return null}var Jh=typeof reportError=="function"?reportError:function(e){console.error(e)};function bc(e){this._internalRoot=e}jl.prototype.render=bc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));bl(e,t,null,null)};jl.prototype.unmount=bc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hr(function(){bl(null,e,null,null)}),t[Xt]=null}};function jl(e){this._internalRoot=e}jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ur.length&&t!==0&&t<ur[r].priority;r++);ur.splice(r,0,e),r===0&&$p(e)}};function jc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dd(){}function N0(e,t,r,n,s){if(s){if(typeof n=="function"){var l=n;n=function(){var u=nl(i);l.call(u)}}var i=Xh(t,n,e,0,null,!1,!1,"",dd);return e._reactRootContainer=i,e[Xt]=i.current,_s(e.nodeType===8?e.parentNode:e),Hr(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var u=nl(c);o.call(u)}}var c=kc(e,0,!1,null,null,!1,!1,"",dd);return e._reactRootContainer=c,e[Xt]=c.current,_s(e.nodeType===8?e.parentNode:e),Hr(function(){bl(t,c,r,n)}),c}function Sl(e,t,r,n,s){var l=r._reactRootContainer;if(l){var i=l;if(typeof s=="function"){var o=s;s=function(){var c=nl(i);o.call(c)}}bl(t,i,e,s)}else i=N0(r,t,e,s,n);return nl(i)}Ep=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ls(t.pendingLanes);r!==0&&(Bo(t,r|1),st(t,be()),!(ie&6)&&(Tn=be()+500,Er()))}break;case 13:Hr(function(){var n=Jt(e,1);if(n!==null){var s=Qe();Et(n,e,1,s)}}),wc(e,1)}};Ho=function(e){if(e.tag===13){var t=Jt(e,134217728);if(t!==null){var r=Qe();Et(t,e,134217728,r)}wc(e,134217728)}};Tp=function(e){if(e.tag===13){var t=wr(e),r=Jt(e,t);if(r!==null){var n=Qe();Et(r,e,t,n)}wc(e,t)}};Pp=function(){return ue};Ap=function(e,t){var r=ue;try{return ue=e,t()}finally{ue=r}};Mi=function(e,t,r){switch(t){case"input":if(Pi(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ml(n);if(!s)throw Error(O(90));op(n),Pi(n,s)}}}break;case"textarea":up(e,r);break;case"select":t=r.value,t!=null&&mn(e,!!r.multiple,t,!1)}};xp=gc;yp=Hr;var S0={usingClientEntryPoint:!1,Events:[Fs,on,ml,mp,gp,gc]},Yn={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_0={bundleType:Yn.bundleType,version:Yn.version,rendererPackageName:Yn.rendererPackageName,rendererConfig:Yn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wp(e),e===null?null:e.stateNode},findFiberByHostInstance:Yn.findFiberByHostInstance||j0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{dl=da.inject(_0),Ot=da}catch{}}ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S0;ut.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jc(t))throw Error(O(200));return b0(e,t,null,r)};ut.createRoot=function(e,t){if(!jc(e))throw Error(O(299));var r=!1,n="",s=Jh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=kc(e,1,!1,null,null,r,!1,n,s),e[Xt]=t.current,_s(e.nodeType===8?e.parentNode:e),new bc(t)};ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=wp(t),e=e===null?null:e.stateNode,e};ut.flushSync=function(e){return Hr(e)};ut.hydrate=function(e,t,r){if(!Nl(t))throw Error(O(200));return Sl(null,e,t,!0,r)};ut.hydrateRoot=function(e,t,r){if(!jc(e))throw Error(O(405));var n=r!=null&&r.hydratedSources||null,s=!1,l="",i=Jh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Xh(t,null,e,1,r??null,s,!1,l,i),e[Xt]=t.current,_s(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new jl(t)};ut.render=function(e,t,r){if(!Nl(t))throw Error(O(200));return Sl(null,e,t,!1,r)};ut.unmountComponentAtNode=function(e){if(!Nl(e))throw Error(O(40));return e._reactRootContainer?(Hr(function(){Sl(null,null,e,!1,function(){e._reactRootContainer=null,e[Xt]=null})}),!0):!1};ut.unstable_batchedUpdates=gc;ut.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Nl(r))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return Sl(e,t,r,!1,n)};ut.version="18.3.1-next-f1338f8080-20240426";function ef(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ef)}catch(e){console.error(e)}}ef(),ep.exports=ut;var C0=ep.exports,tf,pd=C0;tf=pd.createRoot,pd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Is(){return Is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Is.apply(this,arguments)}var fr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fr||(fr={}));const hd="popstate";function E0(e){e===void 0&&(e={});function t(n,s){let{pathname:l,search:i,hash:o}=n.location;return xo("",{pathname:l,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:sl(s)}return P0(t,r,null,e)}function je(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function rf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function T0(){return Math.random().toString(36).substr(2,8)}function fd(e,t){return{usr:e.state,key:e.key,idx:t}}function xo(e,t,r,n){return r===void 0&&(r=null),Is({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ln(t):t,{state:r,key:t&&t.key||n||T0()})}function sl(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ln(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function P0(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:l=!1}=n,i=s.history,o=fr.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(Is({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){o=fr.Pop;let b=d(),p=b==null?null:b-u;u=b,c&&c({action:o,location:k.location,delta:p})}function h(b,p){o=fr.Push;let m=xo(k.location,b,p);u=d()+1;let x=fd(m,u),j=k.createHref(m);try{i.pushState(x,"",j)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(j)}l&&c&&c({action:o,location:k.location,delta:1})}function y(b,p){o=fr.Replace;let m=xo(k.location,b,p);u=d();let x=fd(m,u),j=k.createHref(m);i.replaceState(x,"",j),l&&c&&c({action:o,location:k.location,delta:0})}function v(b){let p=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:sl(b);return m=m.replace(/ $/,"%20"),je(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let k={get action(){return o},get location(){return e(s,i)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(hd,f),c=b,()=>{s.removeEventListener(hd,f),c=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let p=v(b);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:y,go(b){return i.go(b)}};return k}var md;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(md||(md={}));function A0(e,t,r){return r===void 0&&(r="/"),$0(e,t,r)}function $0(e,t,r,n){let s=typeof t=="string"?Ln(t):t,l=Nc(s.pathname||"/",r);if(l==null)return null;let i=nf(e);L0(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let u=V0(l);o=B0(i[c],u)}return o}function nf(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(je(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=jr([n,c.relativePath]),d=r.concat(c);l.children&&l.children.length>0&&(je(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),nf(l.children,t,d,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:F0(u,l.index),routesMeta:d})};return e.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))s(l,i);else for(let c of sf(l.path))s(l,i,c)}),t}function sf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return s?[l,""]:[l];let i=sf(n.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),s&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function L0(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:U0(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const R0=/^:[\w-]+$/,I0=3,O0=2,M0=1,D0=10,z0=-2,gd=e=>e==="*";function F0(e,t){let r=e.split("/"),n=r.length;return r.some(gd)&&(n+=z0),t&&(n+=O0),r.filter(s=>!gd(s)).reduce((s,l)=>s+(R0.test(l)?I0:l===""?M0:D0),n)}function U0(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function B0(e,t,r){let{routesMeta:n}=e,s={},l="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=l==="/"?t:t.slice(l.length)||"/",f=H0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:jr([l,f.pathname]),pathnameBase:K0(jr([l,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(l=jr([l,f.pathnameBase]))}return i}function H0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=W0(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let l=s[0],i=l.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:y}=d;if(h==="*"){let k=o[f]||"";i=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const v=o[f];return y&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:i,pattern:e}}function W0(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),rf(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function V0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return rf(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Nc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function G0(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Ln(e):e;return{pathname:r?r.startsWith("/")?r:Q0(r,t):t,search:q0(n),hash:Z0(s)}}function Q0(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function ui(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y0(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Sc(e,t){let r=Y0(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function _c(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Ln(e):(s=Is({},e),je(!s.pathname||!s.pathname.includes("?"),ui("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),ui("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),ui("#","search","hash",s)));let l=e===""||s.pathname==="",i=l?"/":s.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=G0(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(l||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const jr=e=>e.join("/").replace(/\/\/+/g,"/"),K0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function X0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const af=["post","put","patch","delete"];new Set(af);const J0=["get",...af];new Set(J0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Os(){return Os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Os.apply(this,arguments)}const Cc=g.createContext(null),ex=g.createContext(null),Tr=g.createContext(null),_l=g.createContext(null),rr=g.createContext({outlet:null,matches:[],isDataRoute:!1}),lf=g.createContext(null);function tx(e,t){let{relative:r}=t===void 0?{}:t;Rn()||je(!1);let{basename:n,navigator:s}=g.useContext(Tr),{hash:l,pathname:i,search:o}=cf(e,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:jr([n,i])),s.createHref({pathname:c,search:o,hash:l})}function Rn(){return g.useContext(_l)!=null}function Qr(){return Rn()||je(!1),g.useContext(_l).location}function of(e){g.useContext(Tr).static||g.useLayoutEffect(e)}function Cl(){let{isDataRoute:e}=g.useContext(rr);return e?fx():rx()}function rx(){Rn()||je(!1);let e=g.useContext(Cc),{basename:t,future:r,navigator:n}=g.useContext(Tr),{matches:s}=g.useContext(rr),{pathname:l}=Qr(),i=JSON.stringify(Sc(s,r.v7_relativeSplatPath)),o=g.useRef(!1);return of(()=>{o.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=_c(u,JSON.parse(i),l,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:jr([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,i,l,e])}function Ec(){let{matches:e}=g.useContext(rr),t=e[e.length-1];return t?t.params:{}}function cf(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=g.useContext(Tr),{matches:s}=g.useContext(rr),{pathname:l}=Qr(),i=JSON.stringify(Sc(s,n.v7_relativeSplatPath));return g.useMemo(()=>_c(e,JSON.parse(i),l,r==="path"),[e,i,l,r])}function nx(e,t){return sx(e,t)}function sx(e,t,r,n){Rn()||je(!1);let{navigator:s}=g.useContext(Tr),{matches:l}=g.useContext(rr),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=Qr(),d;if(t){var f;let b=typeof t=="string"?Ln(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||je(!1),d=b}else d=u;let h=d.pathname||"/",y=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");y="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=A0(e,{pathname:y}),k=cx(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:jr([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:jr([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,r,n);return t&&k?g.createElement(_l.Provider,{value:{location:Os({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fr.Pop}},k):k}function ax(){let e=hx(),t=X0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:s},r):null,null)}const lx=g.createElement(ax,null);class ix extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(rr.Provider,{value:this.props.routeContext},g.createElement(lf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ox(e){let{routeContext:t,match:r,children:n}=e,s=g.useContext(Cc);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(rr.Provider,{value:t},n)}function cx(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||je(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:y}=r,v=f.route.loader&&h[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,h)=>{let y,v=!1,k=null,b=null;r&&(y=o&&f.route.id?o[f.route.id]:void 0,k=f.route.errorElement||lx,c&&(u<0&&h===0?(mx("route-fallback"),v=!0,b=null):u===h&&(v=!0,b=f.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,h+1)),m=()=>{let x;return y?x=k:v?x=b:f.route.Component?x=g.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=d,g.createElement(ox,{match:f,routeContext:{outlet:d,matches:p,isDataRoute:r!=null},children:x})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?g.createElement(ix,{location:r.location,revalidation:r.revalidation,component:k,error:y,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var uf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(uf||{}),df=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(df||{});function ux(e){let t=g.useContext(Cc);return t||je(!1),t}function dx(e){let t=g.useContext(ex);return t||je(!1),t}function px(e){let t=g.useContext(rr);return t||je(!1),t}function pf(e){let t=px(),r=t.matches[t.matches.length-1];return r.route.id||je(!1),r.route.id}function hx(){var e;let t=g.useContext(lf),r=dx(),n=pf();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function fx(){let{router:e}=ux(uf.UseNavigateStable),t=pf(df.UseNavigateStable),r=g.useRef(!1);return of(()=>{r.current=!0}),g.useCallback(function(s,l){l===void 0&&(l={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Os({fromRouteId:t},l)))},[e,t])}const xd={};function mx(e,t,r){xd[e]||(xd[e]=!0)}function gx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function xx(e){let{to:t,replace:r,state:n,relative:s}=e;Rn()||je(!1);let{future:l,static:i}=g.useContext(Tr),{matches:o}=g.useContext(rr),{pathname:c}=Qr(),u=Cl(),d=_c(t,Sc(o,l.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function Ne(e){je(!1)}function yx(e){let{basename:t="/",children:r=null,location:n,navigationType:s=fr.Pop,navigator:l,static:i=!1,future:o}=e;Rn()&&je(!1);let c=t.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:l,static:i,future:Os({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof n=="string"&&(n=Ln(n));let{pathname:d="/",search:f="",hash:h="",state:y=null,key:v="default"}=n,k=g.useMemo(()=>{let b=Nc(d,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:y,key:v},navigationType:s}},[c,d,f,h,y,v,s]);return k==null?null:g.createElement(Tr.Provider,{value:u},g.createElement(_l.Provider,{children:r,value:k}))}function El(e){let{children:t,location:r}=e;return nx(yo(t),r)}new Promise(()=>{});function yo(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(n,s)=>{if(!g.isValidElement(n))return;let l=[...t,s];if(n.type===g.Fragment){r.push.apply(r,yo(n.props.children,l));return}n.type!==Ne&&je(!1),!n.props.index||!n.props.children||je(!1);let i={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=yo(n.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vo(){return vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vo.apply(this,arguments)}function vx(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,l;for(l=0;l<n.length;l++)s=n[l],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function kx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wx(e,t){return e.button===0&&(!t||t==="_self")&&!kx(e)}const bx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jx="6";try{window.__reactRouterVersion=jx}catch{}const Nx="startTransition",yd=gm[Nx];function Sx(e){let{basename:t,children:r,future:n,window:s}=e,l=g.useRef();l.current==null&&(l.current=E0({window:s,v5Compat:!0}));let i=l.current,[o,c]=g.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=g.useCallback(f=>{u&&yd?yd(()=>c(f)):c(f)},[c,u]);return g.useLayoutEffect(()=>i.listen(d),[i,d]),g.useEffect(()=>gx(n),[n]),g.createElement(yx,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const _x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=g.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:l,replace:i,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=vx(t,bx),{basename:y}=g.useContext(Tr),v,k=!1;if(typeof u=="string"&&Cx.test(u)&&(v=u,_x))try{let x=new URL(window.location.href),j=u.startsWith("//")?new URL(x.protocol+u):new URL(u),T=Nc(j.pathname,y);j.origin===x.origin&&T!=null?u=T+j.search+j.hash:k=!0}catch{}let b=tx(u,{relative:s}),p=Ex(u,{replace:i,state:o,target:c,preventScrollReset:d,relative:s,viewTransition:f});function m(x){n&&n(x),x.defaultPrevented||p(x)}return g.createElement("a",vo({},h,{href:v||b,onClick:k||l?n:m,ref:r,target:c}))});var vd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(vd||(vd={}));var kd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(kd||(kd={}));function Ex(e,t){let{target:r,replace:n,state:s,preventScrollReset:l,relative:i,viewTransition:o}=t===void 0?{}:t,c=Cl(),u=Qr(),d=cf(e,{relative:i});return g.useCallback(f=>{if(wx(f,r)){f.preventDefault();let h=n!==void 0?n:sl(u)===sl(d);c(e,{replace:h,state:s,preventScrollReset:l,relative:i,viewTransition:o})}},[u,c,d,n,s,r,e,l,i,o])}var Tx=typeof Element<"u",Px=typeof Map=="function",Ax=typeof Set=="function",$x=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Ea(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!Ea(e[n],t[n]))return!1;return!0}var l;if(Px&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(l=e.entries();!(n=l.next()).done;)if(!t.has(n.value[0]))return!1;for(l=e.entries();!(n=l.next()).done;)if(!Ea(n.value[1],t.get(n.value[0])))return!1;return!0}if(Ax&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(l=e.entries();!(n=l.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if($x&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[n]))return!1;if(Tx&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((s[n]==="_owner"||s[n]==="__v"||s[n]==="__o")&&e.$$typeof)&&!Ea(e[s[n]],t[s[n]]))return!1;return!0}return e!==e&&t!==t}var Lx=function(t,r){try{return Ea(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Rx=cl(Lx);var Ix=function(e,t,r,n,s,l,i,o){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,s,l,i,o],d=0;c=new Error(t.replace(/%s/g,function(){return u[d++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Ox=Ix;const wd=cl(Ox);var Mx=function(t,r,n,s){var l=n?n.call(s,t,r):void 0;if(l!==void 0)return!!l;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var i=Object.keys(t),o=Object.keys(r);if(i.length!==o.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(r),u=0;u<i.length;u++){var d=i[u];if(!c(d))return!1;var f=t[d],h=r[d];if(l=n?n.call(s,f,h,d):void 0,l===!1||l===void 0&&f!==h)return!1}return!0};const Dx=cl(Mx);var hf=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(hf||{}),di={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},bd=Object.values(hf),Tc={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},zx=Object.entries(Tc).reduce((e,[t,r])=>(e[r]=t,e),{}),_t="data-rh",wn={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},bn=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},Fx=e=>{let t=bn(e,"title");const r=bn(e,wn.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const n=bn(e,wn.DEFAULT_TITLE);return t||n||void 0},Ux=e=>bn(e,wn.ON_CHANGE_CLIENT_STATE)||(()=>{}),pi=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,n)=>({...r,...n}),{}),Bx=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const s=Object.keys(n);for(let l=0;l<s.length;l+=1){const o=s[l].toLowerCase();if(e.indexOf(o)!==-1&&n[o])return r.concat(n)}}return r},[]),Hx=e=>console&&typeof console.warn=="function"&&console.warn(e),Kn=(e,t,r)=>{const n={};return r.filter(s=>Array.isArray(s[e])?!0:(typeof s[e]<"u"&&Hx(`Helmet: ${e} should be of type "Array". Instead found type "${typeof s[e]}"`),!1)).map(s=>s[e]).reverse().reduce((s,l)=>{const i={};l.filter(c=>{let u;const d=Object.keys(c);for(let h=0;h<d.length;h+=1){const y=d[h],v=y.toLowerCase();t.indexOf(v)!==-1&&!(u==="rel"&&c[u].toLowerCase()==="canonical")&&!(v==="rel"&&c[v].toLowerCase()==="stylesheet")&&(u=v),t.indexOf(y)!==-1&&(y==="innerHTML"||y==="cssText"||y==="itemprop")&&(u=y)}if(!u||!c[u])return!1;const f=c[u].toLowerCase();return n[u]||(n[u]={}),i[u]||(i[u]={}),n[u][f]?!1:(i[u][f]=!0,!0)}).reverse().forEach(c=>s.push(c));const o=Object.keys(i);for(let c=0;c<o.length;c+=1){const u=o[c],d={...n[u],...i[u]};n[u]=d}return s},[]).reverse()},Wx=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},Vx=e=>({baseTag:Bx(["href"],e),bodyAttributes:pi("bodyAttributes",e),defer:bn(e,wn.DEFER),encode:bn(e,wn.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:pi("htmlAttributes",e),linkTags:Kn("link",["rel","href"],e),metaTags:Kn("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:Kn("noscript",["innerHTML"],e),onChangeClientState:Ux(e),scriptTags:Kn("script",["src","innerHTML"],e),styleTags:Kn("style",["cssText"],e),title:Fx(e),titleAttributes:pi("titleAttributes",e),prioritizeSeoTags:Wx(e,wn.PRIORITIZE_SEO_TAGS)}),ff=e=>Array.isArray(e)?e.join(""):e,Gx=(e,t)=>{const r=Object.keys(e);for(let n=0;n<r.length;n+=1)if(t[r[n]]&&t[r[n]].includes(e[r[n]]))return!0;return!1},hi=(e,t)=>Array.isArray(e)?e.reduce((r,n)=>(Gx(n,t)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:e,priority:[]},jd=(e,t)=>({...e,[t]:void 0}),Qx=["noscript","script","style"],ko=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),mf=e=>Object.keys(e).reduce((t,r)=>{const n=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${n}`:n},""),Yx=(e,t,r,n)=>{const s=mf(r),l=ff(t);return s?`<${e} ${_t}="true" ${s}>${ko(l,n)}</${e}>`:`<${e} ${_t}="true">${ko(l,n)}</${e}>`},Kx=(e,t,r=!0)=>t.reduce((n,s)=>{const l=s,i=Object.keys(l).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,d)=>{const f=typeof l[d]>"u"?d:`${d}="${ko(l[d],r)}"`;return u?`${u} ${f}`:f},""),o=l.innerHTML||l.cssText||"",c=Qx.indexOf(e)===-1;return`${n}<${e} ${_t}="true" ${i}${c?"/>":`>${o}</${e}>`}`},""),gf=(e,t={})=>Object.keys(e).reduce((r,n)=>{const s=Tc[n];return r[s||n]=e[n],r},t),qx=(e,t,r)=>{const n={key:t,[_t]:!0},s=gf(r,n);return[Vt.createElement("title",s,t)]},Ta=(e,t)=>t.map((r,n)=>{const s={key:n,[_t]:!0};return Object.keys(r).forEach(l=>{const o=Tc[l]||l;if(o==="innerHTML"||o==="cssText"){const c=r.innerHTML||r.cssText;s.dangerouslySetInnerHTML={__html:c}}else s[o]=r[l]}),Vt.createElement(e,s)}),ht=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>qx(e,t.title,t.titleAttributes),toString:()=>Yx(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>gf(t),toString:()=>mf(t)};default:return{toComponent:()=>Ta(e,t),toString:()=>Kx(e,t,r)}}},Zx=({metaTags:e,linkTags:t,scriptTags:r,encode:n})=>{const s=hi(e,di.meta),l=hi(t,di.link),i=hi(r,di.script);return{priorityMethods:{toComponent:()=>[...Ta("meta",s.priority),...Ta("link",l.priority),...Ta("script",i.priority)],toString:()=>`${ht("meta",s.priority,n)} ${ht("link",l.priority,n)} ${ht("script",i.priority,n)}`},metaTags:s.default,linkTags:l.default,scriptTags:i.default}},Xx=e=>{const{baseTag:t,bodyAttributes:r,encode:n=!0,htmlAttributes:s,noscriptTags:l,styleTags:i,title:o="",titleAttributes:c,prioritizeSeoTags:u}=e;let{linkTags:d,metaTags:f,scriptTags:h}=e,y={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:y,linkTags:d,metaTags:f,scriptTags:h}=Zx(e)),{priority:y,base:ht("base",t,n),bodyAttributes:ht("bodyAttributes",r,n),htmlAttributes:ht("htmlAttributes",s,n),link:ht("link",d,n),meta:ht("meta",f,n),noscript:ht("noscript",l,n),script:ht("script",h,n),style:ht("style",i,n),title:ht("title",{title:o,titleAttributes:c},n)}},wo=Xx,pa=[],xf=!!(typeof window<"u"&&window.document&&window.document.createElement),bo=class{constructor(e,t){re(this,"instances",[]);re(this,"canUseDOM",xf);re(this,"context");re(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?pa:this.instances,add:e=>{(this.canUseDOM?pa:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?pa:this.instances).indexOf(e);(this.canUseDOM?pa:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=wo({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Jx={},yf=Vt.createContext(Jx),Or,vf=(Or=class extends g.Component{constructor(r){super(r);re(this,"helmetData");this.helmetData=new bo(this.props.context||{},Or.canUseDOM)}render(){return Vt.createElement(yf.Provider,{value:this.helmetData.value},this.props.children)}},re(Or,"canUseDOM",xf),Or),en=(e,t)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${e}[${_t}]`),s=[].slice.call(n),l=[];let i;return t&&t.length&&t.forEach(o=>{const c=document.createElement(e);for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u))if(u==="innerHTML")c.innerHTML=o.innerHTML;else if(u==="cssText")c.styleSheet?c.styleSheet.cssText=o.cssText:c.appendChild(document.createTextNode(o.cssText));else{const d=u,f=typeof o[d]>"u"?"":o[d];c.setAttribute(u,f)}c.setAttribute(_t,"true"),s.some((u,d)=>(i=d,c.isEqualNode(u)))?s.splice(i,1):l.push(c)}),s.forEach(o=>{var c;return(c=o.parentNode)==null?void 0:c.removeChild(o)}),l.forEach(o=>r.appendChild(o)),{oldTags:s,newTags:l}},jo=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const n=r.getAttribute(_t),s=n?n.split(","):[],l=[...s],i=Object.keys(t);for(const o of i){const c=t[o]||"";r.getAttribute(o)!==c&&r.setAttribute(o,c),s.indexOf(o)===-1&&s.push(o);const u=l.indexOf(o);u!==-1&&l.splice(u,1)}for(let o=l.length-1;o>=0;o-=1)r.removeAttribute(l[o]);s.length===l.length?r.removeAttribute(_t):r.getAttribute(_t)!==i.join(",")&&r.setAttribute(_t,i.join(","))},ey=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=ff(e)),jo("title",t)},Nd=(e,t)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:s,linkTags:l,metaTags:i,noscriptTags:o,onChangeClientState:c,scriptTags:u,styleTags:d,title:f,titleAttributes:h}=e;jo("body",n),jo("html",s),ey(f,h);const y={baseTag:en("base",r),linkTags:en("link",l),metaTags:en("meta",i),noscriptTags:en("noscript",o),scriptTags:en("script",u),styleTags:en("style",d)},v={},k={};Object.keys(y).forEach(b=>{const{newTags:p,oldTags:m}=y[b];p.length&&(v[b]=p),m.length&&(k[b]=y[b].oldTags)}),t&&t(),c(e,v,k)},qn=null,ty=e=>{qn&&cancelAnimationFrame(qn),e.defer?qn=requestAnimationFrame(()=>{Nd(e,()=>{qn=null})}):(Nd(e),qn=null)},ry=ty,Sd=class extends g.Component{constructor(){super(...arguments);re(this,"rendered",!1)}shouldComponentUpdate(t){return!Dx(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:r}=this.props.context;let n=null;const s=Vx(t.get().map(l=>{const i={...l.props};return delete i.context,i}));vf.canUseDOM?ry(s):wo&&(n=wo(s)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},bi,Bs=(bi=class extends g.Component{shouldComponentUpdate(e){return!Rx(jd(this.props,"helmetData"),jd(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,n){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,n)}]}}mapObjectTypeChildren(e,t,r,n){switch(e.type){case"title":return{...t,[e.type]:n,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(n=>{r={...r,[n]:e[n]}}),r}warnOnInvalidChildren(e,t){return wd(bd.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${bd.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),wd(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return Vt.Children.forEach(e,n=>{if(!n||!n.props)return;const{children:s,...l}=n.props,i=Object.keys(l).reduce((c,u)=>(c[zx[u]||u]=l[u],c),{});let{type:o}=n;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(n,s),o){case"Symbol(react.fragment)":t=this.mapChildrenToProps(s,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,i,s);break;default:t=this.mapObjectTypeChildren(n,t,i,s);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:n}=t;if(e&&(r=this.mapChildrenToProps(e,r)),n&&!(n instanceof bo)){const s=n;n=new bo(s.context,!0),delete r.helmetData}return n?Vt.createElement(Sd,{...r,context:n.value}):Vt.createElement(yf.Consumer,null,s=>Vt.createElement(Sd,{...r,context:s}))}},re(bi,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),bi);const kf=g.createContext(void 0),Hs=()=>{const e=g.useContext(kf);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},ny=({children:e})=>{const[t,r]=g.useState(()=>localStorage.getItem("theme")||"dark");g.useEffect(()=>{localStorage.setItem("theme",t),t==="dark"?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))},[t]);const n=()=>{r(s=>s==="dark"?"light":"dark")};return a.jsx(kf.Provider,{value:{theme:t,toggleTheme:n},children:e})},_e="/api",wf=g.createContext(void 0);function sy({children:e}){const[t,r]=g.useState(null),[n,s]=g.useState(!0),[l,i]=g.useState(null),o=async()=>{try{i(null);const h=await fetch(`${_e}/auth/me.php`,{credentials:"same-origin"});if(h.ok){const y=await h.json();y.user?r(y.user):r(null)}else if(h.status===401)r(null);else throw new Error(`Auth check failed: ${h.status}`)}catch(h){console.error("Auth check failed:",h),i(h instanceof Error?h.message:"Auth check failed"),r(null)}finally{s(!1)}},c=async()=>{s(!0),await o()},u=async(h,y)=>{try{i(null);const k=await(await fetch(`${_e}/auth/login.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({username:h,password:y})})).json();return k.success&&k.user?(r(k.user),{success:!0}):{success:!1,error:k.error||"Login failed"}}catch(v){return{success:!1,error:v instanceof Error?v.message:"Network error"}}},d=async()=>{try{await fetch(`${_e}/auth/logout.php`,{method:"POST",credentials:"same-origin"})}catch(h){console.error("Logout error:",h)}finally{r(null)}};g.useEffect(()=>{o()},[]);const f={user:t,loading:n,error:l,refresh:c,login:u,logout:d};return a.jsx(wf.Provider,{value:f,children:e})}function ay(){const e=g.useContext(wf);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function ly(e){return e?["admin","author","mod"].includes(e.role.toLowerCase()):!1}function iy({children:e}){return a.jsx(sy,{children:a.jsx(ny,{children:e})})}const bf=["website","twitter","instagram","facebook","youtube","vimeo","discord","patreon","tiktok","github","linkedin"],No={website:"Website",twitter:"Twitter/X",instagram:"Instagram",facebook:"Facebook",youtube:"YouTube",vimeo:"Vimeo",discord:"Discord",patreon:"Patreon",tiktok:"TikTok",github:"GitHub",linkedin:"LinkedIn"},oy={website:"https://yoursite.com",twitter:"https://x.com/username",instagram:"https://instagram.com/username",facebook:"https://facebook.com/username",youtube:"https://youtube.com/@username",vimeo:"https://vimeo.com/username",discord:"https://discord.gg/invite",patreon:"https://patreon.com/username",tiktok:"https://tiktok.com/@username",github:"https://github.com/username",linkedin:"https://www.linkedin.com/in/your_profile/"},_d={twitter:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M18.244 2H21.5l-7.51 8.574L22.5 22h-6.555l-5.12-6.023L4.8 22H1.54l8.05-9.19L1 2h6.69l4.64 5.44L18.244 2Zm-1.148 17.262h1.79L7.01 4.65H5.1l11.996 14.612Z"})}),patreon:a.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:[a.jsx("circle",{cx:"9",cy:"9",r:"4"}),a.jsx("rect",{x:"15",y:"3",width:"3",height:"18",rx:"1.5"})]}),discord:a.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:[a.jsx("path",{d:"M5 6a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3v9.5c0 .8-.65 1.5-1.45 1.5H16l-2 2-2-2H6.45A1.5 1.5 0 0 1 5 15.5V6Z"}),a.jsx("circle",{cx:"10",cy:"11",r:"1.2",className:"fill-neutral-700 dark:fill-neutral-300"}),a.jsx("circle",{cx:"14",cy:"11",r:"1.2",className:"fill-neutral-700 dark:fill-neutral-300"})]}),instagram:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7Zm5 3.5A5.5 5.5 0 1 1 6.5 13 5.5 5.5 0 0 1 12 7.5Zm0 2A3.5 3.5 0 1 0 15.5 13 3.5 3.5 0 0 0 12 9.5Zm5.75-3a1.25 1.25 0 1 1-1.25 1.25 1.25 1.25 0 0 1 1.25-1.25Z"})}),facebook:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M22 12a10 10 0 1 0-11.563 9.875v-6.984H7.898V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.463h-1.26c-1.242 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.984A10.002 10.002 0 0 0 22 12Z"})}),youtube:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M23.499 6.203a3.004 3.004 0 0 0-2.115-2.127C19.6 3.5 12 3.5 12 3.5s-7.6 0-9.384.576A3.004 3.004 0 0 0 .5 6.203 31.21 31.21 0 0 0 0 12a31.21 31.21 0 0 0 .5 5.797 3.004 3.004 0 0 0 2.115 2.127C4.4 20.5 12 20.5 12 20.5s7.6 0 9.384-.576a3.004 3.004 0 0 0 2.115-2.127A31.21 31.21 0 0 0 24 12a31.21 31.21 0 0 0-.501-5.797ZM9.75 15.568V8.432L15.818 12 9.75 15.568Z"})}),vimeo:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M23.977 6.416c-.105 2.338-1.739 5.543-4.894 9.609-3.268 4.247-6.026 6.37-8.29 6.37-1.409 0-2.578-1.294-3.553-3.881L5.322 11.4C4.603 8.816 3.834 7.522 3.01 7.522c-.179 0-.806.378-1.881 1.132L0 7.197a315.065 315.065 0 003.501-3.128C5.08 2.701 6.266 1.984 7.055 1.91c1.867-.18 3.016 1.1 3.447 3.838.465 2.953.789 4.789.971 5.507.539 2.45 1.131 3.674 1.776 3.674.502 0 1.256-.796 2.265-2.385 1.004-1.589 1.54-2.797 1.612-3.628.144-1.371-.395-2.061-1.614-2.061-.574 0-1.167.121-1.777.391 1.186-3.868 3.434-5.757 6.762-5.637 2.473.06 3.628 1.664 3.493 4.797l-.013.01z"})}),tiktok:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M16.5 3a5.5 5.5 0 0 0 .283 1.752 5.5 5.5 0 0 0 3.465 3.465A8.5 8.5 0 0 1 21 9.5 8.5 8.5 0 0 1 12.5 1h1.5v6.588a4.5 4.5 0 1 1-3.5 8.76V13.87a2 2 0 1 0 1.5-1.932V1H16.5Z"})}),github:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M12 1.5a10.5 10.5 0 0 0-3.32 20.468c.526.097.72-.228.72-.508 0-.25-.01-1.082-.015-1.963-2.933.637-3.552-1.257-3.552-1.257-.48-1.22-1.172-1.545-1.172-1.545-.957-.654.073-.64.073-.64 1.06.075 1.619 1.088 1.619 1.088.94 1.611 2.466 1.145 3.067.875.095-.681.367-1.145.668-1.409-2.342-.266-4.804-1.171-4.804-5.209 0-1.151.41-2.093 1.082-2.832-.108-.267-.469-1.344.102-2.802 0 0 .883-.283 2.894 1.081A10.07 10.07 0 0 1 12 6.844a10.06 10.06 0 0 1 2.636.355c2.01-1.364 2.892-1.08 2.892-1.08.573 1.457.212 2.535.104 2.802.673.74 1.08 1.682 1.08 2.833 0 4.05-2.466 4.94-4.813 5.202.377.326.714.968.714 1.95 0 1.409-.013 2.546-.013 2.894 0 .282.19.61.727.506A10.503 10.503 0 0 0 12 1.5Z"})}),linkedin:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),website:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2Zm6.93 6h-3.243a15.93 15.93 0 0 0-1.23-3.154A8.03 8.03 0 0 1 18.93 8ZM12 4c.735 0 1.99 1.62 2.657 4H9.343C10.01 5.62 11.265 4 12 4ZM8.543 4.846A15.93 15.93 0 0 0 7.313 8H4.07a8.03 8.03 0 0 1 4.473-3.154ZM4.07 16h3.244c.294 1.112.708 2.178 1.23 3.154A8.03 8.03 0 0 1 4.07 16Zm5.274 0h5.313c-.667 2.38-1.922 4-2.657 4-.735 0-1.99-1.62-2.656-4Zm6.113 3.154A15.928 15.928 0 0 0 18.93 16h-3.244c-.294 1.112-.708 2.178-1.23 3.154Z"})})};function In({socials:e,variant:t="homepage",showCopyright:r=!0}){const[n,s]=g.useState(null);g.useEffect(()=>{if(e&&Object.keys(e).length>0)return;let o=!1;return(async()=>{try{const c=await fetch("/api/socials/get.php",{credentials:"same-origin",cache:"no-cache"});if(c.ok){const u=await c.json().catch(()=>null),d=u&&(u.socials||(u.success?u.socials:null));!o&&d&&typeof d=="object"&&s(d)}}catch{}})(),()=>{o=!0}},[e]);const l=e??n;if(!l||Object.keys(l).length===0)return null;const i=bf;return t==="footer"?a.jsxs("div",{className:"mx-auto max-w-6xl px-4",children:[a.jsx("div",{className:"flex items-center justify-center gap-4 py-6",children:i.map(o=>{const c=l[o];return c?a.jsx("a",{href:c,target:"_blank",rel:"noreferrer","aria-label":No[o]||o,className:`inline-flex items-center justify-center rounded-full border border-neutral-300 bg-white text-neutral-700 p-2 hover:border-neutral-400 transition shadow-sm\r
                           dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-200 dark:hover:border-neutral-600`,children:_d[o]||a.jsx("span",{className:"text-sm",children:o})},o):null})}),r&&a.jsxs("div",{className:"pb-10 text-center text-xs opacity-70",children:[" ",new Date().getFullYear()," All Rights Reserved."]})]}):a.jsx("div",{className:"flex items-center justify-center gap-3",children:i.map(o=>{const c=l[o];return c?a.jsx("a",{href:c,target:"_blank",rel:"noreferrer","aria-label":No[o]||o,className:`inline-flex items-center justify-center rounded-full border border-neutral-300 bg-white text-neutral-700 p-2 hover:border-neutral-400 transition shadow-sm\r
                       dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-200 dark:hover:border-neutral-600`,children:_d[o]||a.jsx("span",{className:"text-sm",children:o})},o):null})})}const jf=g.createContext(null),Nf=()=>{const e=g.useContext(jf);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},cy=({children:e})=>{const[t,r]=g.useState(()=>localStorage.getItem("theme")||"dark");g.useEffect(()=>{localStorage.setItem("theme",t),t==="dark"?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))},[t]);const n=()=>{r(s=>s==="dark"?"light":"dark")};return a.jsx(jf.Provider,{value:{theme:t,toggleTheme:n},children:e})},uy=()=>{const{theme:e,toggleTheme:t}=Nf();return a.jsx("button",{onClick:t,className:`fixed top-4 left-4 z-50 p-2 rounded-lg transition-colors duration-200 shadow-lg ${e==="dark"?"bg-neutral-800 text-neutral-100 hover:bg-neutral-700":"bg-neutral-200 text-neutral-900 hover:bg-neutral-300"}`,"aria-label":`Switch to ${e==="dark"?"light":"dark"} theme`,children:e==="dark"?a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})};function dy(){const{theme:e}=Nf(),[t,r]=g.useState(null),[n,s]=g.useState({}),[l,i]=g.useState(!1),[o,c]=g.useState(!1),[u,d]=g.useState(!0);if(g.useEffect(()=>{fetch("/api/author/get.php").then(p=>p.json()).then(p=>{p.success&&r(p.profile)}).catch(p=>{console.error("Failed to fetch author profile:",p),r({name:"Author Name",bio:"Author & Writer",tagline:"Stories that captivate and inspire"})}),fetch("/api/socials/get.php").then(p=>p.json()).then(p=>{p.success&&s(p.socials)}).catch(p=>{console.error("Failed to fetch social links:",p),s({})}),fetch("/api/stories/list.php?status=published&limit=1").then(p=>p.json()).then(p=>{p.success&&p.stories&&p.stories.length>0&&i(!0)}).catch(p=>{console.error("Failed to fetch stories:",p)}),fetch("/api/galleries/list.php?limit=1").then(p=>p.json()).then(p=>{p.galleries&&p.galleries.length>0&&c(!0)}).catch(p=>{console.error("Failed to fetch galleries:",p)}).finally(()=>{d(!1)})},[]),!t)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."});const f=e==="light"?t.background_image_light||t.background_image||"/images/lofi_light_bg.webp":t.background_image_dark||t.background_image||"/images/lofi_bg.webp",h=e==="light"?"bg-white/60":"bg-black/40",y=e==="light"?"bg-white/70 text-gray-900":"bg-black/70 text-white",k=`https://${t.site_domain||"example.com"}`,b=t.profile_image?t.profile_image.startsWith("http")?t.profile_image:`${k}${t.profile_image}`:`${k}/images/lofi_bg.webp`;return a.jsxs(a.Fragment,{children:[a.jsxs(Bs,{children:[a.jsxs("title",{children:[t.name," | ",t.bio]}),a.jsx("meta",{name:"description",content:`${t.name} - ${t.bio}. ${t.tagline}. Discover engaging stories and creative writing.`}),a.jsx("link",{rel:"canonical",href:`${k}/`}),a.jsx("meta",{property:"og:title",content:`${t.name} | ${t.bio}`}),a.jsx("meta",{property:"og:description",content:`${t.name} - ${t.bio}. ${t.tagline}. Discover engaging stories and creative writing.`}),a.jsx("meta",{property:"og:type",content:"website"}),a.jsx("meta",{property:"og:url",content:`${k}/`}),a.jsx("meta",{property:"og:image",content:b}),a.jsx("meta",{name:"twitter:card",content:"summary"}),a.jsx("meta",{name:"twitter:title",content:`${t.name} | ${t.bio}`}),a.jsx("meta",{name:"twitter:description",content:`${t.name} - ${t.bio}. ${t.tagline}. Discover engaging stories and creative writing.`}),a.jsx("meta",{name:"twitter:image",content:b}),a.jsx("meta",{name:"keywords",content:"author, writer, stories, novels, creative writing"}),a.jsx("meta",{name:"author",content:t.name})]}),a.jsx(uy,{}),a.jsxs("div",{className:"relative h-screen w-full",children:[a.jsx("div",{className:"fixed inset-0 w-full h-full -z-10",style:{backgroundImage:`url('${f}')`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"}}),a.jsx("div",{className:`fixed inset-0 ${h} -z-10`}),a.jsx("div",{className:"relative z-10 flex items-center justify-center h-full",children:a.jsxs("div",{className:`${y} p-8 rounded-2xl shadow-xl max-w-md text-center`,children:[t.profile_image&&a.jsx("div",{className:"mb-4 flex justify-center",children:a.jsx("img",{src:t.profile_image,alt:t.name,className:"w-24 h-24 rounded-full object-cover border-4 border-white/20",onError:p=>{const m=p.target;m.style.display="none"}})}),a.jsx("h1",{className:"text-3xl font-bold mb-2",children:t.name}),a.jsxs("p",{className:"opacity-80 mb-6",children:[t.bio," | ",t.tagline]}),!u&&(l||o)&&a.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[l&&a.jsx("a",{href:"/storytime",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors",children:"Stories"}),o&&a.jsx("a",{href:"/galleries",className:`px-4 py-2 rounded-lg transition-colors ${e==="light"?"bg-gray-600 text-white hover:bg-gray-500":"bg-gray-700 text-white hover:bg-gray-600"}`,children:"Galleries"})]}),a.jsx(In,{socials:n}),a.jsx("div",{className:"mt-4",children:a.jsx("a",{href:"/admin",className:"text-xs opacity-50 hover:opacity-100 transition-opacity",children:"Admin"})})]})})]})]})}function py(){return a.jsx(cy,{children:a.jsx(dy,{})})}function hy(){return a.jsx(py,{})}function Cd(e){let t=(e||"").replace(/^\s*prompt:\s*/i,"").trim();const r=/\n\s*(steps|sampler|cfg\s*scale|seed|size|model|vae|clip\s*skip|denoising\s*strength|hires\s*steps|hires\s*upscale|hires\s*upscaler|version|ensd|scheduler|refiner|tile|loras?)\s*:/i;if(t.match(/\bnegative\s*(?:prompt)?\s*:\s*/i)){const o=t.split(/\bnegative\s*(?:prompt)?\s*:\s*/i,2),c=(o[0]||"").trim();let u=(o.slice(1).join(`
`)||"").replace(/^[\s:\-]+/,"");const d=u.search(r);return d>=0&&(u=u.slice(0,d)),{pos:c,neg:u.trim()}}const s=t.toLowerCase(),i=/(?:^|[\n,;])\s*(lowres|worst quality|bad(?:[-\s]?anatomy|[-\s]?hands)|extra[-\s]?digits|missing[-\s]?fingers|watermark|signature|username|jpeg artifacts)\b/.exec(s);if(i&&typeof i.index=="number"){const o=i[1].toLowerCase(),c=s.indexOf(o,i.index);let u=t.slice(0,c).trim().replace(/[,\s]+$/,"").trim(),d=t.slice(c).replace(/^[\s,;]+/,"");const f=d.search(r);return f>=0&&(d=d.slice(0,f)),{pos:u,neg:d.trim()}}return{pos:t}}function fi(e){if(!e)return!1;const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function fy(e){const t=[],r=[],n=/"class_type"\s*:\s*"([^"]*cliptextencode[^"]*)"/gi;let s;for(;s=n.exec(e);){const i=Math.max(0,s.index-600),o=e.slice(i,s.index+2e3),c=/"text"\s*:\s*"((?:\\\\.|[^"\\\\])*)"/is.exec(o);if(c){const d=c[1].replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\\\/g,"\\").trim();d&&(/"(?:_meta"\s*:\s*\{[^}]*"title"|"label)"\s*:\s*"[^"]*negative[^"]*"/i.test(o)?r.push(d):t.push(d))}}const l=i=>{let o,c=-1;for(const u of i)u.length>c&&(c=u.length,o=u);return o};return{pos:l(t),neg:l(r)}}function my({im:e}){var J;const[t,r]=g.useState(!1),[n,s]=g.useState(null),l=async(M,C)=>{if(M)try{await navigator.clipboard.writeText(M),s(C),setTimeout(()=>s(null),1e3)}catch{}},i=e.prompt||"",o=e.parameters||void 0;let c,u=o;if(i){const{pos:M,neg:C}=Cd(i);c=M,!u&&C&&(u=C)}if(u){const{neg:M}=Cd(u);u=M||u}if((!c||fi(c))&&fi(i)){const M=fy(i);!c&&M.pos&&(c=M.pos),!u&&M.neg&&(u=M.neg)}c&&fi(c)&&(c=void 0);const[d,f]=g.useState({}),h=e.width??d.w,y=e.height??d.h,v=!!(h&&y&&h/y>=2.2),[k,b]=g.useState({likes:0,comments:0,liked:!1});g.useEffect(()=>{let M=!1;return e.id&&fetch(`${_e}/images/gallery-stats.php?image_id=${e.id}`,{cache:"no-cache",credentials:"same-origin"}).then(C=>C.ok?C.json():null).then(C=>{!M&&C&&C.ok&&b({likes:C.likes??0,comments:C.comments??0,liked:!!C.liked})}).catch(()=>{}),()=>{M=!0}},[e.id]);const p=async()=>{if(e.id)try{const M=await fetch(`${_e}/images/gallery-like.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({image_id:e.id})});if(M.ok){const C=await M.json();b(U=>({likes:C.like_count??U.likes,comments:C.comments??U.comments,liked:!!C.user_liked}))}}catch{}},[m,x]=g.useState([]),[j,T]=g.useState(!1),[E,A]=g.useState(""),[L,I]=g.useState(""),S=async()=>{if(e.id){T(!0);try{const M=await fetch(`${_e}/images/gallery-comment-list.php?image_id=${e.id}`,{cache:"no-cache",credentials:"same-origin"});if(M.ok){const C=await M.json();x(C.comments||[]),C.comments&&Array.isArray(C.comments)&&b(U=>({...U,comments:C.comments.length}))}}catch{}finally{T(!1)}}};g.useEffect(()=>{t&&m.length===0&&!j&&S()},[t]);const F=async M=>{if(M.preventDefault(),!e.id)return;const C=L.trim();if(C)try{const U=await fetch(`${_e}/images/gallery-comment-create.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({image_id:e.id,author_name:E.trim()||"Anonymous",content:C})});if(U.ok){await U.json();const K={id:Date.now(),author_name:E.trim()||"Anonymous",content:C,created_at:new Date().toISOString()};x(R=>[K,...R]),I(""),b(R=>({...R,comments:(R.comments??0)+1}))}else{const K=await U.text().catch(()=>"");alert(`Failed to submit comment: [${U.status}] ${K}`),console.error("Comment create failed",U.status,K)}}catch(U){alert("Failed to submit comment: "+((U==null?void 0:U.message)||"error"))}},X=e.title&&e.title.trim()||(()=>{try{const U=((e.src||"").split("?")[0].split("#")[0].split("/").pop()||"Image").replace(/\.[^./\\?#]+$/,"");return decodeURIComponent(U)}catch{return"Image"}})();return a.jsxs("div",{className:`rounded-2xl overflow-hidden border bg-white border-neutral-200 shadow-sm transition hover:shadow-md dark:bg-neutral-900 dark:border-neutral-800 ${v?"sm:col-span-2 lg:col-span-3":""}`,children:[a.jsx("button",{className:`block w-full overflow-hidden bg-neutral-200 dark:bg-neutral-800 ${h&&y?"":"aspect-[4/5]"}`,style:{aspectRatio:h&&y?`${h}/${y}`:void 0},onClick:()=>r(!0),"aria-label":"Open image",children:a.jsx("img",{src:e.thumb??e.src,alt:((J=e.prompt)==null?void 0:J.slice(0,120))||"image",loading:"lazy",className:"h-full w-full object-contain",onLoad:M=>{if(!e.width||!e.height){const C=M.currentTarget,U=C.naturalWidth||void 0,K=C.naturalHeight||void 0;U&&K&&(d.w!==U||d.h!==K)&&f({w:U,h:K})}}})}),a.jsxs("div",{className:"p-3 space-y-3 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 text-xs opacity-80",children:[a.jsxs("span",{title:"Likes",children:[" ",k.likes||0]}),a.jsx("span",{children:""}),a.jsxs("span",{title:"Comments",children:[" ",k.comments||0]})]}),e.checkpoint&&a.jsxs("p",{className:"opacity-80",children:[a.jsx("span",{className:"opacity-60",children:"Checkpoint:"})," ",e.checkpoint]}),e.loras&&e.loras.length>0&&a.jsxs("div",{className:"opacity-90",children:[a.jsx("div",{className:"opacity-60 mb-1",children:"LoRAs"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.loras.map(M=>a.jsx("span",{className:"inline-block rounded-md bg-neutral-100 px-2 py-0.5 text-xs border border-neutral-300 dark:bg-neutral-800 dark:border-neutral-700",children:M},M))})]}),c&&a.jsxs("div",{className:"rounded-lg border bg-neutral-50 border-neutral-200 p-3 dark:bg-neutral-900 dark:border-neutral-800",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium opacity-90",children:"Positive Prompt"}),a.jsx("button",{onClick:()=>l(c||"","pos"),className:"ml-auto rounded-md border border-neutral-300 bg-white text-neutral-700 px-2 py-1 text-xs hover:border-neutral-400 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-200 dark:hover:border-neutral-600",children:n==="pos"?"Copied":"Copy"})]}),a.jsx("p",{className:"mt-2 whitespace-pre-wrap opacity-90",children:c})]}),u&&a.jsxs("div",{className:"rounded-lg border bg-neutral-50 border-neutral-200 p-3 dark:bg-neutral-900 dark:border-neutral-800",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium opacity-90",children:"Negative Prompt"}),a.jsx("button",{onClick:()=>l(u||"","neg"),className:"ml-auto rounded-md border border-neutral-300 bg-white text-neutral-700 px-2 py-1 text-xs hover:border-neutral-400 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-200 dark:hover:border-neutral-600",children:n==="neg"?"Copied":"Copy"})]}),a.jsx("p",{className:"mt-2 whitespace-pre-wrap opacity-90",children:u})]}),a.jsxs("a",{href:e.src,target:"_blank",rel:"noreferrer",className:"inline-block text-xs opacity-70 hover:opacity-100 underline",title:`${X} - Open original`,children:[X," - Open original"]})]}),t&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 p-4 overflow-auto",onClick:()=>r(!1),children:a.jsxs("div",{className:"mx-auto max-w-4xl w-full",onClick:M=>M.stopPropagation(),children:[a.jsx("div",{className:"flex justify-end mb-2",children:a.jsx("button",{onClick:()=>r(!1),className:"rounded-md bg-white/90 px-2 py-1 text-sm text-neutral-900 hover:bg-white",children:" Close"})}),a.jsx("img",{src:e.src,className:"max-h-[70vh] w-full object-contain rounded-md"}),a.jsxs("div",{className:"mt-3 rounded-lg border bg-white border-neutral-200 p-3 dark:bg-neutral-900 dark:border-neutral-800",children:[a.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[a.jsxs("button",{onClick:p,disabled:!e.id,className:`inline-flex items-center gap-1 rounded-md border px-2 py-1 text-sm ${k.liked?"border-pink-400 text-pink-700 dark:text-pink-300":"border-neutral-300 text-neutral-700 hover:border-neutral-400 dark:border-neutral-700 dark:text-neutral-200 dark:hover:border-neutral-600"}`,title:k.liked?"Unlike":"Like",children:[a.jsx("span",{children:k.liked?"":""}),a.jsx("span",{className:"text-xs",children:k.likes||0})]}),a.jsxs("span",{className:"text-xs opacity-80",children:[" ",k.comments||0]})]}),a.jsx("h4",{className:"font-medium opacity-90 mb-2",children:"Comments"}),a.jsxs("form",{onSubmit:F,className:"space-y-2 mb-3",children:[a.jsx("input",{value:E,onChange:M=>A(M.target.value),className:"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm dark:border-neutral-700 dark:bg-neutral-900",placeholder:"Name (optional)"}),a.jsx("textarea",{value:L,onChange:M=>I(M.target.value),className:"w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm dark:border-neutral-700 dark:bg-neutral-900",rows:3,placeholder:"Share your thoughts...",maxLength:1e3}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"submit",className:"rounded-md border border-neutral-300 bg-white px-2 py-1 text-xs hover:border-neutral-400 dark:border-neutral-700 dark:bg-neutral-800 dark:hover:border-neutral-600",children:"Submit Comment"}),a.jsxs("span",{className:"text-xs opacity-60",children:[L.length,"/1000"]})]})]}),j?a.jsx("p",{className:"text-sm opacity-70",children:"Loading"}):m.length===0?a.jsx("p",{className:"text-sm opacity-70",children:"No comments yet. Be the first to comment!"}):a.jsx("ul",{className:"space-y-2",children:m.map(M=>a.jsxs("li",{className:"rounded-md border border-neutral-200 p-2 dark:border-neutral-800",children:[a.jsxs("div",{className:"text-xs opacity-60 mb-1",children:[a.jsx("span",{className:"font-bold text-neutral-900 dark:text-neutral-100 opacity-90",children:M.author_name||"Anonymous"}),"  "+new Date(M.created_at).toLocaleString()]}),a.jsx("div",{className:"whitespace-pre-wrap text-sm opacity-90",children:M.content})]},M.id))})]})]})})]})}function On(){const{theme:e,toggleTheme:t}=Hs(),r=e==="dark";return a.jsx("button",{onClick:t,className:`fixed top-4 left-4 z-50 p-2 rounded-lg transition-colors duration-200 shadow-lg ${r?"bg-neutral-800 text-neutral-100 hover:bg-neutral-700":"bg-neutral-200 text-neutral-900 hover:bg-neutral-300"}`,"aria-label":`Switch to ${r?"light":"dark"} theme`,children:r?a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})}function gy({items:e,onOpen:t,showAdultBadge:r=!1}){return e!=null&&e.length?a.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:e.map(n=>{const s=String(n.slug||""),l=String(n.title||"Untitled"),i=n.description?String(n.description):null,o=Number(n.image_count)||0,c=n.hero_thumb?String(n.hero_thumb):null,u=Number(n.hero_width)||null,d=Number(n.hero_height)||null,f=!!(u&&d&&u/d>=2.2);return a.jsxs("button",{className:`group text-left rounded-2xl overflow-hidden border bg-white border-neutral-200 hover:border-neutral-300 shadow-sm hover:shadow-md transition focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:bg-neutral-900 dark:border-neutral-800 dark:hover:border-neutral-700 dark:focus:ring-neutral-600 ${f?"sm:col-span-2 lg:col-span-3":""}`,onClick:()=>t(s),"aria-label":`Open ${l}`,children:[a.jsxs("div",{className:f?"relative w-full overflow-hidden bg-neutral-200 dark:bg-neutral-800 aspect-[21/9]":"relative w-full overflow-hidden bg-neutral-200 dark:bg-neutral-800 aspect-[4/3]",children:[c?a.jsx("img",{src:c,alt:l,className:`h-full w-full transition-transform duration-300 group-hover:scale-[1.03] ${f?"object-contain":"object-cover"}`,loading:"lazy"}):a.jsx("div",{className:"h-full w-full grid place-items-center text-neutral-400 text-sm",children:"No image"}),r&&n.rating==="X"&&a.jsx("span",{title:"18+ content",className:"pointer-events-none absolute top-2 right-2 rounded-md bg-red-600/90 px-2 py-1 text-xs font-semibold text-white shadow-md",children:""})]}),a.jsxs("div",{className:"p-3 space-y-1",children:[a.jsx("h3",{className:"font-semibold",children:l}),i?a.jsx("p",{className:"text-sm opacity-80 line-clamp-3",children:i}):null,a.jsxs("div",{className:"flex items-center gap-3 text-xs opacity-60",children:[a.jsxs("span",{children:[" ",o]}),a.jsxs("span",{children:[" ",Number(n.like_count)||0]}),a.jsxs("span",{children:[" ",Number(n.comment_count)||0]})]})]})]},s)})}):a.jsx("p",{className:"opacity-70",children:"No galleries found."})}const xy=20;function yy(){const e=Cl(),[t,r]=g.useState("PG"),[n,s]=g.useState(null),[l,i]=g.useState(void 0),[o,c]=g.useState(null),[u,d]=g.useState(null),f=m=>{e(`/galleries/${encodeURIComponent(m)}`)};g.useEffect(()=>{async function m(){try{const[x,j,T]=await Promise.allSettled([fetch(`${_e}/author/get.php`,{cache:"no-cache"}),fetch(`${_e}/socials/get.php`,{cache:"no-cache"}),fetch(`${_e}/galleries/list.php?page=1&limit=1000`,{cache:"no-cache"})]);if(x.status==="fulfilled"&&x.value.ok){const E=await x.value.json();E.success&&d(E.profile)}if(j.status==="fulfilled"&&j.value.ok){const E=await j.value.json();i(E.socials||{})}if(T.status==="fulfilled"&&T.value.ok){const A=((await T.value.json()).galleries||[]).map(L=>({id:Number(L.id)||0,slug:String(L.slug||""),title:String(L.title||"Untitled"),description:L.description?String(L.description):void 0,rating:L.rating==="X"?"X":"PG",image_count:Number(L.image_count)||0,like_count:Number(L.like_count)||0,comment_count:Number(L.comment_count)||0,hero_thumb:L.hero_thumb?String(L.hero_thumb):null,hero_width:L.hero_width?Number(L.hero_width):null,hero_height:L.hero_height?Number(L.hero_height):null}));c(A),s(null)}else throw new Error("Failed to fetch galleries list")}catch(x){console.error(x),s("Unable to load galleries. Ensure the new PHP API is uploaded and database configured.")}}m()},[]);const h=g.useMemo(()=>o?t==="PG"?o.filter(m=>(m.rating??"PG")==="PG"):o:[],[o,t]),y=(u==null?void 0:u.name)||"Author Name",k=`https://${(u==null?void 0:u.site_domain)||"example.com"}/galleries`,b=`Browse ${y}'s collection of artwork and illustrations. Featuring creative visual storytelling and artistic designs.`,p=`Image Galleries | ${y} | ${(u==null?void 0:u.bio)||"Author & Artist"}`;return a.jsxs("div",{className:"min-h-screen bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 transition-colors duration-200",children:[a.jsxs(Bs,{children:[a.jsx("title",{children:p}),a.jsx("meta",{name:"description",content:b}),a.jsx("link",{rel:"canonical",href:k}),a.jsx("meta",{property:"og:title",content:"Image Galleries"}),a.jsx("meta",{property:"og:description",content:b}),a.jsx("meta",{property:"og:type",content:"website"}),a.jsx("meta",{property:"og:url",content:k}),a.jsx("meta",{property:"og:site_name",content:y}),a.jsx("meta",{name:"twitter:card",content:"summary"}),a.jsx("meta",{name:"twitter:title",content:"Image Galleries"}),a.jsx("meta",{name:"twitter:description",content:b}),a.jsx("meta",{name:"twitter:creator",content:""}),a.jsx("meta",{name:"author",content:y}),a.jsx("meta",{name:"keywords",content:"digital artwork, concept art, character design, illustration gallery, visual art, creative design"}),a.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"ImageGallery",name:"Image Galleries",description:b,author:{"@type":"Person",name:y},url:k,inLanguage:"en-US"})})]}),a.jsx(On,{}),a.jsxs("div",{className:"relative z-10 mx-auto max-w-6xl px-4 py-8",children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"bg-white/70 border-gray-300 dark:bg-black/70 dark:border-white/20 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-neutral-300",children:[a.jsx(Ue,{to:"/",className:"hover:underline hover:text-gray-900 dark:hover:text-neutral-200",children:"Home"}),a.jsx("span",{children:"/"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:"Galleries"})]})})}),a.jsxs("div",{className:"mb-8 flex flex-wrap items-center justify-between gap-4",children:[a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 dark:text-white",children:"All Galleries"}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("select",{"aria-label":"Rating filter",value:t,onChange:m=>r(m.target.value),className:"rounded-lg border border-gray-300 bg-white text-gray-900 hover:border-gray-400 dark:border-white/30 dark:bg-black/70 dark:text-white dark:hover:border-white/50 px-3 py-2 text-sm transition-colors",children:[a.jsx("option",{value:"PG",children:"PG"}),a.jsx("option",{value:"X",children:"X"})]})})]}),a.jsx("main",{children:n&&!o?a.jsx("p",{className:"text-red-600 dark:text-red-400",children:n}):o?a.jsx(gy,{items:h,onOpen:f,showAdultBadge:t==="X"}):a.jsx("p",{children:"Loading"})}),l&&a.jsx(In,{socials:l,variant:"footer"})]})]})}function vy(){const{slug:e}=Ec(),[t,r]=g.useState(""),[n,s]=g.useState("PG"),[l,i]=g.useState(null),[o,c]=g.useState(void 0),[u,d]=g.useState(null),[f,h]=g.useState(null),[y,v]=g.useState([]),[k,b]=g.useState(1),[p,m]=g.useState(0),[x,j]=g.useState(!1),[T,E]=g.useState(!1),A=g.useRef(!1),L=g.useMemo(()=>{const K=new Map;return(u||[]).forEach(R=>K.set(R.slug,R.id)),K},[u]),I=g.useMemo(()=>!u||!e?null:u.find(K=>K.slug===e)||null,[u,e]);g.useEffect(()=>{async function K(){try{const[R,B,Q]=await Promise.allSettled([fetch(`${_e}/author/get.php`,{cache:"no-cache"}),fetch(`${_e}/socials/get.php`,{cache:"no-cache"}),fetch(`${_e}/galleries/list.php?page=1&limit=1000`,{cache:"no-cache"})]);if(R.status==="fulfilled"&&R.value.ok){const P=await R.value.json();P.success&&h(P.profile)}if(B.status==="fulfilled"&&B.value.ok){const P=await B.value.json();c(P.socials||{})}if(Q.status==="fulfilled"&&Q.value.ok){const V=((await Q.value.json()).galleries||[]).map(W=>({id:Number(W.id)||0,slug:String(W.slug||""),title:String(W.title||"Untitled"),description:W.description?String(W.description):void 0,rating:W.rating==="X"?"X":"PG",image_count:Number(W.image_count)||0,like_count:Number(W.like_count)||0,comment_count:Number(W.comment_count)||0,hero_thumb:W.hero_thumb?String(W.hero_thumb):null,hero_width:W.hero_width?Number(W.hero_width):null,hero_height:W.hero_height?Number(W.hero_height):null}));d(V),i(null)}else throw new Error("Failed to fetch galleries list")}catch(R){console.error(R),i("Unable to load galleries. Ensure the new PHP API is uploaded and database configured.")}}K()},[]),g.useEffect(()=>{v([]),b(1),m(0),E(!1)},[e,t]),g.useEffect(()=>{async function K(){if(!e)return;const R=L.get(e);if(R&&!A.current){A.current=!0,j(!0);try{const B=new URLSearchParams;B.set("gallery_id",String(R)),B.set("page",String(k)),B.set("limit",String(xy));const Q=t.trim();Q&&B.set("q",Q);const P=await fetch(`${_e}/images/gallery-list.php?`+B.toString(),{cache:"no-cache"});if(!P.ok)throw new Error("Failed to fetch images");const V=await P.json(),W=V.total??0,ee=(V.images||[]).map(q=>({id:typeof q.id=="number"?q.id:void 0,src:q.src,thumb:q.thumb,title:q.title??void 0,prompt:q.prompt??void 0,parameters:q.parameters??void 0,checkpoint:q.checkpoint??null,loras:Array.isArray(q.loras)?q.loras:[],width:typeof q.width=="number"?q.width:void 0,height:typeof q.height=="number"?q.height:void 0}));v(q=>{const ve=[...q,...ee];return E(ve.length<W),ve}),m(W),i(null)}catch(B){console.error(B),i("Failed to load images for this gallery.")}finally{j(!1),A.current=!1}}}e&&K()},[e,k,t,u]);const S=()=>{x||T&&b(K=>K+1)},F=(f==null?void 0:f.name)||"Author Name",X=(f==null?void 0:f.site_domain)||"example.com",J=`https://${X}/galleries/${e}`,M=(I==null?void 0:I.title)||"Gallery",C=I!=null&&I.description?`${I.description} - Artwork by ${F}.`:`View ${M} image gallery featuring artwork by ${F}. Creative visual storytelling and artistic designs.`,U=`${M} | ${F} | ${(f==null?void 0:f.bio)||"Author & Artist"}`;return a.jsxs("div",{className:"min-h-screen bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 transition-colors duration-200",children:[a.jsxs(Bs,{children:[a.jsx("title",{children:U}),a.jsx("meta",{name:"description",content:C}),a.jsx("link",{rel:"canonical",href:J}),a.jsx("meta",{property:"og:title",content:M}),a.jsx("meta",{property:"og:description",content:C}),a.jsx("meta",{property:"og:type",content:"website"}),a.jsx("meta",{property:"og:url",content:J}),a.jsx("meta",{property:"og:site_name",content:F}),(I==null?void 0:I.hero_thumb)&&a.jsx("meta",{property:"og:image",content:I.hero_thumb.startsWith("http")?I.hero_thumb:`https://${X}${I.hero_thumb}`}),a.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),a.jsx("meta",{name:"twitter:title",content:M}),a.jsx("meta",{name:"twitter:description",content:C}),a.jsx("meta",{name:"twitter:creator",content:""}),(I==null?void 0:I.hero_thumb)&&a.jsx("meta",{name:"twitter:image",content:I.hero_thumb.startsWith("http")?I.hero_thumb:`https://${X}${I.hero_thumb}`}),a.jsx("meta",{name:"author",content:F}),a.jsx("meta",{name:"keywords",content:"digital artwork, concept art, character design, illustration, visual art, creative design"}),a.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"ImageGallery",name:M,description:C,author:{"@type":"Person",name:F},url:J,inLanguage:"en-US",...(I==null?void 0:I.hero_thumb)&&{image:I.hero_thumb.startsWith("http")?I.hero_thumb:`https://${X}${I.hero_thumb}`}})})]}),a.jsx(On,{}),a.jsxs("div",{className:"relative z-10 mx-auto max-w-6xl px-4 py-8",children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"bg-white/70 border-gray-300 dark:bg-black/70 dark:border-white/20 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-neutral-300",children:[a.jsx(Ue,{to:"/",className:"hover:underline hover:text-gray-900 dark:hover:text-neutral-200",children:"Home"}),a.jsx("span",{children:"/"}),a.jsx(Ue,{to:"/galleries",className:"hover:underline hover:text-gray-900 dark:hover:text-neutral-200",children:"Galleries"}),a.jsx("span",{children:"/"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:(I==null?void 0:I.title)||e})]})})}),a.jsxs("div",{className:"mb-8 flex flex-wrap items-center justify-between gap-4",children:[a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 dark:text-white",children:(I==null?void 0:I.title)||"Gallery"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{"aria-label":"Rating filter",value:n,onChange:K=>s(K.target.value),className:"rounded-lg border border-gray-300 bg-white text-gray-900 hover:border-gray-400 dark:border-white/30 dark:bg-black/70 dark:text-white dark:hover:border-white/50 px-3 py-2 text-sm transition-colors",children:[a.jsx("option",{value:"PG",children:"PG"}),a.jsx("option",{value:"X",children:"X"})]}),a.jsx("input",{value:t,onChange:K=>r(K.target.value),placeholder:"Search prompt / LoRA / checkpoint",className:"w-full max-w-md rounded-xl bg-white text-gray-900 placeholder:text-gray-500 ring-gray-300 focus:ring-gray-500 dark:bg-black/70 dark:text-white dark:placeholder:text-neutral-400 dark:ring-white/30 dark:focus:ring-white/50 px-3 py-2 text-sm outline-none ring-1 transition-colors"})]})]}),a.jsx("main",{children:l?a.jsx("p",{className:"text-red-600 dark:text-red-400",children:l}):I?a.jsxs("section",{children:[I.description&&a.jsx("p",{className:"mb-4 opacity-80",children:I.description}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:y.map(K=>a.jsx(my,{im:K},String(K.id??K.src)))}),a.jsx("div",{className:"mt-6 flex items-center justify-center",children:x&&y.length===0?a.jsx("p",{children:"Loading"}):T?a.jsx("button",{onClick:S,disabled:x,className:"rounded-lg border border-gray-300 bg-white text-gray-900 hover:border-gray-400 dark:border-white/30 dark:bg-black/70 dark:text-white dark:hover:border-white/50 px-3 py-1 text-sm transition-colors disabled:opacity-60",children:x?"Loading":"Load more"}):y.length>=p?a.jsx("p",{className:"opacity-70 text-sm",children:"No more images."}):null})]}):a.jsx("p",{className:"opacity-70",children:"Gallery not found."})}),o&&a.jsx(In,{socials:o,variant:"footer"})]})]})}function ky(){return a.jsxs(El,{children:[a.jsx(Ne,{path:"/",element:a.jsx(yy,{})}),a.jsx(Ne,{path:"/:slug",element:a.jsx(vy,{})})]})}const Dt=_e;function al(e){if(!e)return null;const t=String(e);if(/^https?:\/\//i.test(t))return t;const r=t.replace(/^\/+/,"");return r.startsWith("api/uploads/")?`/${r}`:r.startsWith("uploads/")?`/api/${r}`:r.startsWith("uploads")?`/api/${r}`:t.startsWith("/api/uploads/")?t:t.startsWith("/uploads/")?`/api${t}`:t.startsWith("/")?t:`/${t}`}const mi=new Map,Pa=new Map,Aa=new Map;let gi=null;async function wy(){try{const t=await(await fetch(`${Dt}/stories/list.php?status=published`)).json();return t.success?(t.stories||[]).map(n=>({id:n.slug,title:n.title,blurb:n.description,cover:n.cover_image&&al(n.cover_image)||"/images/default-cover.jpg",breakImage:n.break_image&&al(n.break_image)||void 0,startIndex:1,status:n.status,genres:n.genres||[],primary_keywords:n.primary_keywords,longtail_keywords:n.longtail_keywords,target_audience:n.target_audience})):(console.error("Failed to load stories:",t.error),[])}catch(e){return console.error("Error fetching stories:",e),[]}}async function Pc(e){if(mi.has(e))return mi.get(e);try{const r=await(await fetch(`${Dt}/stories/list.php?slug=${encodeURIComponent(e)}`)).json();if(r.success&&r.stories&&r.stories.length>0){const n=r.stories[0],s={id:n.slug,title:n.title,blurb:n.description,cover:n.cover_image&&al(n.cover_image)||"/images/default-cover.jpg",breakImage:n.break_image&&al(n.break_image)||void 0,startIndex:1,status:n.status,genres:n.genres||[],primary_keywords:n.primary_keywords,longtail_keywords:n.longtail_keywords,target_audience:n.target_audience};return mi.set(e,s),s}else return null}catch(t){return console.error("Error fetching story:",t),null}}async function by(e,t=null){const r=e.id;if(Pa.has(r))return Pa.get(r);try{const s=await(await fetch(`${Dt}/chapters/list.php?story_slug=${encodeURIComponent(e.id)}`)).json();if(s.success){const l=(s.chapters||[]).map(i=>({num:i.chapter_number,title:i.title,id:i.id,status:i.status,like_count:i.like_count||0,comment_count:i.comment_count||0}));return Pa.set(r,l),l}else return console.error("Failed to load chapters:",s.error),[]}catch(n){return console.error("Error fetching chapters:",n),[]}}function jy(e){Pa.delete(e),Aa.delete(e)}async function Ny(e,t){const r=`${e.id}-${t}`;if(Aa.has(r))return Aa.get(r);try{const s=await(await fetch(`${Dt}/chapters/list.php?story_slug=${encodeURIComponent(e.id)}&chapter_number=${t}`)).json();if(s.success&&s.chapters&&s.chapters.length>0){const i=s.chapters[0].content||"";return Aa.set(r,i),i}else throw new Error("Chapter not found")}catch(n){throw console.error("Error fetching chapter content:",n),n}}async function Sf(e,t){try{const n=await(await fetch(`${Dt}/chapters/list.php?story_slug=${encodeURIComponent(e.id)}&chapter_number=${t}`)).json();if(n.success&&n.chapters&&n.chapters.length>0){const s=n.chapters[0];return{id:s.id,num:s.chapter_number,title:s.title,status:s.status,like_count:s.like_count||0,comment_count:s.comment_count||0,created_at:s.created_at,updated_at:s.updated_at}}else return null}catch(r){return console.error("Error fetching chapter details:",r),null}}async function Sy(e){try{return await(await fetch(`${Dt}/chapters/like.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapter_id:e})})).json()}catch(t){return console.error("Error liking chapter:",t),{success:!1}}}async function _y(e){try{return await(await fetch(`${Dt}/chapters/like.php?chapter_id=${encodeURIComponent(e)}`)).json()}catch(t){return console.error("Error fetching like status:",t),{success:!1,like_count:0,user_liked:!1}}}async function Cy(e,t,r){try{return await(await fetch(`${Dt}/chapters/comments/create.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapter_id:e,author_name:t||"Anonymous",content:r})})).json()}catch(n){return console.error("Error adding comment:",n),{success:!1}}}async function Ey(e){try{const r=await(await fetch(`${Dt}/chapters/comments/list.php?chapter_id=${e}`)).json();return r.success?r.comments||[]:[]}catch(t){return console.error("Error fetching comments:",t),[]}}function Ac(e){return`story-progress:${e}`}function $c(e){try{const t=localStorage.getItem(Ac(e));return t?JSON.parse(t):null}catch{return null}}function Ty(e,t){try{localStorage.setItem(Ac(e),JSON.stringify(t))}catch{}}function Py(e){try{localStorage.removeItem(Ac(e))}catch{}}async function Ay(e){const t=await by(e);return t.length>0?Math.max(...t.map(r=>r.num)):0}async function _f(){if(gi)return gi;try{const t=await(await fetch(`${Dt}/author/get.php`)).json();return t.success&&t.profile?(gi=t.profile,t.profile):{name:"O.C. Wanderer",bio:"Sci-Fi & Fantasy Author",tagline:"Worlds of adventure, danger, and love",profile_image:null,background_image_light:null,background_image_dark:null,site_domain:"authorsite.com",updated_at:new Date().toISOString()}}catch(e){return console.error("Error fetching author profile:",e),{name:"O.C. Wanderer",bio:"Sci-Fi & Fantasy Author",tagline:"Worlds of adventure, danger, and love",profile_image:null,background_image_light:null,background_image_dark:null,site_domain:"authorsite.com",updated_at:new Date().toISOString()}}}function Lc(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Yr=Lc();function Cf(e){Yr=e}var xs={exec:()=>null};function ce(e,t=""){let r=typeof e=="string"?e:e.source,n={replace:(s,l)=>{let i=typeof l=="string"?l:l.source;return i=i.replace(Ge.caret,"$1"),r=r.replace(s,i),n},getRegex:()=>new RegExp(r,t)};return n}var Ge={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},$y=/^(?:[ \t]*(?:\n|$))+/,Ly=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Ry=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ws=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Iy=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Rc=/(?:[*+-]|\d{1,9}[.)])/,Ef=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Tf=ce(Ef).replace(/bull/g,Rc).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Oy=ce(Ef).replace(/bull/g,Rc).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Ic=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,My=/^[^\n]+/,Oc=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Dy=ce(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Oc).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),zy=ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Rc).getRegex(),Tl="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Mc=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Fy=ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Mc).replace("tag",Tl).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Pf=ce(Ic).replace("hr",Ws).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tl).getRegex(),Uy=ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Pf).getRegex(),Dc={blockquote:Uy,code:Ly,def:Dy,fences:Ry,heading:Iy,hr:Ws,html:Fy,lheading:Tf,list:zy,newline:$y,paragraph:Pf,table:xs,text:My},Ed=ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ws).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tl).getRegex(),By={...Dc,lheading:Oy,table:Ed,paragraph:ce(Ic).replace("hr",Ws).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ed).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tl).getRegex()},Hy={...Dc,html:ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Mc).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:xs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ce(Ic).replace("hr",Ws).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Tf).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Wy=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Vy=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Af=/^( {2,}|\\)\n(?!\s*$)/,Gy=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pl=/[\p{P}\p{S}]/u,zc=/[\s\p{P}\p{S}]/u,$f=/[^\s\p{P}\p{S}]/u,Qy=ce(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,zc).getRegex(),Lf=/(?!~)[\p{P}\p{S}]/u,Yy=/(?!~)[\s\p{P}\p{S}]/u,Ky=/(?:[^\s\p{P}\p{S}]|~)/u,qy=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,Rf=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Zy=ce(Rf,"u").replace(/punct/g,Pl).getRegex(),Xy=ce(Rf,"u").replace(/punct/g,Lf).getRegex(),If="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Jy=ce(If,"gu").replace(/notPunctSpace/g,$f).replace(/punctSpace/g,zc).replace(/punct/g,Pl).getRegex(),ev=ce(If,"gu").replace(/notPunctSpace/g,Ky).replace(/punctSpace/g,Yy).replace(/punct/g,Lf).getRegex(),tv=ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,$f).replace(/punctSpace/g,zc).replace(/punct/g,Pl).getRegex(),rv=ce(/\\(punct)/,"gu").replace(/punct/g,Pl).getRegex(),nv=ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),sv=ce(Mc).replace("(?:-->|$)","-->").getRegex(),av=ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",sv).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ll=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,lv=ce(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ll).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Of=ce(/^!?\[(label)\]\[(ref)\]/).replace("label",ll).replace("ref",Oc).getRegex(),Mf=ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",Oc).getRegex(),iv=ce("reflink|nolink(?!\\()","g").replace("reflink",Of).replace("nolink",Mf).getRegex(),Fc={_backpedal:xs,anyPunctuation:rv,autolink:nv,blockSkip:qy,br:Af,code:Vy,del:xs,emStrongLDelim:Zy,emStrongRDelimAst:Jy,emStrongRDelimUnd:tv,escape:Wy,link:lv,nolink:Mf,punctuation:Qy,reflink:Of,reflinkSearch:iv,tag:av,text:Gy,url:xs},ov={...Fc,link:ce(/^!?\[(label)\]\((.*?)\)/).replace("label",ll).getRegex(),reflink:ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ll).getRegex()},So={...Fc,emStrongRDelimAst:ev,emStrongLDelim:Xy,url:ce(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},cv={...So,br:ce(Af).replace("{2,}","*").getRegex(),text:ce(So.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ha={normal:Dc,gfm:By,pedantic:Hy},Zn={normal:Fc,gfm:So,breaks:cv,pedantic:ov},uv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Td=e=>uv[e];function Lt(e,t){if(t){if(Ge.escapeTest.test(e))return e.replace(Ge.escapeReplace,Td)}else if(Ge.escapeTestNoEncode.test(e))return e.replace(Ge.escapeReplaceNoEncode,Td);return e}function Pd(e){try{e=encodeURI(e).replace(Ge.percentDecode,"%")}catch{return null}return e}function Ad(e,t){var l;let r=e.replace(Ge.findPipe,(i,o,c)=>{let u=!1,d=o;for(;--d>=0&&c[d]==="\\";)u=!u;return u?"|":" |"}),n=r.split(Ge.splitPipe),s=0;if(n[0].trim()||n.shift(),n.length>0&&!((l=n.at(-1))!=null&&l.trim())&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(Ge.slashPipe,"|");return n}function Xn(e,t,r){let n=e.length;if(n===0)return"";let s=0;for(;s<n&&e.charAt(n-s-1)===t;)s++;return e.slice(0,n-s)}function dv(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}function $d(e,t,r,n,s){let l=t.href,i=t.title||null,o=e[1].replace(s.other.outputLinkReplace,"$1");n.state.inLink=!0;let c={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:l,title:i,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,c}function pv(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(n===null)return t;let s=n[1];return t.split(`
`).map(l=>{let i=l.match(r.other.beginningSpace);if(i===null)return l;let[o]=i;return o.length>=s.length?l.slice(s.length):l}).join(`
`)}var il=class{constructor(e){re(this,"options");re(this,"rules");re(this,"lexer");this.options=e||Yr}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Xn(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],n=pv(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){let n=Xn(r,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(r=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Xn(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=Xn(t[0],`
`).split(`
`),n="",s="",l=[];for(;r.length>0;){let i=!1,o=[],c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))o.push(r[c]),i=!0;else if(!i)o.push(r[c]);else break;r=r.slice(c);let u=o.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${u}`:u,s=s?`${s}
${d}`:d;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,l,!0),this.lexer.state.top=f,r.length===0)break;let h=l.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){let y=h,v=y.raw+`
`+r.join(`
`),k=this.blockquote(v);l[l.length-1]=k,n=n.substring(0,n.length-y.raw.length)+k.raw,s=s.substring(0,s.length-y.text.length)+k.text;break}else if((h==null?void 0:h.type)==="list"){let y=h,v=y.raw+`
`+r.join(`
`),k=this.list(v);l[l.length-1]=k,n=n.substring(0,n.length-h.raw.length)+k.raw,s=s.substring(0,s.length-y.raw.length)+k.raw,r=v.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:l,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),n=r.length>1,s={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");let l=this.rules.other.listItemRegex(r),i=!1;for(;e;){let c=!1,u="",d="";if(!(t=l.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,p=>" ".repeat(3*p.length)),h=e.split(`
`,1)[0],y=!f.trim(),v=0;if(this.options.pedantic?(v=2,d=f.trimStart()):y?v=t[1].length+1:(v=t[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,d=f.slice(v),v+=t[1].length),y&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,e=e.substring(h.length+1),c=!0),!c){let p=this.rules.other.nextBulletRegex(v),m=this.rules.other.hrRegex(v),x=this.rules.other.fencesBeginRegex(v),j=this.rules.other.headingBeginRegex(v),T=this.rules.other.htmlBeginRegex(v);for(;e;){let E=e.split(`
`,1)[0],A;if(h=E,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),A=h):A=h.replace(this.rules.other.tabCharGlobal,"    "),x.test(h)||j.test(h)||T.test(h)||p.test(h)||m.test(h))break;if(A.search(this.rules.other.nonSpaceChar)>=v||!h.trim())d+=`
`+A.slice(v);else{if(y||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||x.test(f)||j.test(f)||m.test(f))break;d+=`
`+h}!y&&!h.trim()&&(y=!0),u+=E+`
`,e=e.substring(E.length+1),f=A.slice(v)}}s.loose||(i?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(i=!0));let k=null,b;this.options.gfm&&(k=this.rules.other.listIsTask.exec(d),k&&(b=k[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!k,checked:b,loose:!1,text:d,tokens:[]}),s.raw+=u}let o=s.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){let u=s.items[c].tokens.filter(f=>f.type==="space"),d=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));s.loose=d}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:n,title:s}}}table(e){var i;let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=Ad(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(i=t[3])!=null&&i.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(let o of n)this.rules.other.tableAlignRight.test(o)?l.align.push("right"):this.rules.other.tableAlignCenter.test(o)?l.align.push("center"):this.rules.other.tableAlignLeft.test(o)?l.align.push("left"):l.align.push(null);for(let o=0;o<r.length;o++)l.header.push({text:r[o],tokens:this.lexer.inline(r[o]),header:!0,align:l.align[o]});for(let o of s)l.rows.push(Ad(o,l.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:l.align[u]})));return l}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let l=Xn(r.slice(0,-1),"\\");if((r.length-l.length)%2===0)return}else{let l=dv(t[2],"()");if(l===-2)return;if(l>-1){let i=(t[0].indexOf("!")===0?5:4)+t[1].length+l;t[2]=t[2].substring(0,l),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let n=t[2],s="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(n);l&&(n=l[1],s=l[3])}else s=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?n=n.slice(1):n=n.slice(1,-1)),$d(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let n=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[n.toLowerCase()];if(!s){let l=r[0].charAt(0);return{type:"text",raw:l,text:l}}return $d(r,s,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!r||this.rules.inline.punctuation.exec(r))){let s=[...n[0]].length-1,l,i,o=s,c=0,u=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+s);(n=u.exec(t))!=null;){if(l=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!l)continue;if(i=[...l].length,n[3]||n[4]){o+=i;continue}else if((n[5]||n[6])&&s%3&&!((s+i)%3)){c+=i;continue}if(o-=i,o>0)continue;i=Math.min(i,i+o+c);let d=[...n[0]][0].length,f=e.slice(0,s+n.index+d+i);if(Math.min(s,i)%2){let y=f.slice(1,-1);return{type:"em",raw:f,text:y,tokens:this.lexer.inlineTokens(y)}}let h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return n&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,n;return t[2]==="@"?(r=t[1],n="mailto:"+r):(r=t[1],n=r),{type:"link",raw:t[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let t;if(t=this.rules.inline.url.exec(e)){let n,s;if(t[2]==="@")n=t[0],s="mailto:"+n;else{let l;do l=t[0],t[0]=((r=this.rules.inline._backpedal.exec(t[0]))==null?void 0:r[0])??"";while(l!==t[0]);n=t[0],t[1]==="www."?s="http://"+t[0]:s=t[0]}return{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},Yt=class _o{constructor(t){re(this,"tokens");re(this,"options");re(this,"state");re(this,"tokenizer");re(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Yr,this.options.tokenizer=this.options.tokenizer||new il,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Ge,block:ha.normal,inline:Zn.normal};this.options.pedantic?(r.block=ha.pedantic,r.inline=Zn.pedantic):this.options.gfm&&(r.block=ha.gfm,this.options.breaks?r.inline=Zn.breaks:r.inline=Zn.gfm),this.tokenizer.rules=r}static get rules(){return{block:ha,inline:Zn}}static lex(t,r){return new _o(r).lex(t)}static lexInline(t,r){return new _o(r).inlineTokens(t)}lex(t){t=t.replace(Ge.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],n=!1){var s,l,i;for(this.options.pedantic&&(t=t.replace(Ge.tabCharGlobal,"    ").replace(Ge.spaceLine,""));t;){let o;if((l=(s=this.options.extensions)==null?void 0:s.block)!=null&&l.some(u=>(o=u.call({lexer:this},t,r))?(t=t.substring(o.raw.length),r.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let u=r.at(-1);o.raw.length===1&&u!==void 0?u.raw+=`
`:r.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let u=r.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+o.raw,u.text+=`
`+o.text,this.inlineQueue.at(-1).src=u.text):r.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let u=r.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+o.raw,u.text+=`
`+o.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},r.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),r.push(o);continue}let c=t;if((i=this.options.extensions)!=null&&i.startBlock){let u=1/0,d=t.slice(1),f;this.options.extensions.startBlock.forEach(h=>{f=h.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(c=t.substring(0,u+1))}if(this.state.top&&(o=this.tokenizer.paragraph(c))){let u=r.at(-1);n&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+o.raw,u.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):r.push(o),n=c.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let u=r.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+o.raw,u.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):r.push(o);continue}if(t){let u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){var o,c,u;let n=t,s=null;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)d.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,s.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let l=!1,i="";for(;t;){l||(i=""),l=!1;let d;if((c=(o=this.options.extensions)==null?void 0:o.inline)!=null&&c.some(h=>(d=h.call({lexer:this},t,r))?(t=t.substring(d.raw.length),r.push(d),!0):!1))continue;if(d=this.tokenizer.escape(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.tag(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.link(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(d.raw.length);let h=r.at(-1);d.type==="text"&&(h==null?void 0:h.type)==="text"?(h.raw+=d.raw,h.text+=d.text):r.push(d);continue}if(d=this.tokenizer.emStrong(t,n,i)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.codespan(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.br(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.del(t)){t=t.substring(d.raw.length),r.push(d);continue}if(d=this.tokenizer.autolink(t)){t=t.substring(d.raw.length),r.push(d);continue}if(!this.state.inLink&&(d=this.tokenizer.url(t))){t=t.substring(d.raw.length),r.push(d);continue}let f=t;if((u=this.options.extensions)!=null&&u.startInline){let h=1/0,y=t.slice(1),v;this.options.extensions.startInline.forEach(k=>{v=k.call({lexer:this},y),typeof v=="number"&&v>=0&&(h=Math.min(h,v))}),h<1/0&&h>=0&&(f=t.substring(0,h+1))}if(d=this.tokenizer.inlineText(f)){t=t.substring(d.raw.length),d.raw.slice(-1)!=="_"&&(i=d.raw.slice(-1)),l=!0;let h=r.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=d.raw,h.text+=d.text):r.push(d);continue}if(t){let h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return r}},ol=class{constructor(e){re(this,"options");re(this,"parser");this.options=e||Yr}space(e){return""}code({text:e,lang:t,escaped:r}){var l;let n=(l=(t||"").match(Ge.notSpaceStart))==null?void 0:l[0],s=e.replace(Ge.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Lt(n)+'">'+(r?s:Lt(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:Lt(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,n="";for(let i=0;i<e.items.length;i++){let o=e.items[i];n+=this.listitem(o)}let s=t?"ol":"ul",l=t&&r!==1?' start="'+r+'"':"";return"<"+s+l+`>
`+n+"</"+s+`>
`}listitem(e){var r;let t="";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+Lt(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let n="";for(let s=0;s<e.rows.length;s++){let l=e.rows[s];r="";for(let i=0;i<l.length;i++)r+=this.tablecell(l[i]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Lt(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let n=this.parser.parseInline(r),s=Pd(e);if(s===null)return n;e=s;let l='<a href="'+e+'"';return t&&(l+=' title="'+Lt(t)+'"'),l+=">"+n+"</a>",l}image({href:e,title:t,text:r,tokens:n}){n&&(r=this.parser.parseInline(n,this.parser.textRenderer));let s=Pd(e);if(s===null)return Lt(r);e=s;let l=`<img src="${e}" alt="${r}"`;return t&&(l+=` title="${Lt(t)}"`),l+=">",l}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Lt(e.text)}},Uc=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Kt=class Co{constructor(t){re(this,"options");re(this,"renderer");re(this,"textRenderer");this.options=t||Yr,this.options.renderer=this.options.renderer||new ol,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Uc}static parse(t,r){return new Co(r).parse(t)}static parseInline(t,r){return new Co(r).parseInline(t)}parse(t,r=!0){var s,l;let n="";for(let i=0;i<t.length;i++){let o=t[i];if((l=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&l[o.type]){let u=o,d=this.options.extensions.renderers[u.type].call({parser:this},u);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(u.type)){n+=d||"";continue}}let c=o;switch(c.type){case"space":{n+=this.renderer.space(c);continue}case"hr":{n+=this.renderer.hr(c);continue}case"heading":{n+=this.renderer.heading(c);continue}case"code":{n+=this.renderer.code(c);continue}case"table":{n+=this.renderer.table(c);continue}case"blockquote":{n+=this.renderer.blockquote(c);continue}case"list":{n+=this.renderer.list(c);continue}case"html":{n+=this.renderer.html(c);continue}case"def":{n+=this.renderer.def(c);continue}case"paragraph":{n+=this.renderer.paragraph(c);continue}case"text":{let u=c,d=this.renderer.text(u);for(;i+1<t.length&&t[i+1].type==="text";)u=t[++i],d+=`
`+this.renderer.text(u);r?n+=this.renderer.paragraph({type:"paragraph",raw:d,text:d,tokens:[{type:"text",raw:d,text:d,escaped:!0}]}):n+=d;continue}default:{let u='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}parseInline(t,r=this.renderer){var s,l;let n="";for(let i=0;i<t.length;i++){let o=t[i];if((l=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&l[o.type]){let u=this.options.extensions.renderers[o.type].call({parser:this},o);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=u||"";continue}}let c=o;switch(c.type){case"escape":{n+=r.text(c);break}case"html":{n+=r.html(c);break}case"link":{n+=r.link(c);break}case"image":{n+=r.image(c);break}case"strong":{n+=r.strong(c);break}case"em":{n+=r.em(c);break}case"codespan":{n+=r.codespan(c);break}case"br":{n+=r.br(c);break}case"del":{n+=r.del(c);break}case"text":{n+=r.text(c);break}default:{let u='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}},ji,$a=(ji=class{constructor(e){re(this,"options");re(this,"block");this.options=e||Yr}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Yt.lex:Yt.lexInline}provideParser(){return this.block?Kt.parse:Kt.parseInline}},re(ji,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),ji),hv=class{constructor(...e){re(this,"defaults",Lc());re(this,"options",this.setOptions);re(this,"parse",this.parseMarkdown(!0));re(this,"parseInline",this.parseMarkdown(!1));re(this,"Parser",Kt);re(this,"Renderer",ol);re(this,"TextRenderer",Uc);re(this,"Lexer",Yt);re(this,"Tokenizer",il);re(this,"Hooks",$a);this.use(...e)}walkTokens(e,t){var n,s;let r=[];for(let l of e)switch(r=r.concat(t.call(this,l)),l.type){case"table":{let i=l;for(let o of i.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of i.rows)for(let c of o)r=r.concat(this.walkTokens(c.tokens,t));break}case"list":{let i=l;r=r.concat(this.walkTokens(i.items,t));break}default:{let i=l;(s=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&s[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{let c=i[o].flat(1/0);r=r.concat(this.walkTokens(c,t))}):i.tokens&&(r=r.concat(this.walkTokens(i.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let n={...r};if(n.async=this.defaults.async||n.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let l=t.renderers[s.name];l?t.renderers[s.name]=function(...i){let o=s.renderer.apply(this,i);return o===!1&&(o=l.apply(this,i)),o}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=t[s.level];l?l.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),n.extensions=t),r.renderer){let s=this.defaults.renderer||new ol(this.defaults);for(let l in r.renderer){if(!(l in s))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let i=l,o=r.renderer[i],c=s[i];s[i]=(...u)=>{let d=o.apply(s,u);return d===!1&&(d=c.apply(s,u)),d||""}}n.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new il(this.defaults);for(let l in r.tokenizer){if(!(l in s))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let i=l,o=r.tokenizer[i],c=s[i];s[i]=(...u)=>{let d=o.apply(s,u);return d===!1&&(d=c.apply(s,u)),d}}n.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new $a;for(let l in r.hooks){if(!(l in s))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let i=l,o=r.hooks[i],c=s[i];$a.passThroughHooks.has(l)?s[i]=u=>{if(this.defaults.async)return Promise.resolve(o.call(s,u)).then(f=>c.call(s,f));let d=o.call(s,u);return c.call(s,d)}:s[i]=(...u)=>{let d=o.apply(s,u);return d===!1&&(d=c.apply(s,u)),d}}n.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,l=r.walkTokens;n.walkTokens=function(i){let o=[];return o.push(l.call(this,i)),s&&(o=o.concat(s.call(this,i))),o}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Yt.lex(e,t??this.defaults)}parser(e,t){return Kt.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{let n={...r},s={...this.defaults,...n},l=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&n.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);let i=s.hooks?s.hooks.provideLexer():e?Yt.lex:Yt.lexInline,o=s.hooks?s.hooks.provideParser():e?Kt.parse:Kt.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(t):t).then(c=>i(c,s)).then(c=>s.hooks?s.hooks.processAllTokens(c):c).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>o(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(l);try{s.hooks&&(t=s.hooks.preprocess(t));let c=i(t,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let u=o(c,s);return s.hooks&&(u=s.hooks.postprocess(u)),u}catch(c){return l(c)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let n="<p>An error occurred:</p><pre>"+Lt(r.message+"",!0)+"</pre>";return t?Promise.resolve(n):n}if(t)return Promise.reject(r);throw r}}},Wr=new hv;function oe(e,t){return Wr.parse(e,t)}oe.options=oe.setOptions=function(e){return Wr.setOptions(e),oe.defaults=Wr.defaults,Cf(oe.defaults),oe};oe.getDefaults=Lc;oe.defaults=Yr;oe.use=function(...e){return Wr.use(...e),oe.defaults=Wr.defaults,Cf(oe.defaults),oe};oe.walkTokens=function(e,t){return Wr.walkTokens(e,t)};oe.parseInline=Wr.parseInline;oe.Parser=Kt;oe.parser=Kt.parse;oe.Renderer=ol;oe.TextRenderer=Uc;oe.Lexer=Yt;oe.lexer=Yt.lex;oe.Tokenizer=il;oe.Hooks=$a;oe.parse=oe;oe.options;oe.setOptions;oe.use;oe.walkTokens;oe.parseInline;Kt.parse;Yt.lex;/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Df,setPrototypeOf:Ld,isFrozen:fv,getPrototypeOf:mv,getOwnPropertyDescriptor:gv}=Object;let{freeze:Ye,seal:kt,create:zf}=Object,{apply:Eo,construct:To}=typeof Reflect<"u"&&Reflect;Ye||(Ye=function(t){return t});kt||(kt=function(t){return t});Eo||(Eo=function(t,r,n){return t.apply(r,n)});To||(To=function(t,r){return new t(...r)});const fa=Ke(Array.prototype.forEach),xv=Ke(Array.prototype.lastIndexOf),Rd=Ke(Array.prototype.pop),Jn=Ke(Array.prototype.push),yv=Ke(Array.prototype.splice),La=Ke(String.prototype.toLowerCase),xi=Ke(String.prototype.toString),Id=Ke(String.prototype.match),es=Ke(String.prototype.replace),vv=Ke(String.prototype.indexOf),kv=Ke(String.prototype.trim),bt=Ke(Object.prototype.hasOwnProperty),We=Ke(RegExp.prototype.test),ts=wv(TypeError);function Ke(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return Eo(e,t,n)}}function wv(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return To(e,r)}}function ne(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:La;Ld&&Ld(e,null);let n=t.length;for(;n--;){let s=t[n];if(typeof s=="string"){const l=r(s);l!==s&&(fv(t)||(t[n]=l),s=l)}e[s]=!0}return e}function bv(e){for(let t=0;t<e.length;t++)bt(e,t)||(e[t]=null);return e}function Bt(e){const t=zf(null);for(const[r,n]of Df(e))bt(e,r)&&(Array.isArray(n)?t[r]=bv(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=Bt(n):t[r]=n);return t}function rs(e,t){for(;e!==null;){const n=gv(e,t);if(n){if(n.get)return Ke(n.get);if(typeof n.value=="function")return Ke(n.value)}e=mv(e)}function r(){return null}return r}const Od=Ye(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),yi=Ye(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vi=Ye(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),jv=Ye(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ki=Ye(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Nv=Ye(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Md=Ye(["#text"]),Dd=Ye(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),wi=Ye(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),zd=Ye(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ma=Ye(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Sv=kt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_v=kt(/<%[\w\W]*|[\w\W]*%>/gm),Cv=kt(/\$\{[\w\W]*/gm),Ev=kt(/^data-[\-\w.\u00B7-\uFFFF]+$/),Tv=kt(/^aria-[\-\w]+$/),Ff=kt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Pv=kt(/^(?:\w+script|data):/i),Av=kt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Uf=kt(/^html$/i),$v=kt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Fd=Object.freeze({__proto__:null,ARIA_ATTR:Tv,ATTR_WHITESPACE:Av,CUSTOM_ELEMENT:$v,DATA_ATTR:Ev,DOCTYPE_NAME:Uf,ERB_EXPR:_v,IS_ALLOWED_URI:Ff,IS_SCRIPT_OR_DATA:Pv,MUSTACHE_EXPR:Sv,TMPLIT_EXPR:Cv});const ns={element:1,text:3,progressingInstruction:7,comment:8,document:9},Lv=function(){return typeof window>"u"?null:window},Rv=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(n=r.getAttribute(s));const l="dompurify"+(n?"#"+n:"");try{return t.createPolicy(l,{createHTML(i){return i},createScriptURL(i){return i}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},Ud=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Bf(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lv();const t=Z=>Bf(Z);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==ns.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,s=n.currentScript,{DocumentFragment:l,HTMLTemplateElement:i,Node:o,Element:c,NodeFilter:u,NamedNodeMap:d=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:h,trustedTypes:y}=e,v=c.prototype,k=rs(v,"cloneNode"),b=rs(v,"remove"),p=rs(v,"nextSibling"),m=rs(v,"childNodes"),x=rs(v,"parentNode");if(typeof i=="function"){const Z=r.createElement("template");Z.content&&Z.content.ownerDocument&&(r=Z.content.ownerDocument)}let j,T="";const{implementation:E,createNodeIterator:A,createDocumentFragment:L,getElementsByTagName:I}=r,{importNode:S}=n;let F=Ud();t.isSupported=typeof Df=="function"&&typeof x=="function"&&E&&E.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:X,ERB_EXPR:J,TMPLIT_EXPR:M,DATA_ATTR:C,ARIA_ATTR:U,IS_SCRIPT_OR_DATA:K,ATTR_WHITESPACE:R,CUSTOM_ELEMENT:B}=Fd;let{IS_ALLOWED_URI:Q}=Fd,P=null;const V=ne({},[...Od,...yi,...vi,...ki,...Md]);let W=null;const ae=ne({},[...Dd,...wi,...zd,...ma]);let ee=Object.seal(zf(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,ve=null,_=!0,z=!0,le=!1,He=!0,Xe=!1,Pt=!0,pt=!1,Mn=!1,Dn=!1,nr=!1,N=!1,$=!1,H=!0,te=!1;const we="user-content-";let at=!0,sr=!1,ar={},Kr=null;const Bc=ne({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Hc=null;const Wc=ne({},["audio","video","img","source","image","track"]);let $l=null;const Vc=ne({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Vs="http://www.w3.org/1998/Math/MathML",Gs="http://www.w3.org/2000/svg",zt="http://www.w3.org/1999/xhtml";let qr=zt,Ll=!1,Rl=null;const Vf=ne({},[Vs,Gs,zt],xi);let Qs=ne({},["mi","mo","mn","ms","mtext"]),Ys=ne({},["annotation-xml"]);const Gf=ne({},["title","style","font","a","script"]);let zn=null;const Qf=["application/xhtml+xml","text/html"],Yf="text/html";let Pe=null,Zr=null;const Kf=r.createElement("form"),Gc=function(w){return w instanceof RegExp||w instanceof Function},Il=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Zr&&Zr===w)){if((!w||typeof w!="object")&&(w={}),w=Bt(w),zn=Qf.indexOf(w.PARSER_MEDIA_TYPE)===-1?Yf:w.PARSER_MEDIA_TYPE,Pe=zn==="application/xhtml+xml"?xi:La,P=bt(w,"ALLOWED_TAGS")?ne({},w.ALLOWED_TAGS,Pe):V,W=bt(w,"ALLOWED_ATTR")?ne({},w.ALLOWED_ATTR,Pe):ae,Rl=bt(w,"ALLOWED_NAMESPACES")?ne({},w.ALLOWED_NAMESPACES,xi):Vf,$l=bt(w,"ADD_URI_SAFE_ATTR")?ne(Bt(Vc),w.ADD_URI_SAFE_ATTR,Pe):Vc,Hc=bt(w,"ADD_DATA_URI_TAGS")?ne(Bt(Wc),w.ADD_DATA_URI_TAGS,Pe):Wc,Kr=bt(w,"FORBID_CONTENTS")?ne({},w.FORBID_CONTENTS,Pe):Bc,q=bt(w,"FORBID_TAGS")?ne({},w.FORBID_TAGS,Pe):Bt({}),ve=bt(w,"FORBID_ATTR")?ne({},w.FORBID_ATTR,Pe):Bt({}),ar=bt(w,"USE_PROFILES")?w.USE_PROFILES:!1,_=w.ALLOW_ARIA_ATTR!==!1,z=w.ALLOW_DATA_ATTR!==!1,le=w.ALLOW_UNKNOWN_PROTOCOLS||!1,He=w.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Xe=w.SAFE_FOR_TEMPLATES||!1,Pt=w.SAFE_FOR_XML!==!1,pt=w.WHOLE_DOCUMENT||!1,nr=w.RETURN_DOM||!1,N=w.RETURN_DOM_FRAGMENT||!1,$=w.RETURN_TRUSTED_TYPE||!1,Dn=w.FORCE_BODY||!1,H=w.SANITIZE_DOM!==!1,te=w.SANITIZE_NAMED_PROPS||!1,at=w.KEEP_CONTENT!==!1,sr=w.IN_PLACE||!1,Q=w.ALLOWED_URI_REGEXP||Ff,qr=w.NAMESPACE||zt,Qs=w.MATHML_TEXT_INTEGRATION_POINTS||Qs,Ys=w.HTML_INTEGRATION_POINTS||Ys,ee=w.CUSTOM_ELEMENT_HANDLING||{},w.CUSTOM_ELEMENT_HANDLING&&Gc(w.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=w.CUSTOM_ELEMENT_HANDLING.tagNameCheck),w.CUSTOM_ELEMENT_HANDLING&&Gc(w.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=w.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),w.CUSTOM_ELEMENT_HANDLING&&typeof w.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=w.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Xe&&(z=!1),N&&(nr=!0),ar&&(P=ne({},Md),W=[],ar.html===!0&&(ne(P,Od),ne(W,Dd)),ar.svg===!0&&(ne(P,yi),ne(W,wi),ne(W,ma)),ar.svgFilters===!0&&(ne(P,vi),ne(W,wi),ne(W,ma)),ar.mathMl===!0&&(ne(P,ki),ne(W,zd),ne(W,ma))),w.ADD_TAGS&&(P===V&&(P=Bt(P)),ne(P,w.ADD_TAGS,Pe)),w.ADD_ATTR&&(W===ae&&(W=Bt(W)),ne(W,w.ADD_ATTR,Pe)),w.ADD_URI_SAFE_ATTR&&ne($l,w.ADD_URI_SAFE_ATTR,Pe),w.FORBID_CONTENTS&&(Kr===Bc&&(Kr=Bt(Kr)),ne(Kr,w.FORBID_CONTENTS,Pe)),at&&(P["#text"]=!0),pt&&ne(P,["html","head","body"]),P.table&&(ne(P,["tbody"]),delete q.tbody),w.TRUSTED_TYPES_POLICY){if(typeof w.TRUSTED_TYPES_POLICY.createHTML!="function")throw ts('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof w.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ts('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');j=w.TRUSTED_TYPES_POLICY,T=j.createHTML("")}else j===void 0&&(j=Rv(y,s)),j!==null&&typeof T=="string"&&(T=j.createHTML(""));Ye&&Ye(w),Zr=w}},Qc=ne({},[...yi,...vi,...jv]),Yc=ne({},[...ki,...Nv]),qf=function(w){let D=x(w);(!D||!D.tagName)&&(D={namespaceURI:qr,tagName:"template"});const Y=La(w.tagName),fe=La(D.tagName);return Rl[w.namespaceURI]?w.namespaceURI===Gs?D.namespaceURI===zt?Y==="svg":D.namespaceURI===Vs?Y==="svg"&&(fe==="annotation-xml"||Qs[fe]):!!Qc[Y]:w.namespaceURI===Vs?D.namespaceURI===zt?Y==="math":D.namespaceURI===Gs?Y==="math"&&Ys[fe]:!!Yc[Y]:w.namespaceURI===zt?D.namespaceURI===Gs&&!Ys[fe]||D.namespaceURI===Vs&&!Qs[fe]?!1:!Yc[Y]&&(Gf[Y]||!Qc[Y]):!!(zn==="application/xhtml+xml"&&Rl[w.namespaceURI]):!1},At=function(w){Jn(t.removed,{element:w});try{x(w).removeChild(w)}catch{b(w)}},Xr=function(w,D){try{Jn(t.removed,{attribute:D.getAttributeNode(w),from:D})}catch{Jn(t.removed,{attribute:null,from:D})}if(D.removeAttribute(w),w==="is")if(nr||N)try{At(D)}catch{}else try{D.setAttribute(w,"")}catch{}},Kc=function(w){let D=null,Y=null;if(Dn)w="<remove></remove>"+w;else{const Ce=Id(w,/^[\r\n\t ]+/);Y=Ce&&Ce[0]}zn==="application/xhtml+xml"&&qr===zt&&(w='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+w+"</body></html>");const fe=j?j.createHTML(w):w;if(qr===zt)try{D=new h().parseFromString(fe,zn)}catch{}if(!D||!D.documentElement){D=E.createDocument(qr,"template",null);try{D.documentElement.innerHTML=Ll?T:fe}catch{}}const Oe=D.body||D.documentElement;return w&&Y&&Oe.insertBefore(r.createTextNode(Y),Oe.childNodes[0]||null),qr===zt?I.call(D,pt?"html":"body")[0]:pt?D.documentElement:Oe},qc=function(w){return A.call(w.ownerDocument||w,w,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Ol=function(w){return w instanceof f&&(typeof w.nodeName!="string"||typeof w.textContent!="string"||typeof w.removeChild!="function"||!(w.attributes instanceof d)||typeof w.removeAttribute!="function"||typeof w.setAttribute!="function"||typeof w.namespaceURI!="string"||typeof w.insertBefore!="function"||typeof w.hasChildNodes!="function")},Zc=function(w){return typeof o=="function"&&w instanceof o};function Ft(Z,w,D){fa(Z,Y=>{Y.call(t,w,D,Zr)})}const Xc=function(w){let D=null;if(Ft(F.beforeSanitizeElements,w,null),Ol(w))return At(w),!0;const Y=Pe(w.nodeName);if(Ft(F.uponSanitizeElement,w,{tagName:Y,allowedTags:P}),Pt&&w.hasChildNodes()&&!Zc(w.firstElementChild)&&We(/<[/\w!]/g,w.innerHTML)&&We(/<[/\w!]/g,w.textContent)||w.nodeType===ns.progressingInstruction||Pt&&w.nodeType===ns.comment&&We(/<[/\w]/g,w.data))return At(w),!0;if(!P[Y]||q[Y]){if(!q[Y]&&eu(Y)&&(ee.tagNameCheck instanceof RegExp&&We(ee.tagNameCheck,Y)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Y)))return!1;if(at&&!Kr[Y]){const fe=x(w)||w.parentNode,Oe=m(w)||w.childNodes;if(Oe&&fe){const Ce=Oe.length;for(let Je=Ce-1;Je>=0;--Je){const Ut=k(Oe[Je],!0);Ut.__removalCount=(w.__removalCount||0)+1,fe.insertBefore(Ut,p(w))}}}return At(w),!0}return w instanceof c&&!qf(w)||(Y==="noscript"||Y==="noembed"||Y==="noframes")&&We(/<\/no(script|embed|frames)/i,w.innerHTML)?(At(w),!0):(Xe&&w.nodeType===ns.text&&(D=w.textContent,fa([X,J,M],fe=>{D=es(D,fe," ")}),w.textContent!==D&&(Jn(t.removed,{element:w.cloneNode()}),w.textContent=D)),Ft(F.afterSanitizeElements,w,null),!1)},Jc=function(w,D,Y){if(H&&(D==="id"||D==="name")&&(Y in r||Y in Kf))return!1;if(!(z&&!ve[D]&&We(C,D))){if(!(_&&We(U,D))){if(!W[D]||ve[D]){if(!(eu(w)&&(ee.tagNameCheck instanceof RegExp&&We(ee.tagNameCheck,w)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(w))&&(ee.attributeNameCheck instanceof RegExp&&We(ee.attributeNameCheck,D)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(D))||D==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&We(ee.tagNameCheck,Y)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Y))))return!1}else if(!$l[D]){if(!We(Q,es(Y,R,""))){if(!((D==="src"||D==="xlink:href"||D==="href")&&w!=="script"&&vv(Y,"data:")===0&&Hc[w])){if(!(le&&!We(K,es(Y,R,"")))){if(Y)return!1}}}}}}return!0},eu=function(w){return w!=="annotation-xml"&&Id(w,B)},tu=function(w){Ft(F.beforeSanitizeAttributes,w,null);const{attributes:D}=w;if(!D||Ol(w))return;const Y={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W,forceKeepAttr:void 0};let fe=D.length;for(;fe--;){const Oe=D[fe],{name:Ce,namespaceURI:Je,value:Ut}=Oe,Fn=Pe(Ce),Ml=Ut;let Me=Ce==="value"?Ml:kv(Ml);if(Y.attrName=Fn,Y.attrValue=Me,Y.keepAttr=!0,Y.forceKeepAttr=void 0,Ft(F.uponSanitizeAttribute,w,Y),Me=Y.attrValue,te&&(Fn==="id"||Fn==="name")&&(Xr(Ce,w),Me=we+Me),Pt&&We(/((--!?|])>)|<\/(style|title)/i,Me)){Xr(Ce,w);continue}if(Y.forceKeepAttr)continue;if(!Y.keepAttr){Xr(Ce,w);continue}if(!He&&We(/\/>/i,Me)){Xr(Ce,w);continue}Xe&&fa([X,J,M],nu=>{Me=es(Me,nu," ")});const ru=Pe(w.nodeName);if(!Jc(ru,Fn,Me)){Xr(Ce,w);continue}if(j&&typeof y=="object"&&typeof y.getAttributeType=="function"&&!Je)switch(y.getAttributeType(ru,Fn)){case"TrustedHTML":{Me=j.createHTML(Me);break}case"TrustedScriptURL":{Me=j.createScriptURL(Me);break}}if(Me!==Ml)try{Je?w.setAttributeNS(Je,Ce,Me):w.setAttribute(Ce,Me),Ol(w)?At(w):Rd(t.removed)}catch{Xr(Ce,w)}}Ft(F.afterSanitizeAttributes,w,null)},Zf=function Z(w){let D=null;const Y=qc(w);for(Ft(F.beforeSanitizeShadowDOM,w,null);D=Y.nextNode();)Ft(F.uponSanitizeShadowNode,D,null),Xc(D),tu(D),D.content instanceof l&&Z(D.content);Ft(F.afterSanitizeShadowDOM,w,null)};return t.sanitize=function(Z){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=null,Y=null,fe=null,Oe=null;if(Ll=!Z,Ll&&(Z="<!-->"),typeof Z!="string"&&!Zc(Z))if(typeof Z.toString=="function"){if(Z=Z.toString(),typeof Z!="string")throw ts("dirty is not a string, aborting")}else throw ts("toString is not a function");if(!t.isSupported)return Z;if(Mn||Il(w),t.removed=[],typeof Z=="string"&&(sr=!1),sr){if(Z.nodeName){const Ut=Pe(Z.nodeName);if(!P[Ut]||q[Ut])throw ts("root node is forbidden and cannot be sanitized in-place")}}else if(Z instanceof o)D=Kc("<!---->"),Y=D.ownerDocument.importNode(Z,!0),Y.nodeType===ns.element&&Y.nodeName==="BODY"||Y.nodeName==="HTML"?D=Y:D.appendChild(Y);else{if(!nr&&!Xe&&!pt&&Z.indexOf("<")===-1)return j&&$?j.createHTML(Z):Z;if(D=Kc(Z),!D)return nr?null:$?T:""}D&&Dn&&At(D.firstChild);const Ce=qc(sr?Z:D);for(;fe=Ce.nextNode();)Xc(fe),tu(fe),fe.content instanceof l&&Zf(fe.content);if(sr)return Z;if(nr){if(N)for(Oe=L.call(D.ownerDocument);D.firstChild;)Oe.appendChild(D.firstChild);else Oe=D;return(W.shadowroot||W.shadowrootmode)&&(Oe=S.call(n,Oe,!0)),Oe}let Je=pt?D.outerHTML:D.innerHTML;return pt&&P["!doctype"]&&D.ownerDocument&&D.ownerDocument.doctype&&D.ownerDocument.doctype.name&&We(Uf,D.ownerDocument.doctype.name)&&(Je="<!DOCTYPE "+D.ownerDocument.doctype.name+`>
`+Je),Xe&&fa([X,J,M],Ut=>{Je=es(Je,Ut," ")}),j&&$?j.createHTML(Je):Je},t.setConfig=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Il(Z),Mn=!0},t.clearConfig=function(){Zr=null,Mn=!1},t.isValidAttribute=function(Z,w,D){Zr||Il({});const Y=Pe(Z),fe=Pe(w);return Jc(Y,fe,D)},t.addHook=function(Z,w){typeof w=="function"&&Jn(F[Z],w)},t.removeHook=function(Z,w){if(w!==void 0){const D=xv(F[Z],w);return D===-1?void 0:yv(F[Z],D,1)[0]}return Rd(F[Z])},t.removeHooks=function(Z){F[Z]=[]},t.removeAllHooks=function(){F=Ud()},t}var Hf=Bf();function Wf({markdown:e,className:t}){const r=g.useMemo(()=>{if(!e)return{__html:""};const n=oe.parse(e);return{__html:Hf.sanitize(n,{ADD_TAGS:["img"],ADD_ATTR:["src","alt","title","class"]})}},[e]);return a.jsx("div",{className:t,dangerouslySetInnerHTML:r})}function Iv(){const{theme:e}=Hs(),[t,r]=g.useState([]),[n,s]=g.useState(null),[l,i]=g.useState(null);g.useEffect(()=>{document.title="My Stories"},[]),g.useEffect(()=>{async function y(){const k=(await wy()).map(b=>({...b,progress:$c(b.id)}));r(k);try{const p=await(await fetch("/api/author/get.php")).json();p.success&&i(p.profile)}catch(b){console.error("Failed to fetch author profile:",b)}}y()},[]);const o=(y,v,k)=>{y.preventDefault(),y.stopPropagation(),s({src:v,title:k})},c=l?e==="light"?l.background_image_light||l.background_image||"/images/lofi_light_bg.webp":l.background_image_dark||l.background_image||"/images/lofi_bg.webp":e==="light"?"/images/lofi_light_bg.webp":"/images/lofi_bg.webp",u=e==="light"?"bg-white/60":"bg-black/40",d=e==="light"?"bg-white/70 border-gray-300":"bg-black/70 border-white/20",f=e==="light"?"text-gray-900":"text-white",h=e==="light"?"text-gray-700":"text-neutral-300";return a.jsxs(a.Fragment,{children:[a.jsx(On,{}),a.jsxs("div",{className:"relative min-h-screen w-full",children:[a.jsx("div",{className:"fixed inset-0 w-full h-full -z-10",style:{backgroundImage:`url('${c}')`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"}}),a.jsx("div",{className:`fixed inset-0 ${u} -z-10`}),a.jsxs("div",{className:"relative z-10 mx-auto max-w-6xl px-4 py-8",children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:`${d} rounded-xl p-4`,children:a.jsxs("div",{className:`flex items-center gap-2 text-sm ${h}`,children:[a.jsx("a",{href:"/",className:`hover:underline ${e==="light"?"hover:text-gray-900":"hover:text-neutral-200"}`,children:"Home"}),a.jsx("span",{children:"/"}),a.jsx("span",{className:f,children:"Stories"})]})})}),a.jsx("h1",{className:`mb-12 text-center text-4xl font-bold tracking-tight ${f}`,children:"All Stories"}),a.jsx("ul",{className:"space-y-8",children:t.map(y=>{var v;return a.jsx("li",{children:a.jsx("article",{className:`overflow-hidden rounded-xl border ${d} shadow-lg transition-all ${e==="light"?"hover:border-gray-400 hover:bg-white/80":"hover:border-white/30 hover:bg-black/80"} hover:shadow-xl`,children:a.jsxs("div",{className:"flex flex-col lg:flex-row",children:[a.jsx("div",{className:"lg:w-48 lg:flex-shrink-0 p-4",children:a.jsx("img",{src:y.cover,alt:`${y.title} cover`,className:"w-full aspect-[2/3] cursor-pointer object-cover rounded-lg shadow-md transition-opacity hover:opacity-90",onClick:k=>o(k,y.cover,y.title)})}),a.jsxs("div",{className:"flex flex-1 flex-col justify-between p-6",children:[a.jsxs("div",{children:[a.jsx(Ue,{to:`/storytime/story/${y.id}`,className:"group",children:a.jsx("h2",{className:`mb-3 text-2xl font-bold ${f} transition-colors group-hover:text-blue-400`,children:y.title})}),y.blurb&&a.jsx("div",{className:`mb-6 ${h}`,children:a.jsx(Wf,{markdown:y.blurb,className:`max-w-none prose prose-p:mb-3 ${e==="light"?"prose-gray":"prose-invert"}`})})]}),a.jsxs("div",{className:"mt-1 flex flex-wrap gap-3",children:[a.jsx(Ue,{to:`/storytime/story/${y.id}`,className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-white shadow hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",children:"Start Reading"}),y.progress&&typeof y.progress.chapterIndex=="number"&&a.jsxs(Ue,{to:`/storytime/story/${y.id}/chapter/${y.progress.chapterIndex}`,className:"inline-flex items-center rounded-lg bg-green-600 px-4 py-2 text-white shadow hover:bg-green-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500",children:["Continue  Chapter ",y.progress.chapterIndex]}),a.jsx(Ue,{to:`/storytime/story/${y.id}`,className:`inline-flex items-center rounded-lg border px-4 py-2 transition-colors ${e==="light"?"border-gray-400 text-gray-700 hover:border-gray-500 hover:bg-gray-100":"border-white/30 text-white hover:border-white/50 hover:bg-white/10"}`,children:"Details"})]}),typeof((v=y.progress)==null?void 0:v.percent)=="number"&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:`h-2 w-full rounded-full ${e==="light"?"bg-gray-300":"bg-white/20"}`,children:a.jsx("div",{className:"h-2 rounded-full bg-green-500",style:{width:`${Math.max(0,Math.min(100,y.progress.percent))}%`}})}),a.jsxs("p",{className:`mt-1 text-xs ${e==="light"?"text-gray-500":"text-neutral-400"}`,children:[Math.round(y.progress.percent),"% read"]})]})]})]})})},y.id)})}),n&&a.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/90 p-4",role:"dialog","aria-modal":"true",onClick:()=>s(null),children:a.jsxs("div",{className:"relative max-h-[92vh] w-full max-w-5xl",onClick:y=>y.stopPropagation(),children:[a.jsx("img",{src:n.src,alt:n.title,className:"max-h-[92vh] w-full object-contain"}),a.jsx("button",{onClick:()=>s(null),className:"absolute -top-3 -right-3 grid h-10 w-10 place-items-center rounded-full bg-white/10 text-white backdrop-blur hover:bg-white/20","aria-label":"Close",children:""}),a.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 rounded bg-black/70 px-3 py-1 text-sm text-white",children:n.title})]})}),a.jsx("footer",{className:`relative z-10 mt-16 border-t ${d} py-8 ${e==="light"?"border-gray-300":"border-white/20"}`,children:a.jsx("div",{className:"mx-auto max-w-6xl px-4",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(In,{variant:"footer",showCopyright:!1}),a.jsxs("p",{className:`text-sm ${e==="light"?"text-gray-500":"text-neutral-400"}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})]})}function Ov(){const e="analytics:session";let t=localStorage.getItem(e);return t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const n=Math.random()*16|0;return(r==="x"?n:n&3|8).toString(16)}),localStorage.setItem(e,t)),t}async function Pr(e,t={}){try{const r={event_type:e,session_id:Ov(),url_path:window.location.pathname,referrer:document.referrer||void 0,...t};await fetch(`${_e}/analytics/ingest.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(r)})}catch(r){console.debug("Analytics tracking failed:",r)}}const Al={trackPageView(){Pr("page_view")},trackStoryView(e,t){Pr("story_view",{content_type:"story",content_id:t,meta:{story_slug:e}})},trackChapterView(e){Pr("chapter_view",{content_type:"chapter",content_id:e.chapterId,parent_type:"story",parent_id:e.storyId,meta:{story_slug:e.storySlug,chapter_number:e.chapterNumber}})},trackChapterDepth(e,t){Pr("chapter_depth",{content_type:"chapter",content_id:e.chapterId,parent_type:"story",parent_id:e.storyId,value_num:Math.max(0,Math.min(1,t.depth)),meta:{time_ms:t.timeMs}})},trackGalleryView(e){Pr("gallery_view",{content_type:"gallery",content_id:e})},trackImageView(e,t){Pr("image_view",{content_type:"image",content_id:e,parent_type:"gallery",parent_id:t})},trackClick(e,t={},r={}){Pr("click",{content_type:r.content_type,content_id:r.content_id,parent_type:r.parent_type,parent_id:r.parent_id,meta:{name:e,...t}})}};class Mv{constructor(t){re(this,"startTime");re(this,"maxDepth",0);re(this,"element",null);this.startTime=Date.now(),this.element=t,this.handleScroll=this.handleScroll.bind(this),this.element.addEventListener("scroll",this.handleScroll,{passive:!0})}handleScroll(){if(!this.element)return;const t=this.element.scrollTop,r=this.element.scrollHeight,n=this.element.clientHeight,s=Math.min(1,(t+n)/r);this.maxDepth=Math.max(this.maxDepth,s)}destroy(t){this.element&&this.element.removeEventListener("scroll",this.handleScroll);const r=Date.now()-this.startTime;r>2e3&&this.maxDepth>.05&&Al.trackChapterDepth(t,{depth:this.maxDepth,timeMs:r})}}function Dv(){var Q;const{storyId:e}=Ec(),{theme:t}=Hs(),[r,n]=g.useState(null),[s,l]=g.useState([]),[i,o]=g.useState(null),[c,u]=g.useState(null),[d,f]=g.useState(!0),[h,y]=g.useState(1),[v,k]=g.useState(0),[b,p]=g.useState(!1),[m,x]=g.useState(!1),j=async(P=1,V=!1)=>{if(e){V||p(!0);try{const ae=await(await fetch(`${_e}/chapters/list.php?story_slug=${encodeURIComponent(e)}&page=${P}&limit=20`)).json();if(ae.success){const ee=(ae.chapters||[]).map(q=>({num:q.chapter_number,title:q.title,id:q.id,status:q.status,like_count:q.like_count||0,comment_count:q.comment_count||0}));l(V?q=>[...q,...ee]:ee),k(ae.total||0),x((ae.page||1)*(ae.limit||20)<(ae.total||0))}}catch(W){console.error("Error loading chapters:",W)}finally{p(!1)}}};g.useEffect(()=>{async function P(){if(!e)return;f(!0);const[V,W]=await Promise.all([Pc(e),_f()]);n(V),u(W),o($c(e)),V&&await j(1,!1),f(!1)}P()},[e]),g.useEffect(()=>{d||!r||!e||Al.trackStoryView(e,parseInt(r.id)||0)},[d,r,e]);const T=()=>{if(!b&&m){const P=h+1;y(P),j(P,!0)}},E=()=>{e&&(Py(e),o(null))},A=P=>P.title?P.title:P.num===0?"Prologue":`Chapter ${P.num}`;if(d)return a.jsx("div",{children:"Loading story..."});if(!r||!c)return a.jsx("div",{children:"Loading story..."});const L=P=>P.replace(/^#{1,6}\s+/gm,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/\n+/g," ").replace(/\s+/g," ").trim(),I=c.site_domain||"example.com",S=`https://${I}/storytime/story/${e}`,F=r.blurb?L(r.blurb).substring(0,160)+(L(r.blurb).length>160?"...":""):`Read ${r.title}, a ${((Q=r.genres)==null?void 0:Q.join(", "))||"story"} by ${c.name}. ${c.tagline}`,X=`${r.title} | ${c.name} | ${c.bio}`,J=[...r.primary_keywords?r.primary_keywords.split(",").map(P=>P.trim()):[],...r.longtail_keywords?r.longtail_keywords.split(",").map(P=>P.trim()):[],"web serial","online novel","illustrated story"].filter(Boolean).join(", "),M=r.genres&&r.genres.length>0?r.genres:["Fiction","Web Serial"],C=c?t==="light"?c.background_image_light||c.background_image||"/images/lofi_light_bg.webp":c.background_image_dark||c.background_image||"/images/lofi_bg.webp":t==="light"?"/images/lofi_light_bg.webp":"/images/lofi_bg.webp",U=t==="light"?"bg-white/60":"bg-black/40",K=t==="light"?"bg-white/70 border-gray-300":"bg-black/70 border-white/20",R=t==="light"?"text-gray-900":"text-white",B=t==="light"?"text-gray-700":"text-neutral-300";return a.jsxs(a.Fragment,{children:[a.jsxs(Bs,{children:[a.jsx("title",{children:X}),a.jsx("meta",{name:"description",content:F}),a.jsx("link",{rel:"canonical",href:S}),a.jsx("meta",{property:"og:title",content:r.title}),a.jsx("meta",{property:"og:description",content:F}),a.jsx("meta",{property:"og:image",content:r.cover.startsWith("http")?r.cover:`https://${I}${r.cover}`}),a.jsx("meta",{property:"og:type",content:"book"}),a.jsx("meta",{property:"og:url",content:S}),a.jsx("meta",{property:"og:site_name",content:c.name}),a.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),a.jsx("meta",{name:"twitter:title",content:r.title}),a.jsx("meta",{name:"twitter:description",content:F}),a.jsx("meta",{name:"twitter:image",content:r.cover.startsWith("http")?r.cover:`https://${I}${r.cover}`}),a.jsx("meta",{name:"twitter:creator",content:""}),a.jsx("meta",{name:"author",content:c.name}),a.jsx("meta",{name:"keywords",content:J}),a.jsx("meta",{property:"book:author",content:c.name}),a.jsx("meta",{property:"book:genre",content:M.join(", ")}),r.target_audience&&a.jsx("meta",{name:"audience",content:r.target_audience}),a.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Book",name:r.title,description:F,author:{"@type":"Person",name:c.name},genre:M,url:S,image:r.cover.startsWith("http")?r.cover:`https://${I}${r.cover}`,publisher:{"@type":"Person",name:c.name},inLanguage:"en-US"})})]}),a.jsx(On,{}),a.jsxs("div",{className:"relative min-h-screen w-full",children:[a.jsx("div",{className:"fixed inset-0 w-full h-full -z-10",style:{backgroundImage:`url('${C}')`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"}}),a.jsx("div",{className:`fixed inset-0 ${U} -z-10`}),a.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto px-4 py-8",children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:`${K} rounded-xl p-4`,children:a.jsxs("div",{className:`flex items-center gap-2 text-sm ${B}`,children:[a.jsx("a",{href:"/",className:`hover:underline ${t==="light"?"hover:text-gray-900":"hover:text-neutral-200"}`,children:"Home"}),a.jsx("span",{children:"/"}),a.jsx(Ue,{to:"/storytime",className:`hover:underline ${t==="light"?"hover:text-gray-900":"hover:text-neutral-200"}`,children:"Stories"}),a.jsx("span",{children:"/"}),a.jsx("span",{className:R,children:r.title})]})})}),a.jsx("div",{className:`${K} rounded-xl p-6 mb-6`,children:a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("img",{src:r.cover,alt:`${r.title} cover`,className:"w-32 h-auto rounded-md flex-shrink-0"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h1",{className:`text-3xl font-bold ${R}`,children:r.title}),r.blurb&&a.jsx(Wf,{markdown:r.blurb,className:`mt-2 ${B} prose ${t==="light"?"prose-gray":"prose-invert"}`})]})]})}),a.jsx("div",{className:`${K} rounded-xl p-6 mb-6`,children:a.jsxs("div",{className:"flex gap-2",children:[s&&s.length>0&&a.jsx(Ue,{to:`/storytime/story/${e}/chapter/${r.startIndex}`,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Start reading"}),i&&typeof i.chapterIndex=="number"&&a.jsxs(Ue,{to:`/storytime/story/${e}/chapter/${i.chapterIndex}`,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:["Continue  Chapter ",i.chapterIndex]}),i&&a.jsx("button",{onClick:E,className:`px-4 py-2 border rounded-lg transition-colors ${t==="light"?"border-gray-400 text-gray-700 hover:bg-gray-100":"border-white/30 text-white hover:bg-white/10"}`,children:"Reset progress"})]})}),a.jsxs("div",{className:`${K} rounded-xl p-6`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:`text-xl font-semibold ${R}`,children:"Chapters"}),v>0&&a.jsxs("span",{className:`text-sm ${B}`,children:["Showing ",s.length," of ",v]})]}),!s&&a.jsx("p",{className:B,children:"Loading"}),s&&a.jsxs(a.Fragment,{children:[a.jsx("ul",{className:"space-y-2",children:s.map(P=>a.jsxs("li",{className:`flex justify-between border rounded-xl p-3 transition-colors ${t==="light"?"border-gray-300 bg-gray-50 hover:bg-gray-100":"border-white/20 bg-white/5 hover:bg-white/10"}`,children:[a.jsx(Ue,{to:`/storytime/story/${e}/chapter/${P.num}`,className:`hover:underline ${t==="light"?"text-gray-800 hover:text-blue-600":"text-neutral-200 hover:text-blue-400"}`,children:A(P)}),i&&i.chapterIndex===P.num&&a.jsx("span",{className:`text-xs ${t==="light"?"text-gray-500":"text-neutral-400"}`,children:"Last read"})]},P.num))}),m&&a.jsx("div",{className:"mt-4 text-center",children:a.jsx("button",{onClick:T,disabled:b,className:"px-6 py-2 rounded-lg transition-colors bg-blue-600 hover:bg-blue-700 text-white disabled:bg-blue-400",children:b?"Loading...":"Load More Chapters"})})]})]}),a.jsx("footer",{className:`mt-16 border-t ${K} rounded-xl py-8 ${t==="light"?"border-gray-300":"border-white/20"}`,children:a.jsx("div",{className:"mx-auto max-w-3xl px-4",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(In,{variant:"footer",showCopyright:!1}),a.jsxs("p",{className:`text-sm ${t==="light"?"text-gray-500":"text-neutral-400"}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})]})}function zv({storyId:e,chapterId:t}){const{theme:r}=Hs(),[n,s]=g.useState([]),[l,i]=g.useState({count:0,userLiked:!1}),[o,c]=g.useState(""),[u,d]=g.useState(""),[f,h]=g.useState(!0),[y,v]=g.useState(!1),[k,b]=g.useState(""),[p,m]=g.useState(null);g.useEffect(()=>{let S=!1;async function F(){h(!0);try{const X=await Pc(e);if(X&&!S){const J=await Sf(X,t.toString());S||m(J&&J.id!==void 0?J.id:null)}else S||m(null)}catch{S||m(null)}}return F(),()=>{S=!0}},[e,t]),g.useEffect(()=>{p&&(x(),j())},[p]);const x=async()=>{if(p)try{const S=await Ey(p);s(Array.isArray(S)?S:[])}catch(S){console.error("Failed to load comments:",S)}finally{h(!1)}},j=async()=>{if(p)try{const S=await _y(p);S.like_count!==void 0&&i({count:S.like_count,userLiked:S.user_liked})}catch(S){console.error("Failed to load likes:",S)}},T=async()=>{if(p)try{const S=await Sy(p);S.success&&i({count:S.like_count,userLiked:S.user_liked})}catch(S){console.error("Failed to process like:",S)}},E=async S=>{if(S.preventDefault(),!(!o.trim()||!p)){v(!0),b("");try{const F=await Cy(p,u.trim()||"Anonymous",o.trim());F.success?(b(F.message||"Comment submitted successfully"),c(""),d(""),x()):b(F.error||"Failed to submit comment")}catch{b("Failed to submit comment. Please try again.")}finally{v(!1)}}},A=r==="light"?"bg-white/70 border-gray-300":"bg-black/70 border-white/20",L=r==="light"?"text-gray-900":"text-white",I=r==="light"?"text-gray-700":"text-neutral-300";return f?a.jsx("div",{className:"max-w-3xl mx-auto px-4 md:px-6 py-8",children:a.jsx("div",{className:`${A} rounded-xl p-6`,children:a.jsx("div",{className:I,children:"Loading comments..."})})}):a.jsx("div",{className:"max-w-3xl mx-auto px-4 md:px-6 py-8",children:a.jsxs("div",{className:`${A} rounded-xl p-6 border-t ${r==="light"?"border-gray-300":"border-white/20"}`,children:[a.jsx("div",{className:"mb-8",children:a.jsxs("button",{onClick:T,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${l.userLiked?"bg-red-600 hover:bg-red-700 text-white":r==="light"?"bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-300":"bg-white/10 hover:bg-white/20 text-neutral-300 border border-white/20"}`,children:[a.jsx("span",{className:"text-lg",children:""}),a.jsxs("span",{children:[l.count," ",l.count===1?"like":"likes"]})]})}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("h3",{className:`text-xl font-bold mb-4 ${L}`,children:["Comments (",n.length,")"]}),n.length===0?a.jsx("p",{className:`italic ${I}`,children:"No comments yet. Be the first to comment!"}):a.jsx("div",{className:"space-y-4",children:n.map(S=>a.jsxs("div",{className:`rounded-lg p-4 border ${r==="light"?"bg-gray-50 border-gray-300":"bg-white/10 border-white/20"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:`font-medium ${I}`,children:S.author_name}),a.jsx("span",{className:`text-sm ${r==="light"?"text-gray-500":"text-neutral-500"}`,children:S.created_at})]}),a.jsx("p",{className:`whitespace-pre-wrap ${L}`,children:S.comment_text})]},S.id))})]}),a.jsxs("div",{className:`rounded-lg p-6 border ${r==="light"?"bg-gray-50 border-gray-300":"bg-white/10 border-white/20"}`,children:[a.jsx("h4",{className:`text-lg font-semibold mb-4 ${L}`,children:"Leave a Comment"}),k&&a.jsx("div",{className:`mb-4 p-3 rounded border ${k.includes("successfully")?r==="light"?"bg-green-100 text-green-800 border-green-300":"bg-green-900/50 text-green-200 border-green-700":r==="light"?"bg-red-100 text-red-800 border-red-300":"bg-red-900/50 text-red-200 border-red-700"}`,children:k}),a.jsxs("form",{onSubmit:E,className:"space-y-4",children:[a.jsx("input",{type:"text",name:"website",value:"",onChange:()=>{},style:{display:"none"},tabIndex:-1,autoComplete:"off"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"authorName",className:`block text-sm font-medium mb-1 ${I}`,children:"Name (optional)"}),a.jsx("input",{type:"text",id:"authorName",value:u,onChange:S=>d(S.target.value),placeholder:"Anonymous",maxLength:100,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${r==="light"?"border-gray-300 bg-white text-gray-900 placeholder-gray-500":"border-white/30 bg-white/10 text-neutral-200 placeholder-neutral-500"}`})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"comment",className:`block text-sm font-medium mb-1 ${I}`,children:"Comment"}),a.jsx("textarea",{id:"comment",value:o,onChange:S=>c(S.target.value),placeholder:"Share your thoughts about this chapter...",maxLength:1e3,rows:4,required:!0,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical ${r==="light"?"border-gray-300 bg-white text-gray-900 placeholder-gray-500":"border-white/30 bg-white/10 text-neutral-200 placeholder-neutral-500"}`}),a.jsxs("div",{className:`text-right text-sm mt-1 ${r==="light"?"text-gray-500":"text-neutral-500"}`,children:[o.length,"/1000 characters"]})]}),a.jsx("button",{type:"submit",disabled:y||!o.trim(),className:`w-full font-medium py-2 px-4 rounded-md transition-colors ${y||!o.trim()?r==="light"?"bg-gray-300 cursor-not-allowed text-gray-500":"bg-neutral-700 cursor-not-allowed text-neutral-400":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:y?"Submitting...":"Submit Comment"})]}),a.jsx("p",{className:`text-sm mt-3 ${r==="light"?"text-gray-500":"text-neutral-500"}`,children:"Comments appear immediately. Please be respectful and follow community guidelines."})]})]})})}function Fv({storySlug:e,chapterNumber:t,onClose:r,onSaved:n}){const s=Cl(),[l,i]=g.useState({id:0,title:"",slug:"",content:"",chapter_number:t,status:"draft"}),[o,c]=g.useState(!0),[u,d]=g.useState(!1),[f,h]=g.useState("");g.useEffect(()=>{(async()=>{try{h("");const m=await(await fetch(`${_e}/chapters/list.php?story_slug=${encodeURIComponent(e)}&chapter_number=${t}`,{credentials:"same-origin"})).json();if(m.success&&m.chapters&&m.chapters.length>0){const x=m.chapters[0];i({id:x.id,title:x.title||"",slug:x.slug||"",content:x.content||"",chapter_number:x.chapter_number,status:x.status||"draft"})}else throw new Error("Chapter not found")}catch(p){h(p instanceof Error?p.message:"Failed to load chapter")}finally{c(!1)}})()},[e,t]);const y=async()=>{d(!0),h("");try{const b=await fetch(`${_e}/chapters/update.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(l)}),p=await b.json();if(!b.ok||!p.success)throw new Error(p.error||"Save failed");jy(e),n(l.content),l.chapter_number!==t&&s(`/storytime/story/${e}/chapter/${l.chapter_number}`),r()}catch(b){h(b instanceof Error?b.message:"Save failed")}finally{d(!1)}},v=(b,p)=>{i(m=>({...m,[b]:p}))},k=b=>{b.target===b.currentTarget&&r()};return o?a.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 p-4",role:"dialog","aria-modal":"true",children:a.jsx("div",{className:"w-full max-w-3xl rounded-lg bg-white dark:bg-gray-900 p-6",children:a.jsx("div",{className:"text-center text-gray-900 dark:text-white",children:"Loading chapter..."})})}):a.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 p-4",role:"dialog","aria-modal":"true",onClick:k,children:a.jsxs("div",{className:"w-full max-w-4xl rounded-lg bg-white dark:bg-gray-900 p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit Chapter"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:y,disabled:u||!l.title.trim()||!l.content.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:u?"Saving...":"Save Chapter"}),a.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),f&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-400 rounded",children:f}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),a.jsx("input",{type:"text",value:l.title,onChange:b=>v("title",b.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Chapter title"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slug"}),a.jsx("input",{type:"text",value:l.slug,onChange:b=>v("slug",b.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"chapter-slug"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Chapter Number"}),a.jsx("input",{type:"number",value:l.chapter_number,onChange:b=>v("chapter_number",parseInt(b.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Use 0 for prologue or special chapters"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),a.jsxs("select",{value:l.status,onChange:b=>v("status",b.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"published",children:"Published"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content (Markdown)"}),a.jsx("textarea",{value:l.content,onChange:b=>v("content",b.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:20,placeholder:"Write your chapter content in Markdown..."})]})]})]})})}function Uv(){var B,Q;const{storyId:e,chapterId:t}=Ec(),{theme:r}=Hs(),{user:n}=ay(),[s,l]=g.useState(null),[i,o]=g.useState(""),[c,u]=g.useState(null),[d,f]=g.useState(null),[h,y]=g.useState(!0),[v,k]=g.useState(null),[b,p]=g.useState(!1),m=g.useRef(null),x=g.useRef(null);g.useEffect(()=>{async function P(){if(!e||!t)return;y(!0);const[V,W]=await Promise.all([Pc(e),_f()]);if(l(V),u(W),V)try{const[ae,ee]=await Promise.all([Ny(V,t),Sf(V,t)]);o(ae),f(ee);const q=parseInt(t,10)+1,ve=await Ay(V);q<=ve?k(q):k(null)}catch{o("# Chapter not found"),k(null)}y(!1)}P()},[e,t]),g.useEffect(()=>{if(h||!s||!e||!t)return;const P=new AbortController,W=(async()=>{try{const ee=await(await fetch(`${_e}/chapters/list.php?story_slug=${encodeURIComponent(e)}&chapter_number=${t}`,{signal:P.signal})).json();if(ee.success&&ee.chapters&&ee.chapters.length>0){const q=ee.chapters[0],ve=Number(s.id)||0;return Al.trackChapterView({chapterId:q.id,storyId:ve,storySlug:e,chapterNumber:Number(t)}),m.current&&(x.current=new Mv(m.current)),()=>{x.current&&(x.current.destroy({chapterId:q.id,storyId:ve}),x.current=null)}}}catch(ae){ae.name!=="AbortError"&&console.debug("Failed to track chapter analytics:",ae)}})();return()=>{P.abort(),W.then(ae=>ae==null?void 0:ae())}},[h,s,e,t]);const j=g.useMemo(()=>{if(!i)return{__html:""};const P=oe.parse(i),V=(s==null?void 0:s.breakImage)||"/api/uploads/page_break.png",W=P.replace(/<hr\s*\/?>/g,`<img src="${V}" alt="" class="page-break" />`);return{__html:Hf.sanitize(W,{ADD_TAGS:["img"],ADD_ATTR:["src","alt","title","class"]})}},[i,s]);if(g.useEffect(()=>{var V;if(h||!e||!t)return;const P=$c(e);P&&P.chapterIndex===parseInt(t,10)&&((V=m.current)==null||V.scrollTo({top:P.scrollY,behavior:"auto"}))},[h,e,t]),g.useEffect(()=>{if(h||!e||!t)return;const P=m.current;if(!P)return;let V;const W=()=>{cancelAnimationFrame(V),V=requestAnimationFrame(()=>{try{Ty(e,{chapterIndex:parseInt(t,10),scrollY:P.scrollTop})}catch(ae){console.warn("Failed to save reading progress:",ae)}})};return P.addEventListener("scroll",W,{passive:!0}),()=>{P.removeEventListener("scroll",W),V&&cancelAnimationFrame(V)}},[e,t,h]),g.useEffect(()=>{const P=document.createElement("style");return P.id="story-break-style",P.textContent=`
      .page-break {
        display: block;
        width: 100%;
        height: auto;
        margin: 2rem 0;
        filter: ${r==="light"?"drop-shadow(0 0 10px rgba(0,0,0,0.45)) drop-shadow(0 0 20px rgba(0,0,0,0.25))":"none"};
      }
    `,document.head.appendChild(P),()=>{const V=document.getElementById("story-break-style");V&&document.head.removeChild(V)}},[r]),h)return a.jsx("div",{children:"Loading chapter..."});if(!s||!c)return a.jsx("div",{children:"Loading chapter..."});const T=P=>P.replace(/^#{1,6}\s+/gm,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/\n+/g," ").replace(/\s+/g," ").trim(),E=()=>{if(!t)return"Chapter";const P=parseInt(t,10),V=d==null?void 0:d.title;return P===0?V||"Prologue":V||`Chapter ${t}`},A=c.site_domain||"example.com",L=`https://${A}/storytime/story/${e}/chapter/${t}`,I=E(),S=`${I} - ${s.title}. Continue reading this ${((B=s.genres)==null?void 0:B.join(", "))||"story"} by ${c.name}.`,F=`${I} - ${s.title} | ${c.name} | ${c.bio}`,X=s!=null&&s.cover?s.cover.startsWith("http")?s.cover:`https://${A}${s.cover}`:`https://${A}/images/og-default.png`,J=i?(()=>{const P=T(i);return P.length>160?P.slice(0,160)+"":P||S})():S,M=c?r==="light"?c.background_image_light||c.background_image||"/images/lofi_light_bg.webp":c.background_image_dark||c.background_image||"/images/lofi_bg.webp":r==="light"?"/images/lofi_light_bg.webp":"/images/lofi_bg.webp",C=r==="light"?"bg-white/60":"bg-black/40",U=r==="light"?"bg-white/70 border-gray-300":"bg-black/70 border-white/20",K=r==="light"?"text-gray-900":"text-white",R=r==="light"?"text-gray-700":"text-neutral-300";return a.jsxs(a.Fragment,{children:[a.jsxs(Bs,{children:[a.jsx("title",{children:F}),a.jsx("meta",{name:"description",content:J}),a.jsx("link",{rel:"canonical",href:L}),a.jsx("meta",{property:"og:title",content:`${I} - ${s.title}`}),a.jsx("meta",{property:"og:description",content:J}),a.jsx("meta",{property:"og:image",content:X}),a.jsx("meta",{property:"og:type",content:"article"}),a.jsx("meta",{property:"og:url",content:L}),a.jsx("meta",{property:"og:site_name",content:c.name}),a.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),a.jsx("meta",{name:"twitter:title",content:`${I} - ${s.title}`}),a.jsx("meta",{name:"twitter:description",content:J}),a.jsx("meta",{name:"twitter:image",content:X}),a.jsx("meta",{name:"twitter:creator",content:""}),a.jsx("meta",{name:"author",content:c.name}),a.jsx("meta",{property:"article:author",content:c.name}),a.jsx("meta",{property:"article:section",content:((Q=s.genres)==null?void 0:Q.join(", "))||"Fiction"}),(d==null?void 0:d.updated_at)&&a.jsx("meta",{property:"article:modified_time",content:new Date(d.updated_at).toISOString()}),a.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Article",headline:`${I} - ${s.title}`,description:J,author:{"@type":"Person",name:c.name},publisher:{"@type":"Person",name:c.name},url:L,image:X,isPartOf:{"@type":"Book",name:s.title,url:`https://${A}/storytime/story/${e}`},inLanguage:"en-US",...(d==null?void 0:d.updated_at)&&{dateModified:new Date(d.updated_at).toISOString()}})})]}),a.jsx(On,{}),a.jsxs("div",{className:"relative min-h-screen w-full",children:[a.jsx("div",{className:"fixed inset-0 w-full h-full -z-10",style:{backgroundImage:`url('${M}')`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"}}),a.jsx("div",{className:`fixed inset-0 ${C} -z-10`}),a.jsxs("div",{className:"relative z-10 min-h-screen grid grid-rows-[auto,1fr] chapter-layout",children:[a.jsx("header",{className:`border-b ${U} ${r==="light"?"border-gray-300":"border-white/20"}`,children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:`flex items-center gap-2 text-sm ${R}`,children:[a.jsx("a",{href:"/",className:`hover:underline ${r==="light"?"hover:text-gray-900":"hover:text-neutral-200"}`,children:"Home"}),a.jsx("span",{children:"/"}),a.jsx(Ue,{to:"/storytime",className:`hover:underline ${r==="light"?"hover:text-gray-900":"hover:text-neutral-200"}`,children:"Stories"}),a.jsx("span",{children:"/"}),a.jsx(Ue,{to:`/storytime/story/${e}`,className:`hover:underline ${r==="light"?"hover:text-gray-900":"hover:text-neutral-200"}`,children:s.title}),a.jsx("span",{children:"/"}),a.jsx("span",{className:K,children:I})]}),ly(n)&&a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})})}),a.jsxs("main",{ref:m,className:"overflow-y-auto",children:[a.jsx("div",{className:"max-w-4xl lg:max-w-5xl mx-auto px-4 md:px-6 py-8",children:a.jsx("article",{className:`prose max-w-[80ch] mx-auto prose-p:mb-6 text-left ${U} rounded-xl p-6 ${r==="light"?"prose-gray":"prose-invert"}`,dangerouslySetInnerHTML:j})}),v&&a.jsx("div",{className:"max-w-3xl mx-auto px-4 md:px-6 pb-8 text-center",children:a.jsx("div",{className:`${U} rounded-xl p-6`,children:a.jsx(Ue,{to:`/storytime/story/${e}/chapter/${v}`,className:"inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors",children:"Next Chapter"})})}),e&&t&&a.jsx(zv,{storyId:e,chapterId:parseInt(t,10)}),a.jsx("footer",{className:`mt-16 border-t ${U} py-8 ${r==="light"?"border-gray-300":"border-white/20"}`,children:a.jsx("div",{className:"mx-auto max-w-3xl px-4",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(In,{variant:"footer",showCopyright:!1}),a.jsxs("p",{className:`text-sm ${r==="light"?"text-gray-500":"text-neutral-400"}`,children:[" ",new Date().getFullYear()," All rights reserved."]})]})})})]})]})]}),b&&e&&t&&a.jsx(Fv,{storySlug:e,chapterNumber:parseInt(t,10),onClose:()=>p(!1),onSaved:P=>{o(P),p(!1)}})]})}function Bv(){return a.jsx("div",{className:"font-sans h-full transition-colors duration-200 bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:a.jsxs(El,{children:[a.jsx(Ne,{path:"/",element:a.jsx(Iv,{})}),a.jsx(Ne,{path:"/story/:storyId",element:a.jsx(Dv,{})}),a.jsx(Ne,{path:"/story/:storyId/chapter/:chapterId",element:a.jsx(Uv,{})})]})})}function Bd(e){if(!e)return e||void 0;if(/^(?:[a-z]+:)?\/\//i.test(e)||e.startsWith("data:")||e.startsWith("/api/"))return e;const t="/",n=e.replace(/^\/+/,"").split("/").map(s=>encodeURIComponent(s)).join("/");return t.replace(/\/+$/,"")+"/"+n}function Hv(){const[e,t]=g.useState([]),[r,n]=g.useState(null),[s,l]=g.useState([]),[i,o]=g.useState(!1),[c,u]=g.useState(null),[d,f]=g.useState(null),[h,y]=g.useState(!1),[v,k]=g.useState(null),[b,p]=g.useState({title:"",slug:"",description:"",rating:"PG",status:"draft"}),[m,x]=g.useState(null),[j,T]=g.useState(!1),[E,A]=g.useState({positive:"",negative:"",checkpoint:"",loras:"",extractMetadata:!0}),[L,I]=g.useState(null),[S,F]=g.useState(""),[X,J]=g.useState(""),[M,C]=g.useState({positive:"",negative:"",checkpoint:"",loras:[]});g.useEffect(()=>{U()},[]);const U=async()=>{o(!0),u(null);try{const _=await fetch("/api/galleries/list.php?include_unpublished=1",{credentials:"same-origin"});if(!_.ok)throw new Error("Failed to load galleries");const z=await _.json();t(z.galleries||[])}catch(_){u(_.message||"Failed to load galleries")}finally{o(!1)}},K=async _=>{o(!0),u(null);try{const z=await fetch(`/api/images/gallery-list.php?gallery_id=${_}&limit=100`,{credentials:"same-origin"});if(!z.ok)throw new Error("Failed to load images");const le=await z.json();l(le.images||[])}catch(z){u(z.message||"Failed to load images")}finally{o(!1)}},R=async _=>{_.preventDefault(),o(!0),u(null),f(null);try{const z=v?"/api/galleries/update.php":"/api/galleries/create.php",le=v?{id:v.id,...b}:b,He=await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(le)});if(!He.ok){let Xe="Failed to save gallery";try{const Pt=await He.text();try{const pt=JSON.parse(Pt);Xe=pt.error||pt.message||Pt||Xe}catch{Xe=Pt||Xe}}catch{}throw new Error(`${He.status}: ${Xe}`)}f(v?"Gallery updated successfully!":"Gallery created successfully!"),y(!1),k(null),p({title:"",slug:"",description:"",rating:"PG",status:"draft"}),await U()}catch(z){u(z.message||"Failed to save gallery")}finally{o(!1)}},B=async _=>{if(confirm(`Are you sure you want to delete "${_.title}"? This will also delete all images in this gallery.`)){o(!0),u(null);try{const z=await fetch("/api/galleries/delete.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:_.id})});if(!z.ok){const le=await z.text();throw new Error(le||"Failed to delete gallery")}f("Gallery deleted successfully!"),(r==null?void 0:r.id)===_.id&&(n(null),l([])),await U()}catch(z){u(z.message||"Failed to delete gallery")}finally{o(!1)}}},Q=async _=>{o(!0),u(null);try{const z=_.status==="published"?"draft":"published",le=await fetch("/api/galleries/update.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:_.id,status:z})});if(!le.ok){const He=await le.text();throw new Error(He||"Failed to update status")}f(z==="published"?"Gallery published!":"Gallery unpublished!"),await U()}catch(z){u(z.message||"Failed to update status")}finally{o(!1)}},P=async()=>{if(!(!r||!m||m.length===0)){T(!0),u(null);try{const _=new FormData;_.append("gallery_id",r.id.toString()),E.positive.trim()&&_.append("positive_prompt",E.positive.trim()),E.negative.trim()&&_.append("negative_prompt",E.negative.trim()),E.checkpoint.trim()&&_.append("checkpoint",E.checkpoint.trim()),E.loras.trim()&&_.append("loras",E.loras.trim()),_.append("extract_metadata",E.extractMetadata?"1":"0"),Array.from(m).forEach(le=>{_.append("files[]",le)});const z=await fetch("/api/images/gallery-upload.php",{method:"POST",credentials:"same-origin",body:_});if(!z.ok){const le=await z.text();throw new Error(le||"Failed to upload images")}f("Images uploaded successfully!"),x(null),A({positive:"",negative:"",checkpoint:"",loras:"",extractMetadata:!0}),await K(r.id)}catch(_){u(_.message||"Failed to upload images")}finally{T(!1)}}},V=async _=>{if(confirm("Are you sure you want to delete this image?")){o(!0),u(null);try{const z=await fetch("/api/images/gallery-delete.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:_})});if(!z.ok){const le=await z.text();throw new Error(le||"Failed to delete image")}l(le=>le.filter(He=>He.id!==_)),f("Image deleted successfully!")}catch(z){u(z.message||"Failed to delete image")}finally{o(!1)}}},W=_=>{k(_),p({title:_.title,slug:_.slug,description:_.description||"",rating:_.rating||"PG",status:_.status||"draft"}),y(!0)},ae=_=>{I(_.id),F(_.title||""),J(_.alt_text||"");let z=_.prompt||"",le="";if(_.parameters){const He=_.parameters.match(/Negative prompt:\s*(.+?)(?:\n|$)/i);He&&(le=He[1].trim())}C({positive:z,negative:le,checkpoint:_.checkpoint||"",loras:_.loras||[]})},ee=_=>_.title?_.title:((_.src||"").split("/").pop()||"").replace(/\.[^/.]+$/,"")||"Untitled",q=_=>_.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),ve=_=>{p(z=>({...z,title:_,slug:v?z.slug:q(_)}))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gallery Manager"}),a.jsx("button",{onClick:()=>{y(!0),k(null),p({title:"",slug:"",description:"",rating:"PG",status:"draft"})},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Gallery"})]}),c&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:c}),d&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded-lg",children:d}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:v?"Edit Gallery":"Create Gallery"}),a.jsxs("form",{onSubmit:R,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),a.jsx("input",{type:"text",value:b.title,onChange:_=>ve(_.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Slug ",!v&&a.jsx("span",{className:"text-xs text-gray-500",children:"(auto-generated from title)"})]}),a.jsx("input",{type:"text",value:b.slug,onChange:_=>p(z=>({...z,slug:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0,placeholder:v?"":"Will be generated from title..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),a.jsx("textarea",{value:b.description,onChange:_=>p(z=>({...z,description:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rating"}),a.jsxs("select",{value:b.rating,onChange:_=>p(z=>({...z,rating:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"PG",children:"PG"}),a.jsx("option",{value:"X",children:"X"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),a.jsxs("select",{value:b.status,onChange:_=>p(z=>({...z,status:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"draft",children:"Draft (hidden)"}),a.jsx("option",{value:"published",children:"Published (visible)"}),a.jsx("option",{value:"archived",children:"Archived (hidden)"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"New galleries default to Draft. Publish to make it visible on the site."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:i?"Saving...":v?"Update":"Create"}),a.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})]})}),L&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Edit Image"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),a.jsx("input",{type:"text",value:S,onChange:_=>F(_.target.value),placeholder:"Image title",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Alt Text (SEO)"}),a.jsx("input",{type:"text",value:X,onChange:_=>J(_.target.value),placeholder:"Alt text for accessibility",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Positive Prompt"}),a.jsx("textarea",{value:M.positive,onChange:_=>C(z=>({...z,positive:_.target.value})),placeholder:"Enter positive prompt...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",rows:4})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Negative Prompt"}),a.jsx("textarea",{value:M.negative,onChange:_=>C(z=>({...z,negative:_.target.value})),placeholder:"Enter negative prompt...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",rows:4})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Checkpoint"}),a.jsx("input",{type:"text",value:M.checkpoint,onChange:_=>C(z=>({...z,checkpoint:_.target.value})),placeholder:"e.g., sd_xl_base_1.0.safetensors",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"LoRAs"}),a.jsx("input",{type:"text",value:M.loras.join(", "),onChange:_=>C(z=>({...z,loras:_.target.value.split(",").map(le=>le.trim()).filter(le=>le.length>0)})),placeholder:"Comma-separated: lora1, lora2, lora3",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-6",children:[a.jsx("button",{onClick:async()=>{o(!0),u(null);try{const _=await fetch("/api/images/gallery-update.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:L,title:S.trim()||null,alt_text:X.trim()||null,prompt:M.positive.trim()||null,parameters:M.negative.trim()?`Negative prompt: ${M.negative.trim()}`:null,checkpoint:M.checkpoint.trim()||null,loras:M.loras.length>0?M.loras:null})});if(!_.ok){const z=await _.text();throw new Error(z||"Failed to update image")}l(z=>z.map(le=>le.id===L?{...le,title:S.trim()||null,alt_text:X.trim()||null,prompt:M.positive.trim()||null,parameters:M.negative.trim()?`Negative prompt: ${M.negative.trim()}`:null,checkpoint:M.checkpoint.trim()||null,loras:M.loras.length>0?M.loras:[]}:le)),I(null),f("Image updated successfully!")}catch(_){u(_.message||"Failed to update image")}finally{o(!1)}},disabled:i,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:i?"Saving...":"Save Changes"}),a.jsx("button",{onClick:()=>I(null),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Galleries"}),i&&!r?a.jsx("div",{className:"text-center py-4",children:"Loading galleries..."}):e.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No galleries found"}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(_=>a.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${(r==null?void 0:r.id)===_.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,onClick:()=>{n(_),K(_.id)},children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:[_.title,_.status&&_.status!=="published"&&a.jsx("span",{className:`ml-2 inline-block rounded px-2 py-0.5 text-xs ${_.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-200 text-gray-800"}`,children:_.status})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:z=>{z.stopPropagation(),Q(_)},className:`${_.status==="published"?"text-yellow-600 hover:text-yellow-800":"text-green-600 hover:text-green-800"} text-sm`,title:_.status==="published"?"Unpublish":"Publish",children:_.status==="published"?"Unpublish":"Publish"}),a.jsx("button",{onClick:z=>{z.stopPropagation(),W(_)},className:"text-blue-600 hover:text-blue-800 text-sm ml-2",children:"Edit"}),a.jsx("button",{onClick:z=>{z.stopPropagation(),B(_)},className:"text-red-600 hover:text-red-800 text-sm ml-2",children:"Delete"})]})]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Slug: ",_.slug]}),_.description&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:_.description}),a.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[a.jsxs("span",{children:["Rating: ",_.rating||"PG"]}),a.jsxs("span",{children:[_.image_count||0," images"]})]})]},_.id))})]})}),r&&a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:['Images in "',r.title,'"']}),a.jsxs("div",{className:"mb-6 p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[a.jsx("h4",{className:"font-medium mb-3 text-gray-900 dark:text-white",children:"Upload Images"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("input",{type:"file",multiple:!0,accept:".png,.jpg,.jpeg,.webp",onChange:_=>x(_.target.files),className:"text-sm"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Supported formats: PNG, JPG, JPEG, WebP. Thumbnails generated automatically."})]}),a.jsxs("div",{className:"space-y-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Positive Prompt (Optional)"}),a.jsx("textarea",{value:E.positive,onChange:_=>A(z=>({...z,positive:_.target.value})),placeholder:"Enter positive prompt for all uploaded images...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Negative Prompt (Optional)"}),a.jsx("textarea",{value:E.negative,onChange:_=>A(z=>({...z,negative:_.target.value})),placeholder:"Enter negative prompt for all uploaded images...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Checkpoint (Optional)"}),a.jsx("input",{type:"text",value:E.checkpoint,onChange:_=>A(z=>({...z,checkpoint:_.target.value})),placeholder:"e.g., sd_xl_base_1.0.safetensors",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"LoRAs (Optional)"}),a.jsx("input",{type:"text",value:E.loras,onChange:_=>A(z=>({...z,loras:_.target.value})),placeholder:"Comma-separated: lora1, lora2, lora3",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm"})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"extractMetadata",checked:E.extractMetadata,onChange:_=>A(z=>({...z,extractMetadata:_.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"extractMetadata",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Auto-extract metadata from images (when manual fields are empty)"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:P,disabled:j||!m||m.length===0,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:j?"Uploading...":"Upload"}),(E.positive||E.negative||E.checkpoint||E.loras)&&a.jsx("button",{onClick:()=>A({positive:"",negative:"",checkpoint:"",loras:"",extractMetadata:!0}),className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Clear All Fields"})]})]}),i&&r?a.jsx("div",{className:"text-center py-4",children:"Loading images..."}):s.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No images in this gallery"}):a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map(_=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-700",children:a.jsx("img",{src:Bd(_.thumb)||Bd(_.src),alt:_.title||"Image",className:"w-full h-full object-cover",loading:"lazy"})}),a.jsxs("div",{className:"p-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ee(_)}),_.alt_text&&a.jsxs("p",{className:"text-xs text-gray-500",children:[a.jsx("span",{className:"font-medium",children:"Alt:"})," ",_.alt_text]}),_.prompt&&a.jsxs("p",{className:"text-xs text-gray-500",children:[a.jsx("span",{className:"font-medium",children:"Prompt:"})," ",_.prompt.length>50?_.prompt.substring(0,50)+"...":_.prompt]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>ae(_),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit"}),a.jsx("button",{onClick:()=>V(_.id),className:"text-xs text-red-600 hover:text-red-800",children:"Delete"})]})]}),_.checkpoint&&a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[a.jsx("span",{className:"font-medium",children:"Checkpoint:"})," ",_.checkpoint]}),_.loras&&_.loras.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"LoRAs:"}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:_.loras.map((z,le)=>a.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-0.5 rounded",children:z},le))})]})]})]},_.id))})]})})]})}function Wv(){const[e,t]=g.useState([]),[r,n]=g.useState(null),[s,l]=g.useState([]),[i,o]=g.useState(!1),[c,u]=g.useState(null),[d,f]=g.useState(null),[h,y]=g.useState(!1),[v,k]=g.useState(null),[b,p]=g.useState({title:"",slug:"",description:"",genres:[],primary_keywords:"",longtail_keywords:"",target_audience:"",cover_image:"",break_image:"",status:"draft"}),[m,x]=g.useState(!1),[j,T]=g.useState(!1),[E,A]=g.useState([]),[L,I]=g.useState(!1),[S,F]=g.useState("upload"),X=N=>N.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim().replace(/^-+|-+$/g,""),J=async(N,$)=>{const H=new FormData;H.append("image",N),H.append("type",$==="cover"?"cover":"pagebreak");const te=await fetch("/api/images/upload.php",{method:"POST",credentials:"same-origin",body:H});if(!te.ok){const at=await te.text();throw new Error(at||"Failed to upload image")}return(await te.json()).url},M=async N=>{var H;const $=(H=N.target.files)==null?void 0:H[0];if($){x(!0),u(null);try{const te=await J($,"cover");p(we=>({...we,cover_image:te})),f("Cover image uploaded successfully!")}catch(te){u(te.message||"Failed to upload cover image")}finally{x(!1)}}},C=async N=>{var H;const $=(H=N.target.files)==null?void 0:H[0];if($){T(!0),u(null);try{const te=await J($,"break");p(we=>({...we,break_image:te})),f("Page break image uploaded successfully!")}catch(te){u(te.message||"Failed to upload page break image")}finally{T(!1)}}},U=async()=>{try{const N=await fetch("/api/images/list-pagebreaks.php",{credentials:"same-origin"});if(!N.ok)throw new Error("Failed to load page breaks");const $=await N.json();A($.images||[])}catch(N){console.error("Failed to load page breaks:",N),A([])}},K=N=>{p($=>({...$,break_image:N})),I(!1),f("Page break image selected!")},[R,B]=g.useState(!1),[Q,P]=g.useState(null),[V,W]=g.useState({title:"",slug:"",content:"",chapter_number:1,status:"draft"}),[ae,ee]=g.useState(!1),[q,ve]=g.useState(null);g.useEffect(()=>{_()},[]);const _=async()=>{o(!0),u(null);try{const N=await fetch("/api/stories/list.php",{credentials:"same-origin"});if(!N.ok)throw new Error("Failed to load stories");const $=await N.json();t($.stories||[])}catch(N){u(N.message||"Failed to load stories")}finally{o(!1)}},z=async N=>{o(!0),u(null);try{const $=await fetch(`/api/chapters/list.php?story_id=${N}&limit=1000`,{credentials:"same-origin"});if(!$.ok)throw new Error("Failed to load chapters");const H=await $.json();l(H.chapters||[])}catch($){u($.message||"Failed to load chapters")}finally{o(!1)}},le=async N=>{N.preventDefault(),o(!0),u(null),f(null);try{const $=v?"/api/stories/update.php":"/api/stories/create.php",H=v?{id:v.id,...b}:b,te=await fetch($,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(H)});if(!te.ok){const we=await te.text();throw new Error(we||"Failed to save story")}f(v?"Story updated successfully!":"Story created successfully!"),y(!1),k(null),p({title:"",slug:"",description:"",genres:[],primary_keywords:"",longtail_keywords:"",target_audience:"",cover_image:"",break_image:"",status:"draft"}),await _()}catch($){u($.message||"Failed to save story")}finally{o(!1)}},He=async N=>{if(N.preventDefault(),!!r){o(!0),u(null),f(null);try{const $=Q?"/api/chapters/update.php":"/api/chapters/create.php",H=Q?{id:Q.id,...V}:{...V,story_id:r.id},te=await fetch($,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(H)});if(!te.ok){const we=await te.text();throw new Error(we||"Failed to save chapter")}f(Q?"Chapter updated successfully!":"Chapter created successfully!"),B(!1),P(null),W({title:"",slug:"",content:"",chapter_number:1,status:"draft"}),await z(r.id)}catch($){u($.message||"Failed to save chapter")}finally{o(!1)}}},Xe=async N=>{if(confirm(`Are you sure you want to delete "${N.title}"? This will also delete all chapters in this story.`)){o(!0),u(null);try{const $=await fetch("/api/stories/delete.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:N.id})});if(!$.ok){const H=await $.text();throw new Error(H||"Failed to delete story")}f("Story deleted successfully!"),(r==null?void 0:r.id)===N.id&&(n(null),l([])),await _()}catch($){u($.message||"Failed to delete story")}finally{o(!1)}}},Pt=async N=>{if(confirm("Are you sure you want to delete this chapter?")){o(!0),u(null);try{const $=await fetch("/api/chapters/delete.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:N})});if(!$.ok){const H=await $.text();throw new Error(H||"Failed to delete chapter")}f("Chapter deleted successfully!"),r&&await z(r.id)}catch($){u($.message||"Failed to delete chapter")}finally{o(!1)}}},pt=N=>{k(N),p({title:N.title,slug:N.slug,description:N.description||"",genres:N.genres||[],primary_keywords:N.primary_keywords||"",longtail_keywords:N.longtail_keywords||"",target_audience:N.target_audience||"",cover_image:N.cover_image||"",break_image:N.break_image||"",status:N.status}),F("upload"),U(),y(!0)},Mn=N=>{P(N),W({title:N.title,slug:N.slug,content:N.content,chapter_number:N.chapter_number,status:N.status}),B(!0)},Dn=()=>s.length===0?1:Math.max(...s.map(N=>N.chapter_number))+1,nr=async N=>{const $=N.target.files;if(!(!$||$.length===0||!r)){ee(!0),u(null),ve(null);try{const H=new FormData;H.append("story_id",r.id.toString());for(let at=0;at<$.length;at++)H.append("markdown_files[]",$[at]);const te=await fetch("/api/chapters/bulk-upload.php",{method:"POST",credentials:"same-origin",body:H});if(!te.ok){const at=await te.text();throw new Error(at||"Failed to upload chapters")}const we=await te.json();ve(we),we.success&&(f(`Successfully uploaded ${we.uploaded_count} chapters!`),await z(r.id)),we.errors&&we.errors.length>0&&u(`Some files had errors: ${we.errors.join(", ")}`)}catch(H){u(H.message||"Failed to upload chapters")}finally{ee(!1),N.target.value=""}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Story Manager"}),a.jsx("button",{onClick:()=>{y(!0),k(null),p({title:"",slug:"",description:"",genres:[],primary_keywords:"",longtail_keywords:"",target_audience:"",cover_image:"",break_image:"",status:"draft"}),F("upload"),U()},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Story"})]}),c&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:c}),d&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded-lg",children:d}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg w-full max-w-2xl max-h-[95vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:v?"Edit Story":"Create Story"}),a.jsxs("form",{onSubmit:le,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),a.jsx("input",{type:"text",value:b.title,onChange:N=>{const $=N.target.value;p(H=>({...H,title:$,slug:v?H.slug:X($)}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slug (auto-generated)"}),a.jsx("input",{type:"text",value:b.slug,onChange:N=>p($=>({...$,slug:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white bg-gray-50 dark:bg-gray-600",required:!0,placeholder:"Will be auto-generated from title"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Used in URLs: /story/",b.slug||"your-story-slug"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),a.jsx("textarea",{value:b.description,onChange:N=>p($=>({...$,description:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:3})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"SEO & Marketing"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Genres"}),b.genres.length>0&&a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Selected Genres:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.genres.map((N,$)=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:[N,a.jsx("button",{type:"button",onClick:()=>{const H=b.genres.filter((te,we)=>we!==$);p(te=>({...te,genres:H}))},className:"ml-1 text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100",children:""})]},$))})]}),a.jsxs("div",{className:"space-y-4 max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Sci-Fi"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Science Fiction","Space Opera","Cyberpunk","Dystopian","Post-Apocalyptic","Time Travel","Alternate History","Hard Science Fiction","Soft Science Fiction","Military Sci-Fi"].map(N=>a.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:b.genres.includes(N),onChange:$=>{$.target.checked?p(H=>({...H,genres:[...H.genres,N]})):p(H=>({...H,genres:H.genres.filter(te=>te!==N)}))},className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:N})]},N))})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Fantasy/Magic"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["High Fantasy","Urban Fantasy","Dark Fantasy","Epic Fantasy","Sword and Sorcery","Magical Realism","Paranormal","Supernatural","Mythology","Fairy Tale Retelling"].map(N=>a.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:b.genres.includes(N),onChange:$=>{$.target.checked?p(H=>({...H,genres:[...H.genres,N]})):p(H=>({...H,genres:H.genres.filter(te=>te!==N)}))},className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:N})]},N))})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Web Fiction"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["LitRPG","GameLit","Progression Fantasy","Cultivation","System Apocalypse","Portal Fantasy","Isekai","Virtual Reality","Artificial Intelligence","Genetic Engineering"].map(N=>a.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:b.genres.includes(N),onChange:$=>{$.target.checked?p(H=>({...H,genres:[...H.genres,N]})):p(H=>({...H,genres:H.genres.filter(te=>te!==N)}))},className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:N})]},N))})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Erotica/Adult"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Erotica","Romance","Erotic Romance","BDSM","Harem","Reverse Harem","Adult Fantasy","Adult Sci-Fi","Steamy Romance"].map(N=>a.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:b.genres.includes(N),onChange:$=>{$.target.checked?p(H=>({...H,genres:[...H.genres,N]})):p(H=>({...H,genres:H.genres.filter(te=>te!==N)}))},className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:N})]},N))})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Themes/Elements"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Adventure","Action","Drama","Comedy","Thriller","Mystery","Horror","Slice of Life","Coming of Age"].map(N=>a.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:b.genres.includes(N),onChange:$=>{$.target.checked?p(H=>({...H,genres:[...H.genres,N]})):p(H=>({...H,genres:H.genres.filter(te=>te!==N)}))},className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:N})]},N))})]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select multiple genres that best describe your story"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Primary Keywords"}),a.jsx("input",{type:"text",value:b.primary_keywords,onChange:N=>p($=>({...$,primary_keywords:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"adventure story, online novel, web serial"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Main SEO keywords, comma-separated"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Long-tail Keywords"}),a.jsx("textarea",{value:b.longtail_keywords,onChange:N=>p($=>({...$,longtail_keywords:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:2,placeholder:"free sci-fi story online, destiny among the stars web novel, AI generated sci-fi artwork, space colonization fiction"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Specific search phrases your target audience might use"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Audience"}),a.jsx("input",{type:"text",value:b.target_audience,onChange:N=>p($=>({...$,target_audience:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Readers, story enthusiasts, novel fans"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Describe your ideal readers for better targeting"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cover Image"}),b.cover_image?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative inline-block",children:[a.jsx("img",{src:b.cover_image,alt:"Cover preview",className:"w-32 h-48 object-cover rounded-lg border border-gray-300 dark:border-gray-600"}),a.jsx("button",{type:"button",onClick:()=>p(N=>({...N,cover_image:""})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600",children:""})]}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("label",{className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 cursor-pointer text-sm",children:[m?"Uploading...":"Change Cover",a.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"hidden",disabled:m})]})})]}):a.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-gray-400",children:a.jsx("svg",{className:"mx-auto h-12 w-12",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:a.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.jsxs("label",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 cursor-pointer",children:[m?"Uploading...":"Upload Cover Image",a.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"hidden",disabled:m})]})}),a.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page Break Image (Optional)"}),a.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>F("upload"),className:`px-3 py-1 text-xs rounded-md transition-colors ${S==="upload"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Upload New"}),a.jsx("button",{type:"button",onClick:()=>F("select"),className:`px-3 py-1 text-xs rounded-md transition-colors ${S==="select"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Choose Existing"})]})]}),b.break_image?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative inline-block",children:[a.jsx("img",{src:b.break_image,alt:"Page break preview",className:"w-24 h-6 object-cover rounded border border-gray-300 dark:border-gray-600"}),a.jsx("button",{type:"button",onClick:()=>p(N=>({...N,break_image:""})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:""})]}),a.jsx("div",{className:"flex gap-2",children:S==="upload"?a.jsxs("label",{className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 cursor-pointer text-sm",children:[j?"Uploading...":"Change Image",a.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden",disabled:j})]}):a.jsx("button",{type:"button",onClick:()=>I(!0),className:"bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 text-sm",children:"Choose Different"})})]}):a.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:S==="upload"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.jsxs("label",{className:"bg-gray-600 text-white px-3 py-2 rounded-lg hover:bg-gray-700 cursor-pointer text-sm",children:[j?"Uploading...":"Upload Page Break Image",a.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden",disabled:j})]})}),a.jsx("p",{className:"text-xs text-gray-500",children:"Replaces --- in chapter content"})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{type:"button",onClick:()=>I(!0),className:"bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 text-sm",children:"Choose from Existing Images"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Select from previously uploaded page break images"})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),a.jsxs("select",{value:b.status,onChange:N=>p($=>({...$,status:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"published",children:"Published"}),a.jsx("option",{value:"archived",children:"Archived"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:i?"Saving...":v?"Update":"Create"}),a.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})]})}),R&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:Q?"Edit Chapter":"Create Chapter"}),a.jsxs("form",{onSubmit:He,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),a.jsx("input",{type:"text",value:V.title,onChange:N=>{const $=N.target.value;W(H=>({...H,title:$,slug:Q?H.slug:X($)}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slug (auto-generated)"}),a.jsx("input",{type:"text",value:V.slug,onChange:N=>W($=>({...$,slug:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white bg-gray-50 dark:bg-gray-600",required:!0,placeholder:"Will be auto-generated from title"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Chapter Number"}),a.jsx("input",{type:"number",min:"0",value:V.chapter_number,onChange:N=>W($=>({...$,chapter_number:parseInt(N.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use 0 for prologue or special chapters"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),a.jsxs("select",{value:V.status,onChange:N=>W($=>({...$,status:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"published",children:"Published"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content (Markdown)"}),a.jsxs("div",{className:"mb-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Markdown File (Optional)"}),a.jsx("input",{type:"file",accept:".md,.markdown,.txt",onChange:N=>{var H;const $=(H=N.target.files)==null?void 0:H[0];if($){const te=new FileReader;te.onload=we=>{var sr;const at=(sr=we.target)==null?void 0:sr.result;W(ar=>({...ar,content:at}))},te.readAsText($)}},className:"text-sm"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a .md file to automatically populate the content below"})]}),a.jsx("textarea",{value:V.content,onChange:N=>W($=>({...$,content:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white font-mono text-sm",rows:15,placeholder:"Write your chapter content in Markdown format or upload a .md file above...",required:!0}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[a.jsx("strong",{children:"Markdown Tips:"})," Use # for headers, **bold**, *italic*, `code`, [links](url), and > for quotes"]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:i?"Saving...":Q?"Update Chapter":"Create Chapter"}),a.jsx("button",{type:"button",onClick:()=>B(!1),className:"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Stories"}),i&&!r?a.jsx("div",{className:"text-center py-4",children:"Loading stories..."}):e.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No stories found"}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(N=>a.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${(r==null?void 0:r.id)===N.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,onClick:()=>{n(N),z(N.id)},children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:N.title}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:$=>{$.stopPropagation(),pt(N)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),a.jsx("button",{onClick:$=>{$.stopPropagation(),Xe(N)},className:"text-red-600 hover:text-red-800 text-sm ml-2",children:"Delete"})]})]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Slug: ",N.slug]}),N.description&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:N.description}),a.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[a.jsx("span",{className:`px-2 py-1 rounded ${N.status==="published"?"bg-green-100 text-green-800":N.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:N.status}),a.jsxs("span",{children:[N.chapter_count||0," chapters"]})]})]},N.id))})]})}),r&&a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:['Chapters in "',r.title,'"']}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("label",{className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors cursor-pointer",children:[ae?"Uploading...":"Bulk Upload",a.jsx("input",{type:"file",multiple:!0,accept:".md,.markdown,.txt",onChange:nr,className:"hidden",disabled:ae})]}),a.jsx("button",{onClick:()=>{B(!0),P(null),W({title:"",slug:"",content:"",chapter_number:Dn(),status:"draft"})},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Add Chapter"})]})]}),q&&a.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-300 mb-2",children:"Bulk Upload Results"}),a.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-400 mb-2",children:["Successfully uploaded ",q.uploaded_count," chapters"]}),q.chapters&&q.chapters.length>0&&a.jsx("div",{className:"space-y-1",children:q.chapters.map((N,$)=>a.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",N.filename,"  Chapter ",N.chapter_number,": ",N.title]},$))}),q.errors&&q.errors.length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-300 dark:border-blue-700",children:[a.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-1",children:"Errors:"}),q.errors.map((N,$)=>a.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400",children:[" ",N]},$))]}),a.jsx("button",{onClick:()=>ve(null),className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",children:"Dismiss"})]}),i&&r?a.jsx("div",{className:"text-center py-4",children:"Loading chapters..."}):s.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No chapters in this story"}):a.jsx("div",{className:"space-y-3",children:s.sort((N,$)=>N.chapter_number-$.chapter_number).map(N=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Chapter ",N.chapter_number]}),a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:N.title}),a.jsx("span",{className:`px-2 py-1 rounded text-xs ${N.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:N.status})]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Slug: ",N.slug]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:[N.content.substring(0,200),"..."]})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsx("button",{onClick:()=>Mn(N),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),a.jsx("button",{onClick:()=>Pt(N.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]})},N.id))})]})}),L&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Choose Page Break Image"}),a.jsx("button",{onClick:()=>I(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("p",{children:"No page break images found."}),a.jsx("p",{className:"text-sm mt-2",children:"Upload some page break images first to use this feature."})]}):a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:E.map((N,$)=>a.jsxs("div",{className:"relative group cursor-pointer border-2 border-transparent hover:border-blue-500 rounded-lg overflow-hidden",onClick:()=>K(N.url),children:[a.jsx("img",{src:N.url,alt:`Page break ${$+1}`,className:"w-full h-16 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:a.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:a.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:N.filename})]},$))}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:()=>I(!1),className:"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})})]})})]})}function Vv(){const[e,t]=g.useState({name:"",bio:"",tagline:""}),[r,n]=g.useState(!0),[s,l]=g.useState(!1),[i,o]=g.useState(""),[c,u]=g.useState("");g.useEffect(()=>{d()},[]);const d=async()=>{try{const y=await(await fetch("/api/author/get.php")).json();y.success&&t(y.profile)}catch{o("Failed to load author profile")}finally{n(!1)}},f=async()=>{l(!0),o(""),u("");try{const y=await(await fetch("/api/author/update.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)})).json();y.success?(u("Profile updated successfully!"),setTimeout(()=>u(""),3e3)):o(y.error||"Failed to update profile")}catch{o("Network error occurred")}finally{l(!1)}};return r?a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsx("div",{className:"text-center",children:"Loading..."})}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Author Profile"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage your author information displayed on the homepage"})]}),i&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:i}),c&&a.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:c}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),a.jsx("input",{type:"text",value:e.name,onChange:h=>t({...e,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your author name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),a.jsx("input",{type:"text",value:e.bio,onChange:h=>t({...e,bio:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Author & Writer"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tagline"}),a.jsx("input",{type:"text",value:e.tagline,onChange:h=>t({...e,tagline:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Stories that captivate and inspire"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Image URL (optional)"}),a.jsx("input",{type:"url",value:e.profile_image||"",onChange:h=>t({...e,profile_image:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/profile.jpg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Light Theme Background Image URL (optional)"}),a.jsx("input",{type:"url",value:e.background_image_light||"",onChange:h=>t({...e,background_image_light:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/light-background.jpg"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to use default: /images/lofi_light_bg.webp"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dark Theme Background Image URL (optional)"}),a.jsx("input",{type:"url",value:e.background_image_dark||"",onChange:h=>t({...e,background_image_dark:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/dark-background.jpg"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to use default: /images/lofi_bg.webp"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Domain (for SEO)"}),a.jsx("input",{type:"text",value:e.site_domain||"",onChange:h=>t({...e,site_domain:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"example.com"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Domain name used for SEO URLs and canonical links. Leave empty to use server detection."})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{onClick:f,disabled:s,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:s?"Saving...":"Save Profile"})})]}),a.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Preview"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("div",{className:"font-semibold",children:e.name||"Your Name"}),a.jsxs("div",{children:[e.bio||"Your Bio"," | ",e.tagline||"Your Tagline"]})]})]})]})}function Gv(){const[e,t]=g.useState({}),[r,n]=g.useState(!0),[s,l]=g.useState(!1),[i,o]=g.useState(""),[c,u]=g.useState(""),d=bf.map(v=>({key:v,label:No[v],placeholder:oy[v]}));g.useEffect(()=>{f()},[]);const f=async()=>{try{const k=await(await fetch("/api/socials/get.php")).json();k.success&&t(k.socials||{})}catch{o("Failed to load social media links")}finally{n(!1)}},h=async()=>{l(!0),o(""),u("");try{const k=await(await fetch("/api/socials/update.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)})).json();k.success?(u("Social media links updated successfully!"),setTimeout(()=>u(""),3e3),await f()):o(k.error||"Failed to update social media links")}catch{o("Network error occurred")}finally{l(!1)}},y=(v,k)=>{t(b=>({...b,[v]:k}))};return r?a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsx("div",{className:"text-center",children:"Loading..."})}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Social Media Links"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage social media links displayed across all sites"})]}),i&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:i}),c&&a.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:c}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(v=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:v.label}),a.jsx("input",{type:"url",value:e[v.key]||"",onChange:k=>y(v.key,k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:v.placeholder})]},v.key))}),a.jsx("div",{className:"mt-8 pt-4 border-t border-gray-200",children:a.jsx("button",{onClick:h,disabled:s,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:s?"Saving...":"Save Social Links"})}),a.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Active Links"}),a.jsxs("div",{className:"space-y-2",children:[Object.entries(e).filter(([v,k])=>k).map(([v,k])=>a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"font-medium capitalize",children:[v,":"]}),a.jsx("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 truncate max-w-xs",children:k})]},v)),Object.keys(e).filter(v=>e[v]).length===0&&a.jsx("p",{className:"text-gray-500 text-sm",children:"No social links configured yet."})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:" Note"}),a.jsx("p",{className:"text-sm text-blue-800",children:"These social media links will appear on all sites: the author homepage, image galleries, and story pages. Leave fields empty to hide specific platforms."})]})]})}function Qv(){const[e,t]=g.useState([]),[r,n]=g.useState([]),[s,l]=g.useState(null),[i,o]=g.useState(!1),[c,u]=g.useState(null),[d,f]=g.useState(null),[h,y]=g.useState("all"),[v,k]=g.useState("all"),[b,p]=g.useState(!1),[m,x]=g.useState({ip_address:"",reason:""});g.useEffect(()=>{j()},[h,v]);const j=async()=>{o(!0),u(null);try{await Promise.all([T(),E(),A()])}catch(C){u(C.message||"Failed to load data")}finally{o(!1)}},T=async()=>{const C=new URLSearchParams;h!=="all"&&C.set("status",h),v!=="all"&&C.set("type",v);const U=await fetch(`/api/admin/comments/list.php?${C.toString()}`,{credentials:"same-origin"});if(!U.ok)throw new Error("Failed to load comments");const K=await U.json();t(K.comments||[])},E=async()=>{const C=await fetch("/api/admin/banned-ips/list.php",{credentials:"same-origin"});if(!C.ok)throw new Error("Failed to load banned IPs");const U=await C.json();n(U.banned_ips||[])},A=async()=>{const C=await fetch("/api/admin/mod-stats.php",{credentials:"same-origin"});if(!C.ok)throw new Error("Failed to load stats");const U=await C.json();l(U)},L=async(C,U)=>{o(!0),u(null);try{const K=await fetch("/api/admin/comments/moderate.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:C,action:U})});if(!K.ok){const R=await K.text();throw new Error(R||`Failed to ${U} comment`)}f(`Comment ${U}d successfully!`),await j()}catch(K){u(K.message||`Failed to ${U} comment`)}finally{o(!1)}},I=async C=>{C.preventDefault(),o(!0),u(null),f(null);try{const U=await fetch("/api/admin/ban-ip.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(m)});if(!U.ok){const K=await U.text();throw new Error(K||"Failed to ban IP")}f("IP address banned successfully!"),p(!1),x({ip_address:"",reason:""}),await E(),await A()}catch(U){u(U.message||"Failed to ban IP")}finally{o(!1)}},S=async C=>{if(confirm("Are you sure you want to unban this IP address?")){o(!0),u(null);try{const U=await fetch("/api/admin/unban-ip.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({id:C})});if(!U.ok){const K=await U.text();throw new Error(K||"Failed to unban IP")}f("IP address unbanned successfully!"),await E(),await A()}catch(U){u(U.message||"Failed to unban IP")}finally{o(!1)}}},F=C=>{x({ip_address:C,reason:"Spam/inappropriate content"}),p(!0)},X=C=>new Date(C).toLocaleString(),J=C=>({type:C.comment_type==="image"?"Image":"Chapter",title:C.content_title}),M=C=>C.is_approved===1?"approved":"pending";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Moderation Manager"}),a.jsx("button",{onClick:()=>p(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Ban IP Address"})]}),c&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:c}),d&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded-lg",children:d}),s&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.pending_comments}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Comments"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.approved_comments}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approved Comments"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.rejected_comments}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejected Comments"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-600",children:s.banned_ips}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Banned IPs"})]})]}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Ban IP Address"}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"IP Address"}),a.jsx("input",{type:"text",value:m.ip_address,onChange:C=>x(U=>({...U,ip_address:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"192.168.1.1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reason (Optional)"}),a.jsx("textarea",{value:m.reason,onChange:C=>x(U=>({...U,reason:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:3,placeholder:"Reason for banning this IP..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:i?"Banning...":"Ban IP"}),a.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status Filter"}),a.jsxs("select",{value:h,onChange:C=>y(C.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"all",children:"All Comments"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content Type"}),a.jsxs("select",{value:v,onChange:C=>k(C.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"all",children:"All Content"}),a.jsx("option",{value:"images",children:"Images"}),a.jsx("option",{value:"stories",children:"Stories"})]})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Comments"}),i?a.jsx("div",{className:"text-center py-4",children:"Loading comments..."}):e.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No comments found"}):a.jsx("div",{className:"space-y-4",children:e.map(C=>{const U=J(C);return a.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:C.author_name}),C.author_email&&a.jsx("span",{className:"text-sm text-gray-500",children:C.author_email}),a.jsxs("span",{className:"text-xs text-gray-400",children:["IP: ",C.ip_address]}),a.jsx("button",{onClick:()=>F(C.ip_address),className:"text-xs text-red-600 hover:text-red-800",children:"Ban IP"})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs ${M(C)==="approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:M(C)}),a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["on ",U.type,":",a.jsx("a",{href:C.content_link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline ml-1",children:U.title})]}),a.jsxs("span",{className:"text-xs text-gray-500",children:["(",C.content_context,")"]})]}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:C.content}),a.jsx("p",{className:"text-xs text-gray-500",children:X(C.created_at)})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[M(C)==="pending"&&a.jsx(a.Fragment,{children:a.jsx("button",{onClick:()=>L(C.id,"approve"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"Approve"})}),a.jsx("button",{onClick:()=>L(C.id,"delete"),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700",children:"Delete"})]})]})},C.id)})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Banned IP Addresses"}),r.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No banned IPs"}):a.jsx("div",{className:"space-y-3",children:r.map(C=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:C.ip_address}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Banned by: ",C.banned_by_username||`User ${C.banned_by}`]})]}),C.reason&&a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Reason: ",C.reason]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Banned on: ",X(C.banned_at)]})]}),a.jsx("button",{onClick:()=>S(C.id),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"Unban"})]})},C.id))})]})})]})}function Yv(){const[e,t]=g.useState(""),[r,n]=g.useState(""),[s,l]=g.useState(""),[i,o]=g.useState(!1),[c,u]=g.useState(""),[d,f]=g.useState(""),h=async y=>{if(y.preventDefault(),o(!0),f(""),u(""),r!==s){f("New passwords do not match"),o(!1);return}if(r.length<8){f("New password must be at least 8 characters long"),o(!1);return}try{const k=await(await fetch("/api/auth/change-password.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({currentPassword:e,newPassword:r})})).json();k.success?(u("Password changed successfully!"),t(""),n(""),l("")):f(k.error||"Failed to change password")}catch{f("Network error occurred")}finally{o(!1)}};return a.jsx("div",{className:"bg-white shadow rounded-lg",children:a.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Change Password"}),c&&a.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:c}),d&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:d}),a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),a.jsx("input",{type:"password",value:e,onChange:y=>t(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter current password",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsx("input",{type:"password",value:r,onChange:y=>n(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new password (min 8 characters)",required:!0,minLength:8})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:s,onChange:y=>l(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm new password",required:!0,minLength:8})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{type:"submit",disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:i?"Changing Password...":"Change Password"})})]}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password Requirements"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" Minimum 8 characters long"}),a.jsx("li",{children:" Use a unique password you haven't used before"}),a.jsx("li",{children:" Consider using a mix of letters, numbers, and symbols"})]})]})]})})}function Kv(){const[e,t]=g.useState({covers:[],pagebreaks:[],general:[]}),[r,n]=g.useState(!1),[s,l]=g.useState(null),[i,o]=g.useState(null),[c,u]=g.useState("covers"),[d,f]=g.useState(!1),[h,y]=g.useState(!1),v=g.useRef(null);g.useEffect(()=>{k()},[]);const k=async()=>{n(!0),l(null);try{const S=await fetch("/api/images/manage.php",{credentials:"same-origin"});if(!S.ok)throw new Error("Failed to load uploads");const F=await S.json();t(F.uploads||{covers:[],pagebreaks:[],general:[]})}catch(S){l(S.message||"Failed to load uploads")}finally{n(!1)}},b=async S=>{if(confirm(`Are you sure you want to delete "${S.filename}"? This action cannot be undone.`)){l(null);try{const F=await fetch("/api/images/manage.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({action:"delete",path:S.path})});if(!F.ok){const X=await F.json();throw new Error(X.error||"Failed to delete file")}o("File deleted successfully!"),await k()}catch(F){l(F.message||"Failed to delete file")}}},p=async S=>{if(!S||S.length===0)return;const F=S[0];if(!["image/jpeg","image/png","image/gif","image/webp"].includes(F.type)){l("Invalid file type. Only JPEG, PNG, GIF, and WebP are allowed.");return}const J=5*1024*1024;if(F.size>J){l("File too large. Maximum size is 5MB.");return}f(!0),l(null),o(null);try{const M=new FormData;M.append("image",F),M.append("type","general");const C=await fetch("/api/images/upload.php",{method:"POST",credentials:"same-origin",body:M});if(!C.ok){const K=await C.json();throw new Error(K.error||"Upload failed")}const U=await C.json();o(`File "${F.name}" uploaded successfully!`),console.log("Upload response:",U),await k(),v.current&&(v.current.value="")}catch(M){l(M.message||"Upload failed")}finally{f(!1)}},m=S=>{S.preventDefault(),y(!0)},x=S=>{S.preventDefault(),y(!1)},j=S=>{S.preventDefault(),y(!1),p(S.dataTransfer.files)},T=S=>{p(S.target.files)},E=S=>{if(S===0)return"0 Bytes";const F=1024,X=["Bytes","KB","MB","GB"],J=Math.floor(Math.log(S)/Math.log(F));return parseFloat((S/Math.pow(F,J)).toFixed(2))+" "+X[J]},A=S=>new Date(S*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),L=()=>e.covers.length+e.pagebreaks.length+e.general.length,I=()=>{const S=[...e.covers,...e.pagebreaks,...e.general].reduce((F,X)=>F+X.size,0);return E(S)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Upload Manager"}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[L()," files  ",I()," total"]})]}),a.jsx("button",{onClick:k,disabled:r,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:r?"Refreshing...":"Refresh"})]}),s&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:s}),i&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded-lg",children:i}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:["covers","pagebreaks","general"].map(S=>a.jsxs("button",{onClick:()=>u(S),className:`py-2 px-1 border-b-2 font-medium text-sm capitalize transition-colors ${c===S?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[S," (",e[S].length,")"]},S))})}),c==="general"&&a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow mb-6",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Upload Images"}),a.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${h?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,onDragOver:m,onDragLeave:x,onDrop:j,children:[a.jsx("input",{ref:v,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:T,className:"hidden"}),d?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"animate-spin mx-auto h-8 w-8 border-2 border-blue-600 border-t-transparent rounded-full"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Uploading..."})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:a.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Drag and drop an image here, or"," ",a.jsx("button",{onClick:()=>{var S;return(S=v.current)==null?void 0:S.click()},className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"browse to upload"})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Supports JPEG, PNG, GIF, WebP (max 5MB)"})]})]})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:a.jsx("div",{className:"p-6",children:r?a.jsx("div",{className:"text-center py-8",children:"Loading uploads..."}):e[c].length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsxs("p",{children:["No ",c," found"]}),c==="general"?a.jsx("p",{className:"text-sm mt-2",children:"Use the upload area above to add images."}):a.jsxs("p",{className:"text-sm mt-2",children:["Upload some ",c," to see them here."]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e[c].map((S,F)=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"aspect-w-16 aspect-h-9 bg-gray-100 dark:bg-gray-700",children:[a.jsx("img",{src:S.url,alt:S.filename,className:"w-full h-32 object-cover",onError:X=>{var M;const J=X.target;J.style.display="none",(M=J.nextElementSibling)==null||M.classList.remove("hidden")}}),a.jsx("div",{className:"hidden w-full h-32 flex items-center justify-center bg-gray-100 dark:bg-gray-700",children:a.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",title:S.filename,children:S.filename}),a.jsxs("div",{className:"mt-2 space-y-1 text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("p",{children:["Size: ",E(S.size)]}),a.jsxs("p",{children:["Modified: ",A(S.modified)]})]}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[a.jsx("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 text-white text-xs px-3 py-2 rounded hover:bg-blue-700 transition-colors text-center",children:"View"}),a.jsx("button",{onClick:()=>b(S),className:"flex-1 bg-red-600 text-white text-xs px-3 py-2 rounded hover:bg-red-700 transition-colors",children:"Delete"})]})]})]},F))})})})]})}function qv(){const[e,t]=g.useState(null),[r,n]=g.useState([]),[s,l]=g.useState([]),[i,o]=g.useState(!0),[c,u]=g.useState(""),[d,f]=g.useState(30),[h,y]=g.useState("device"),[v,k]=g.useState("stories");g.useEffect(()=>{b()},[d,h,v]);const b=async()=>{o(!0),u("");try{const x=await fetch(`/api/admin/analytics/summary.php?days=${d}`,{credentials:"same-origin"});if(!x.ok)throw new Error("Failed to load summary data");const j=await x.json();j.success&&t(j.data);const T=await fetch(`/api/admin/analytics/segment.php?days=${d}&segment=${h}`,{credentials:"same-origin"});if(T.ok){const A=await T.json();A.success&&n(A.data.segments)}const E=await fetch(`/api/admin/analytics/content.php?days=${d}&type=${v}`,{credentials:"same-origin"});if(E.ok){const A=await E.json();A.success&&l(A.data.content)}}catch(x){u(x instanceof Error?x.message:"Failed to load analytics data")}finally{o(!1)}},p=x=>new Intl.NumberFormat().format(x),m=x=>`${x}%`;return i?a.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:a.jsx("div",{className:"px-4 py-5 sm:p-6",children:a.jsx("div",{className:"text-center",children:"Loading analytics..."})})}):c?a.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:a.jsx("div",{className:"px-4 py-5 sm:p-6",children:a.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Error: ",c]})})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:a.jsx("div",{className:"px-4 py-5 sm:p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 sm:mb-0",children:"Analytics Dashboard"}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("select",{value:d,onChange:x=>f(Number(x.target.value)),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[a.jsx("option",{value:7,children:"Last 7 days"}),a.jsx("option",{value:30,children:"Last 30 days"}),a.jsx("option",{value:90,children:"Last 90 days"}),a.jsx("option",{value:365,children:"Last year"})]}),a.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Refresh"})]})]})})}),e&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(tn,{title:"Total Views",value:p(e.summary.total_views),subtitle:`${e.period_days} days`,icon:""}),a.jsx(tn,{title:"Unique Visitors",value:p(e.summary.unique_visitors),subtitle:`${e.period_days} days`,icon:""}),a.jsx(tn,{title:"Story Views",value:p(e.summary.story_views),subtitle:"Story page visits",icon:""}),a.jsx(tn,{title:"Chapter Views",value:p(e.summary.chapter_views),subtitle:"Chapter reads",icon:""}),a.jsx(tn,{title:"Gallery Views",value:p(e.summary.gallery_views),subtitle:"Gallery visits",icon:""}),a.jsx(tn,{title:"Avg Reading Depth",value:m(e.summary.avg_reading_depth),subtitle:"Chapter completion",icon:""})]}),e&&e.top_stories.length>0&&a.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:a.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Top Stories (",e.period_days," days)"]}),a.jsx("div",{className:"space-y-3",children:e.top_stories.slice(0,10).map((x,j)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-6",children:["#",j+1]}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white ml-3",children:x.story_slug})]}),a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[p(x.views)," views"]})]},x.story_slug))})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:a.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Audience Segments"}),a.jsxs("select",{value:h,onChange:x=>y(x.target.value),className:"mt-2 sm:mt-0 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[a.jsx("option",{value:"device",children:"Device Type"}),a.jsx("option",{value:"browser",children:"Browser"}),a.jsx("option",{value:"referrer",children:"Referrer"}),a.jsx("option",{value:"hour",children:"Hour of Day"}),a.jsx("option",{value:"day_of_week",children:"Day of Week"}),a.jsx("option",{value:"content_type",children:"Content Type"})]})]}),a.jsx("div",{className:"space-y-3",children:r.slice(0,10).map((x,j)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-6",children:["#",j+1]}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white ml-3",children:x.segment})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[p(x.views)," views"]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[p(x.unique_visitors)," unique"]})]})]},x.segment))})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:a.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Content Performance"}),a.jsxs("select",{value:v,onChange:x=>k(x.target.value),className:"mt-2 sm:mt-0 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[a.jsx("option",{value:"stories",children:"Stories"}),a.jsx("option",{value:"chapters",children:"Chapters"}),a.jsx("option",{value:"galleries",children:"Galleries"}),a.jsx("option",{value:"pages",children:"Pages"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx(Zv,{contentType:v,data:s})})]})})]})}function tn({title:e,value:t,subtitle:r,icon:n}){return a.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:a.jsx("div",{className:"p-5",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("span",{className:"text-2xl",children:n})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:a.jsxs("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:e}),a.jsx("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t}),a.jsx("dd",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})})]})})})}function Zv({contentType:e,data:t}){const r=n=>new Intl.NumberFormat().format(n);return e==="stories"?a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Story"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Views"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unique Readers"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Avg Depth"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Chapters"})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.slice(0,20).map(n=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:n.title}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:n.slug})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(n.total_views)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(n.unique_readers)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[n.avg_reading_depth,"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(n.total_chapters)})]},n.slug))})]}):e==="chapters"?a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Chapter"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Views"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unique Readers"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Avg Depth"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Avg Time"})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.slice(0,20).map(n=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:["Ch. ",n.chapter_number,": ",n.title]}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:n.story_title})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(n.views)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(n.unique_readers)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[n.avg_reading_depth,"%"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[Math.round(n.avg_time_spent),"s"]})]},n.id))})]}):e==="galleries"?a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Gallery"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Views"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unique Visitors"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Images"})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.slice(0,20).map(n=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:n.title}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:n.slug})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(n.total_views)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(n.unique_visitors)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(n.total_images)})]},n.id))})]}):e==="pages"?a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Page"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Views"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unique Visitors"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Avg Time"})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.slice(0,20).map((n,s)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:n.page_title||"Untitled"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:n.page_path})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(n.views)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(n.unique_visitors)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[Math.round(n.avg_time_on_page),"s"]})]},s))})]}):a.jsx("div",{children:"No data available"})}function Xv(){const e=Qr(),r=(()=>{const n=e.pathname.split("/").filter(Boolean);n[0]==="admin"&&n.shift();const s=[{label:"Dashboard",path:"/admin"}],l={author:"Author Profile",galleries:"Image Galleries",stories:"Stories & Chapters",socials:"Social Media",moderation:"Moderation",password:"Change Password",analytics:"Analytics"};let i="/admin";return n.forEach(o=>{i+=`/${o}`;const c=l[o]||o.charAt(0).toUpperCase()+o.slice(1);s.push({label:c,path:i})}),s})();return r.length<=1?null:a.jsx("nav",{className:"bg-white border-b border-gray-200 px-4 py-3",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx("ol",{className:"flex items-center space-x-2 text-sm",children:r.map((n,s)=>a.jsxs("li",{className:"flex items-center",children:[s>0&&a.jsx("svg",{className:"w-4 h-4 text-gray-400 mx-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),s===r.length-1?a.jsx("span",{className:"text-gray-500 font-medium",children:n.label}):a.jsx(Ue,{to:n.path,className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",children:n.label})]},n.path))})})})}function Jv(){const[e,t]=g.useState(!1),[r,n]=g.useState(null),[s,l]=g.useState(!0);g.useEffect(()=>{i()},[]);const i=async()=>{try{const u=await fetch("/api/auth/me.php",{credentials:"same-origin"});if(u.ok){const d=await u.json();d.user&&(n(d.user),t(!0))}}catch(u){console.error("Auth check failed:",u)}finally{l(!1)}},o=async(u,d)=>{try{const h=await(await fetch("/api/auth/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({username:u,password:d})})).json();return h.success&&h.user?(n(h.user),t(!0),{success:!0}):{success:!1,error:h.error||"Login failed"}}catch{return{success:!1,error:"Network error"}}},c=async()=>{try{await fetch("/api/auth/logout.php",{method:"POST",credentials:"same-origin"})}catch(u){console.error("Logout error:",u)}finally{n(null),t(!1)}};return s?a.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"text-lg text-gray-900 dark:text-white",children:"Loading..."})}):e?a.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[a.jsx(tk,{user:r,onLogout:c}),a.jsx(Xv,{}),a.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:a.jsxs(El,{children:[a.jsx(Ne,{path:"/",element:a.jsx(rk,{})}),a.jsx(Ne,{path:"/author",element:a.jsx(Vv,{})}),a.jsx(Ne,{path:"/galleries/*",element:a.jsx(Hv,{})}),a.jsx(Ne,{path:"/stories/*",element:a.jsx(Wv,{})}),a.jsx(Ne,{path:"/uploads",element:a.jsx(Kv,{})}),a.jsx(Ne,{path:"/socials",element:a.jsx(Gv,{})}),a.jsx(Ne,{path:"/moderation",element:a.jsx(Qv,{})}),a.jsx(Ne,{path:"/password",element:a.jsx(Yv,{})}),a.jsx(Ne,{path:"/analytics",element:a.jsx(qv,{})})]})})]}):a.jsx(ek,{onLogin:o})}function ek({onLogin:e}){const[t,r]=g.useState(""),[n,s]=g.useState(""),[l,i]=g.useState(""),[o,c]=g.useState(!1),u=async d=>{d.preventDefault(),c(!0),i("");const f=await e(t,n);f.success||i(f.error||"Login failed"),c(!1)};return a.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md max-w-md w-full",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:"Author CMS Admin"}),l&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-400 rounded",children:l}),a.jsxs("form",{onSubmit:u,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Username"}),a.jsx("input",{type:"text",value:t,onChange:d=>r(d.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter username",required:!0})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Password"}),a.jsx("input",{type:"password",value:n,onChange:d=>s(d.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter password",required:!0})]}),a.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:o?"Logging in...":"Login"})]})]})})}function tk({user:e,onLogout:t}){return a.jsx("nav",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between h-16",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Author CMS Admin"}),e&&a.jsxs("span",{className:"ml-4 text-sm text-gray-600 dark:text-gray-400",children:["Welcome, ",e.username," (",e.role,")"]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(On,{}),a.jsx("a",{href:"/",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-sm",target:"_blank",rel:"noopener noreferrer",children:"View Site"}),a.jsx("button",{onClick:t,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Logout"})]})]})})})}function rk(){const[e,t]=g.useState(null),[r,n]=g.useState(!0),[s,l]=g.useState(null);g.useEffect(()=>{i()},[]);const i=async()=>{try{const o=await fetch("/api/admin/quick-stats.php",{credentials:"same-origin"});if(!o.ok)throw new Error("Failed to fetch quick stats");const c=await o.json();c.success?t(c.data):l(c.error||"Failed to load stats")}catch(o){console.error("Quick stats error:",o),l("Failed to load stats")}finally{n(!1)}};return a.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:a.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-6",children:"Admin Dashboard"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(ir,{title:"Author Profile",href:"/admin/author",description:"Manage author bio, tagline, and profile images",icon:""}),a.jsx(ir,{title:"Image Galleries",href:"/admin/galleries",description:"Create and manage image galleries",icon:""}),a.jsx(ir,{title:"Stories & Chapters",href:"/admin/stories",description:"Write and publish stories and chapters",icon:""}),a.jsx(ir,{title:"Upload Manager",href:"/admin/uploads",description:"Manage uploaded images and files",icon:""}),a.jsx(ir,{title:"Social Media",href:"/admin/socials",description:"Update social media links across all sites",icon:""}),a.jsx(ir,{title:"Moderation",href:"/admin/moderation",description:"Moderate comments and manage user bans",icon:""}),a.jsx(ir,{title:"Change Password",href:"/admin/password",description:"Update your admin account password securely",icon:""}),a.jsx(ir,{title:"Analytics",href:"/admin/analytics",description:"View site statistics and engagement metrics",icon:""})]}),a.jsxs("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 dark:text-blue-300 mb-2",children:"Quick Stats"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Galleries"}),a.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:r?"Loading...":s?"Error":(e==null?void 0:e.galleries)||0})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Stories"}),a.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:r?"Loading...":s?"Error":(e==null?void 0:e.stories)||0})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Comments"}),a.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:r?"Loading...":s?"Error":(e==null?void 0:e.comments)||0})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Total Likes"}),a.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:r?"Loading...":s?"Error":(e==null?void 0:e.total_likes)||0})]})]})]})]})})}function ir({title:e,href:t,description:r,icon:n}){return a.jsxs(Ue,{to:t,className:"block p-6 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("span",{className:"text-2xl mr-3",children:n}),a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:e})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r})]})}function nk(){const e=Qr();return g.useEffect(()=>{Al.trackPageView()},[e.pathname]),null}function sk(){return a.jsxs(a.Fragment,{children:[a.jsx(nk,{}),a.jsxs(El,{children:[a.jsx(Ne,{path:"/",element:a.jsx(hy,{})}),a.jsx(Ne,{path:"/galleries/*",element:a.jsx(ky,{})}),a.jsx(Ne,{path:"/storytime/*",element:a.jsx(Bv,{})}),a.jsx(Ne,{path:"/admin/*",element:a.jsx(Jv,{})}),a.jsx(Ne,{path:"*",element:a.jsx(xx,{to:"/",replace:!0})})]})]})}tf(document.getElementById("root")).render(a.jsx(g.StrictMode,{children:a.jsx(vf,{children:a.jsx(Sx,{children:a.jsx(iy,{children:a.jsx(sk,{})})})})}));
